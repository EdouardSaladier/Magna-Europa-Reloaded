###########################
# BBA Italian Events
###########################

add_namespace = BBA_italy_missiolinis
add_namespace = BBA_italy_second_italo_ethiopian_war
add_namespace = BBA_italy_local_rulers
add_namespace = BBA_italy_air_accident
add_namespace = BBA_italy_naval_cooperation_programs
add_namespace = BBA_italy_colonial_management
add_namespace = BBA_italy_bop
add_namespace = BBA_italy_civil_war
add_namespace = BBA_italy_research_agreement
add_namespace = BBA_italy_pact
add_namespace = BBA_italy_decide_the_fate_of_mussolini
add_namespace = BBA_italy_purge_the_party
add_namespace = BBA_italy_recognize_the_empire
add_namespace = BBA_italy_sends_military_support
add_namespace = BBA_italy_communist_events
add_namespace = BBA_italy_democratic_events
add_namespace = BBA_italy_anti_colonialism_events
add_namespace = BBA_italy_interaction_events
add_namespace = BBA_italy_interaction_events_news
add_namespace = BBA_italy_council_deposes_duce
add_namespace = BBA_italy_human_torpedo_raid


# Italy offer for peace - Event for ETH
country_event = {
	id = BBA_italy_second_italo_ethiopian_war.1
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_second_italo_ethiopian_war.1 FROM = [From.GetName]" }
	title = BBA_italy_second_italo_ethiopian_war.1.t
	desc = BBA_italy_second_italo_ethiopian_war.1.desc
	picture = GFX_report_event_african_soldiers
	
	is_triggered_only = yes
	
	#ACCEPT
	option = {
		name = BBA_italy_second_italo_ethiopian_war.1.a
		ai_chance = {
			base = 10
			modifier = { #If they're stronger than ITA then never accept
				factor = 0
				strength_ratio = {
					tag = FROM
					ratio > 1
				}
			}
		}
		
	}
	
	option = {
		name = BBA_italy_second_italo_ethiopian_war.1.b
		ai_chance = {
			base = 1
			modifier = { #Usually they should accept
				factor = 0
				strength_ratio = {
					tag = FROM
					ratio < 1
				}
			}
		}
	}
}

# ETH accepts ITA peace offer - Event for ITA
country_event = {
	id = BBA_italy_second_italo_ethiopian_war.2
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_second_italo_ethiopian_war.2 FROM = [From.GetName]" }
	title = BBA_italy_second_italo_ethiopian_war.2.t
	desc = BBA_italy_second_italo_ethiopian_war.2.desc
	picture = GFX_report_event_african_soldiers
	
	is_triggered_only = yes

	immediate = {
		
	}
	
	#Ok - Already completed initial missiolini focus
	option = {
		name = BBA_italy_second_italo_ethiopian_war.2.a

	}

	# Ok - Abyssinian Fiasco
	option = { 
		name = BBA_italy_missiolinis.02_north.b
	}

	# Ok - Struggle in Ethiopia
	option = { 
		name = BBA_italy_missiolinis.02_north.c


	}
}

# ETH refects ITA peace offer - Event for ITA
country_event = {
	id = BBA_italy_second_italo_ethiopian_war.3
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_second_italo_ethiopian_war.3 FROM = [From.GetName]" }
	title = BBA_italy_second_italo_ethiopian_war.3.t
	desc = BBA_italy_second_italo_ethiopian_war.3.desc
	picture = GFX_report_event_african_soldiers
	
	is_triggered_only = yes
	
	#Ok
	option = {
		name = BBA_italy_second_italo_ethiopian_war.3.a

	}
}




#########################
###### MISSIOLINIS ######
#########################

### RANDOM MISSION DISPATCHER ###
country_event = {
	id = BBA_italy_missiolinis.00
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_missiolinis.00 FROM = [From.GetName]" }
	hidden = yes

	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			if = { #IF NO OTHER MISSIOLINI HAS BEEN ACTIVATED RECENTLY AND NOT TOO MANY MISSIONS ACTIVE, GO AHEAD
				limit = {
					ITA_missiolinis_cd_ready = yes
					ITA_missiolinis_can_have_a_new_mission = yes
				}
				#Trigger a random missiolini
				random_list = {
					#10 = { #STRENGTHEN HEAVY INDUSTRY - #For now only triggered once as a fixed mission
					#	country_event = BBA_italy_missiolinis.31
					#}
					#10 = { #STRENGTHEN THE ARMY - #For now only triggered once as a fixed mission
					#	country_event = BBA_italy_missiolinis.41
					#}
					10 = { #STOCKPILE TRUCKS
						modifier = {
							factor = 10
							has_equipment = {
								motorized_equipment_1 < 50
							}
						}
						modifier = { #Trigger only once
							factor = 0
							has_country_flag = ITA_missiolini_stockpile_trucks_triggered_flag
						}
						modifier = { #Do not re-roll same missiolini
							factor = 0
							check_variable = { ITA_missiolini_reroll_from = 1 } #STOCKPILE TRUCKS
						}
						country_event = BBA_italy_missiolinis.51
					}
					10 = { #STOCKPILE FUEL
						modifier = {
							factor = 10
							has_fuel < 60000
						}
						modifier = { #Trigger only once
							factor = 0
							has_country_flag = ITA_missiolini_stockpile_fuel_triggered_flag
						}
						modifier = { #Do not re-roll same missiolini
							factor = 0
							check_variable = { ITA_missiolini_reroll_from = 2 } #STOCKPILE FUEL
						}
						country_event = BBA_italy_missiolinis.61
					}
					10 = { #STRENGTHEN THE AIRFORCE
						modifier = {
							factor = 10
							has_equipment = {
								small_plane_airframe < 100
							}
						}
						modifier = {
							factor = 5
							has_equipment = {
								medium_plane_airframe < 100
							}
							has_equipment = {
								small_plane_cas_airframe < 100
							}
							has_equipment = {
								small_plane_naval_bomber_airframe < 100
							}
						}
						modifier = { #Rare to have it twice
							factor = 0.1
							has_country_flag = ITA_missiolini_strengthen_the_airforce_triggered_flag
						}
						modifier = { #Do not re-roll same missiolini
							factor = 0
							check_variable = { ITA_missiolini_reroll_from = 3 } #STRENGTHEN THE AIRFORCE
						}
						country_event = BBA_italy_missiolinis.71
					}
					10 = { #INDUSTRIAL RESEARCH
						modifier = {
							factor = 0
							OR = {
								#date < 1939.1.1 #MM: Shouldn't be necessary (and makes it harder to test)
								AND = { #Potentially 1943+
									OR = {
										has_tech = flexible_line
										has_tech = streamlined_line
										is_researching_technology = flexible_line
										is_researching_technology = streamlined_line
									}
									OR = {
										has_tech = concentrated_industry5
										has_tech = dispersed_industry5
										is_researching_technology = concentrated_industry5
										is_researching_technology = dispersed_industry5
									}
									OR = {
										has_tech = construction5
										is_researching_technology = construction5
									}
								}
								AND = { #1941-1943
									date < 1943.1.1
									OR = {
										has_tech = assembly_line_production
										is_researching_technology = assembly_line_production
									}
									OR = {
										has_tech = concentrated_industry4
										has_tech = dispersed_industry4
										is_researching_technology = concentrated_industry4
										is_researching_technology = dispersed_industry4
									}
									OR = {
										has_tech = construction4
										is_researching_technology = construction4
									}
								}
								AND = { #1939-1941
									date < 1941.1.1
									OR = {
										has_tech = advanced_machine_tools
										is_researching_technology = advanced_machine_tools
									}
									OR = {
										has_tech = concentrated_industry3
										has_tech = dispersed_industry3
										is_researching_technology = concentrated_industry3
										is_researching_technology = dispersed_industry3
									}
									OR = {
										has_tech = construction3
										is_researching_technology = construction3
									}
								}
							}
						}
						modifier = {
							factor = 10
							OR = {
								AND = {
									date > 1940.1.1
									OR = {
										NOT = { has_tech = advanced_machine_tools }
										AND = {
											NOT = { has_tech = concentrated_industry3 }
											NOT = { has_tech = dispersed_industry3 }
										}
										NOT = { has_tech = construction3 }
									}
								}
								AND = {
									date > 1942.1.1
									OR = {
										NOT = { has_tech = assembly_line_production }
										AND = {
											NOT = { has_tech = concentrated_industry4 }
											NOT = { has_tech = dispersed_industry4 }
										}
										NOT = { has_tech = construction4 }
									}
								}
								AND = {
									date > 1944.1.1
									OR = {
										AND = {
											NOT = { has_tech = flexible_line }
											NOT = { has_tech = streamlined_line }
										}
										AND = {
											NOT = { has_tech = concentrated_industry5 }
											NOT = { has_tech = dispersed_industry5 }
										}
										NOT = { has_tech = construction5 }
									}
								}
							}
						}
						modifier = { #Less probable to have it twice
							factor = 0.5
							has_country_flag = ITA_missiolini_industrial_research_triggered_flag
						}
						modifier = { #Do not re-roll same missiolini
							factor = 0
							check_variable = { ITA_missiolini_reroll_from = 4 } #INDUSTRIAL RESEARCH
						}
						country_event = BBA_italy_missiolinis.81
					}
					10 = { #EXPAND INTELLIGENCE SERVICE
						modifier = {
							factor = 0
							OR = {
								NOT = { has_dlc = "La Resistance" }
								AND = {
									has_done_agency_upgrade = upgrade_form_department
									has_done_agency_upgrade = upgrade_army_department
									OR = {
										has_done_agency_upgrade = upgrade_anti_partisan
										NOT = {
											any_controlled_state = {
												has_resistance = yes
											}
										}
									}
									has_done_agency_upgrade = upgrade_passive_defense
								}
							}
						}
						modifier = {
							factor = 10
							date > 1939.6.1
							OR = {
								NOT = { has_done_agency_upgrade = upgrade_form_department }
								NOT = { has_done_agency_upgrade = upgrade_army_department }
								AND = {
									NOT = { has_done_agency_upgrade = upgrade_anti_partisan }
									any_controlled_state = {
										NOT = { is_owned_by = ROOT }
									}
								}
							}
						}
						modifier = { #Less probable to have it twice
							factor = 0.5
							has_country_flag = ITA_missiolini_expand_intelligence_service_triggered_flag
						}
						modifier = { #Do not re-roll same missiolini
							factor = 0
							check_variable = { ITA_missiolini_reroll_from = 5 } #EXPAND INTELLIGENCE SERVICE
						}
						country_event = BBA_italy_missiolinis.91
					}
					10 = { #OCCUPY ALBANIA
						modifier = {
							factor = 0
							OR = {
								NOT = { country_exists = ALB }
								has_country_flag = ITA_missiolini_occupy_albania_triggered_flag #Trigger only once
								focus_progress = {
									focus = ITA_albanian_occupation
									progress > 0
								}
								AND = {
									1521 = { #ALBANIA
										OR = {
											is_fully_controlled_by = ROOT
											controller = {
												is_subject_of = ROOT
												hidden_trigger = { #To prevent unnecessary overcrowding
													has_full_control_of_state = PREV
												}
											}
										}
									}
									885 = { #NORTHERN EPIRUS
										OR = {
											is_fully_controlled_by = ROOT
											controller = {
												is_subject_of = ROOT
												hidden_trigger = { #To prevent unnecessary overcrowding
													has_full_control_of_state = PREV
												}
											}
										}
									}
								}
							}
						}
						modifier = {
							factor = 10
							date > 1938.6.1 #MM: If this makes ppl rush Albania for no real reason, it can be triggered in 1939.1.1
						}
						modifier = {
							factor = 100
							date > 1938.6.1 #MM: If this makes ppl rush Albania for no real reason, it can be triggered in 1939.1.1
							is_historical_focus_on = yes
						}
						modifier = { #NOT AVAILABLE WHEN RE-ROLLING MISSIOLINI
							factor = 0
							has_country_flag = ITA_missiolinis_rerolling_flag
						}
						country_event = BBA_italy_missiolinis.101
					}
					10 = { #OCCUPY DALMATIA
						modifier = {
							factor = 0
							OR = {
								date < 1940.6.1
								NOT = { country_exists = YUG }
								has_country_flag = ITA_missiolini_occupy_dalmatia_triggered_flag #Trigger only once
								1563 = { #DALMATIA
									OR = {
										is_fully_controlled_by = ROOT
										controller = {
											is_subject_of = ROOT
											hidden_trigger = { #To prevent unnecessary overcrowding
												has_full_control_of_state = PREV
											}
										}
									}
								}
							}
						}
						modifier = {
							factor = 10
							date > 1940.6.1 #This first just because it's easier to go for YUG first.
						}
						modifier = {
							factor = 100
							date > 1940.6.1 #This first just because it's easier to go for YUG first.
							is_historical_focus_on = yes
						}
						modifier = {
							factor = 10
							ITA_missiolinis_weigh_mussolini_feels_invincible = yes
						}
						modifier = {
							factor = 10
							ITA_missiolinis_weigh_mussolini_feels_safe = yes
						}
						modifier = { #NOT AVAILABLE WHEN RE-ROLLING MISSIOLINI
							factor = 0
							has_country_flag = ITA_missiolinis_rerolling_flag
						}
						country_event = BBA_italy_missiolinis.111
					}
					10 = { #OCCUPY GREECE
						modifier = {
							factor = 0
							OR = {
								date < 1941.1.1
								NOT = { country_exists = GRE }
								has_country_flag = ITA_missiolini_occupy_greece_triggered_flag #Trigger only once
								AND = {
									995 = { #EPIRUS
										OR = {
											is_fully_controlled_by = ROOT
											controller = {
												is_subject_of = ROOT
												hidden_trigger = { #To prevent unnecessary overcrowding
													has_full_control_of_state = PREV
												}
											}
										}
									}
									2003 = { #ATTICA
										OR = {
											is_fully_controlled_by = ROOT
											controller = {
												is_subject_of = ROOT
												hidden_trigger = { #To prevent unnecessary overcrowding
													has_full_control_of_state = PREV
												}
											}
										}
									}
									1539 = { #PELOPONNESE
										OR = {
											is_fully_controlled_by = ROOT
											controller = {
												is_subject_of = ROOT
												hidden_trigger = { #To prevent unnecessary overcrowding
													has_full_control_of_state = PREV
												}
											}
										}
									}
								}
							}
						}
						modifier = {
							factor = 10
							date > 1941.1.1
						}
						modifier = {
							factor = 100
							date > 1941.1.1
							is_historical_focus_on = yes
						}
						modifier = {
							factor = 10
							ITA_missiolinis_weigh_mussolini_feels_invincible = yes
						}
						modifier = {
							factor = 10
							ITA_missiolinis_weigh_mussolini_feels_safe = yes
						}
						modifier = { #NOT AVAILABLE WHEN RE-ROLLING MISSIOLINI
							factor = 0
							has_country_flag = ITA_missiolinis_rerolling_flag
						}
						country_event = BBA_italy_missiolinis.121
					}
					10 = { #OCCUPY TICINO
						modifier = {
							factor = 0
							OR = {
								has_country_flag = { flag = ITA_missiolinis_level_flag value < 3 } #Mad stuff
								NOT = { country_exists = SWI }
								has_country_flag = ITA_missiolini_occupy_ticino_triggered_flag #Trigger only once
								708 = { #TICINO
									OR = {
										is_fully_controlled_by = ROOT
										controller = {
											is_subject_of = ROOT
											hidden_trigger = { #To prevent unnecessary overcrowding
												has_full_control_of_state = PREV
											}
										}
									}
								}
							}
						}
						modifier = {
							factor = 10
							ITA_missiolinis_weigh_mussolini_esta_flipado = yes
						}
						modifier = {
							factor = 10
							ITA_missiolinis_weigh_mussolini_feels_invincible = yes
						}
						modifier = {
							factor = 10
							ITA_missiolinis_weigh_mussolini_feels_safe = yes
						}
						modifier = { #NOT AVAILABLE WHEN RE-ROLLING MISSIOLINI
							factor = 0
							has_country_flag = ITA_missiolinis_rerolling_flag
						}
						country_event = BBA_italy_missiolinis.131
					}
					10 = { #BOLSTER POLITICAL CABINET
						modifier = {
							factor = 0
							OR = {
								amount_taken_ideas = {
									amount > 2
									slots = { political_advisor }
								}
								has_country_flag = ITA_missiolini_bolster_political_cabinet_triggered_flag #Trigger only once
							}
						}
						modifier = {
							factor = 10
							date > 1942.1.1
							amount_taken_ideas = {
								amount < 2
								slots = { political_advisor }
							}
						}
						modifier = { #Do not re-roll same missiolini
							factor = 0
							check_variable = { ITA_missiolini_reroll_from = 6 } #BOLSTER POLITICAL CABINET
						}
						country_event = BBA_italy_missiolinis.201
					}
					10 = { #BOLSTER MILITARY CABINET
						modifier = {
							factor = 0
							OR = {
								amount_taken_ideas = {
									amount > 2
									slots = { high_command }
								}
								has_country_flag = ITA_missiolini_bolster_military_high_command_triggered_flag #Trigger only once
							}
						}
						modifier = {
							factor = 10
							date > 1942.1.1
							amount_taken_ideas = {
								amount < 2
								slots = { high_command }
							}
						}
						modifier = { #Do not re-roll same missiolini
							factor = 0
							check_variable = { ITA_missiolini_reroll_from = 7 } #BOLSTER MILITARY CABINET
						}
						country_event = BBA_italy_missiolinis.211
					}
				}
			}
			else = {
				log = "NO MISSIOLINI PER TE BAMBINO"
			}
			country_event = { id = BBA_italy_missiolinis.00 days = 180 }

			#Re-set vars and flags if re-rolling
			if = {
				limit = {
					has_country_flag = ITA_missiolinis_rerolling_flag
				}
				#clr_country_flag = ITA_missiolinis_rerolling_flag #Clearing this flag in the actual new missiolini so that option to re-roll again doesn't show up
				set_variable = { ITA_missiolini_reroll_from = 0 }
			}
		}
	}
}

### PROGRESS IN ETHIOPIA ###

# Progress in Ethiopia - FAILURE (North)
country_event = {
	id = BBA_italy_missiolinis.02_north #First Missiolini is in the Italo-Ethiopian War file
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_missiolinis.02_north #First Missiolini is in the Italo-Ethiopian War file FROM = [From.GetName]" }
	title = BBA_italy_missiolinis.02_north.t
	desc = BBA_italy_missiolinis.02_north.desc
	picture = GFX_report_event_generic_soldiers_surrendering
	
	is_triggered_only = yes

	trigger = {
		
	}

	fire_only_once = yes

	immediate = {
		
	}

	# Oops (No focus to complete)
	option = { 
		name = BBA_italy_missiolinis.02_north.a
		
	}

	# Oops (Complete The Abyssinian Fiasco)
	option = { 
		name = BBA_italy_missiolinis.02_north.b

	}

	# Oops (Complete Struggle in Ethiopia)
	option = { 
		name = BBA_italy_missiolinis.02_north.c

	}
}

# Progress in Ethiopia - FAILURE (South)
country_event = {
	id = BBA_italy_missiolinis.04_south #First Missiolini is in the Italo-Ethiopian War file
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_missiolinis.04_south #First Missiolini is in the Italo-Ethiopian War file FROM = [From.GetName]" }
	title = BBA_italy_missiolinis.04_south.t
	desc = BBA_italy_missiolinis.04_south.desc
	picture = GFX_report_event_generic_soldiers_surrendering
	
	is_triggered_only = yes

	trigger = {
		
	}

	fire_only_once = yes

	immediate = {
		
	}

	# Oops (No focus to complete)
	option = { 
		name = BBA_italy_missiolinis.04_south.a
		
		trigger = {
			
		}

		ai_chance = {
			base = 10
		}

	}

	# Oops (Complete The Abyssinian Fiasco)
	option = { 
		name = BBA_italy_missiolinis.04_south.b

		trigger = {
			has_dlc = "By Blood Alone"  #Abyssinian Fiasco focus not available without BBA
			
		}

		ai_chance = {
			base = 0
			modifier = {
				add = 1000
			}
		}
	}

	# Oops (Complete Struggle in Ethiopia)
	option = { 
		name = BBA_italy_missiolinis.04_south.c

		trigger = {
			
		}

		ai_chance = {
			base = 10
			modifier = {
				factor = 0
				OR = {
					ITA_is_socialist_ai = yes
					ITA_is_communist_ai = yes
				}
			}
		}
	}
}

# Progress in Ethiopia - SUCCESS (North)
country_event = {
	id = BBA_italy_missiolinis.03_north
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_missiolinis.03_north FROM = [From.GetName]" }
	title = BBA_italy_missiolinis.03_north.t
	desc = BBA_italy_missiolinis.03_north.desc
	picture = GFX_report_event_generic_military_parade
	
	is_triggered_only = yes

	trigger = {
		
	}

	fire_only_once = yes

	immediate = {
		
	}

	# Nice
	option = { 
		name = BBA_italy_missiolinis.03_north.a
		ai_chance = {
			base = 10
		}

	}
}

# Progress in Ethiopia - SUCCESS (South)
country_event = {
	id = BBA_italy_missiolinis.05_south
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_missiolinis.05_south FROM = [From.GetName]" }
	title = BBA_italy_missiolinis.05_south.t
	desc = BBA_italy_missiolinis.05_south.desc
	picture = GFX_report_event_generic_military_parade
	
	is_triggered_only = yes

	trigger = {
		
	}

	fire_only_once = yes

	immediate = {
		
	}

	# Nice
	option = { 
		name = BBA_italy_missiolinis.05_south.a
		ai_chance = {
			base = 10
		}
		
	}
}


### CONQUER ETHIOPIA ###
# Conquer Ethiopia - Missiolini
unit_leader_event = {
	id = BBA_italy_missiolinis.11
	title = BBA_italy_missiolinis.11.t
	desc = BBA_italy_missiolinis.11.desc
	picture = GFX_report_event_generic_mussolini
	
	is_triggered_only = yes

	trigger = {
		
	}

	fire_only_once = yes

	trigger = {
		
	}

	immediate = {
		
	}

	# OK dude
	option = { 
		name = BBA_italy_missiolinis.11.a
		ai_chance = {
			base = 10
		}
	}
}

# Conquer Ethiopia - FAILURE 
country_event = {
	id = BBA_italy_missiolinis.12
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_missiolinis.12 FROM = [From.GetName]" }
	title = BBA_italy_missiolinis.12.t
	desc = BBA_italy_missiolinis.12.desc
	picture = GFX_report_event_generic_destroyed_vehicles
	
	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_system_available = yes
	}

	fire_only_once = yes

	immediate = {
		
	}

	# Ooops
	option = { 
		name = BBA_italy_missiolinis.12.a
		ai_chance = {
			base = 10
		}
	}	
}

# Conquer Ethiopia - SUCCESS 
country_event = {
	id = BBA_italy_missiolinis.13
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_missiolinis.13 FROM = [From.GetName]" }
	title = BBA_italy_missiolinis.13.t
	desc = BBA_italy_missiolinis.13.desc
	picture = GFX_report_event_generic_italian_celebration
	
	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_system_available = yes
	}

	fire_only_once = yes

	immediate = {
		
	}

	# Nice
	option = { 
		name = BBA_italy_missiolinis.13.a
		ai_chance = {
			base = 10
		}
	}
}


### PACIFY ETHIOPIA ###
# Pacify Ethiopia - Dispatcher
country_event = {
	id = BBA_italy_missiolinis.20
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_missiolinis.20 FROM = [From.GetName]" }
	hidden = yes

	fire_only_once = yes

	immediate = {
		
	}

	trigger = {
		original_tag = ITA
		date > 1936.01.01
	}

	mean_time_to_happen = {
		days = 15
	}
}

# Pacify Ethiopia - Missiolini
unit_leader_event = {
	id = BBA_italy_missiolinis.21
	title = BBA_italy_missiolinis.21.t
	desc = BBA_italy_missiolinis.21.desc
	picture = GFX_report_event_generic_mussolini
	
	fire_only_once = yes

	is_triggered_only = yes

	trigger = {
		
	}

	immediate = {
	}

	# OK dude
	option = { 
		name = BBA_italy_missiolinis.21.a
		ai_chance = {
			base = 10
		}

	}
}

# Pacify Ethiopia - FAILURE 
country_event = {
	id = BBA_italy_missiolinis.22
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_missiolinis.22 FROM = [From.GetName]" }
	title = BBA_italy_missiolinis.22.t
	desc = BBA_italy_missiolinis.22.desc
	picture = GFX_report_event_ETH_ethiopian_warriors
	
	is_triggered_only = yes

	fire_only_once = yes

	immediate = {
		
	}

	# Ooops
	option = { 
		name = BBA_italy_missiolinis.22.a

	}
}

# Pacify Ethiopia - SUCCESS 
country_event = {
	id = BBA_italy_missiolinis.23
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_missiolinis.23 FROM = [From.GetName]" }
	title = BBA_italy_missiolinis.23.t
	desc = BBA_italy_missiolinis.23.desc
	picture = GFX_report_event_fascist_speech
	
	is_triggered_only = yes

	fire_only_once = yes

	immediate = {
		
	}

	# Nice
	option = { 
		name = BBA_italy_missiolinis.23.a

	}
}


### INDUSTRIALIZATION ###
# Industrialization - Missiolini
unit_leader_event = {
	id = BBA_italy_missiolinis.31
	title = BBA_italy_missiolinis.31.t
	desc = BBA_italy_missiolinis.31.desc
	picture = GFX_report_event_generic_mussolini
	
	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_cd_ready = yes #IF NO OTHER MISSIOLINI HAS BEEN ACTIVATED RECENTLY, GO AHEAD
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			ITA_missiolinis_initialize_new_mission_effect = yes

			#Get number of civs to build
			set_variable = { ITA_missiolinis_required_civs = ROOT.num_of_civilian_factories }
			add_to_variable = { ITA_missiolinis_required_civs = ITA_missiolinis_number_of_civs_goal }
			add_to_variable = { ITA_missiolinis_required_civs = -1 } #So that the trigger in the mission works properly (can only use >, and not >=)
			#TODO_Manu: Probably this will be a fixed amount of civs in the future. Then we'll have a generic randomly-triggered mission for building factories in general.
		}
	}

	# OK dude
	option = { 
		name = BBA_italy_missiolinis.31.a
		ai_chance = {
			base = 10
		}

		activate_mission = ITA_missiolini_strengthen_heavy_industry
	}
}

# Industrialization - FAILURE 
country_event = {
	id = BBA_italy_missiolinis.32
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_missiolinis.32 FROM = [From.GetName]" }
	title = BBA_italy_missiolinis.32.t
	desc = BBA_italy_missiolinis.32.desc
	picture = GFX_report_event_generic_factory
	
	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			ITA_missiolinis_finalize_mission_effect = yes
			ITA_missiolinis_add_to_failed_missions = yes
		}
	}

	# Ooops
	option = { 
		name = BBA_italy_missiolinis.32.a

		ITA_missiolini_strengthen_heavy_industry_failure_effect = yes
	}
}

# Industrialization - SUCCESS 
country_event = {
	id = BBA_italy_missiolinis.33
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_missiolinis.33 FROM = [From.GetName]" }
	title = BBA_italy_missiolinis.33.t
	desc = BBA_italy_missiolinis.33.desc
	picture = GFX_report_event_generic_factory
	
	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			ITA_missiolinis_finalize_mission_effect = yes
			ITA_missiolinis_add_to_successful_missions = yes
		}
	}

	# Nice
	option = { 
		name = BBA_italy_missiolinis.33.a

		ITA_missiolini_strengthen_heavy_industry_success_effect = yes
	}
}


### STRENGTHEN THE ARMY ###
# Strengthen the army - Missiolini
unit_leader_event = {
	id = BBA_italy_missiolinis.41
	title = BBA_italy_missiolinis.41.t
	desc = BBA_italy_missiolinis.41.desc
	picture = GFX_report_event_generic_mussolini
	
	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_cd_ready = yes #IF NO OTHER MISSIOLINI HAS BEEN ACTIVATED RECENTLY, GO AHEAD
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			ITA_missiolinis_initialize_new_mission_effect = yes
		}
	}

	# OK dude
	option = { 
		name = BBA_italy_missiolinis.41.a
		ai_chance = {
			base = 10
		}

		activate_mission = ITA_missiolini_strengthen_the_army
	}
}

# Strengthen the army - FAILURE 
country_event = {
	id = BBA_italy_missiolinis.42
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_missiolinis.42 FROM = [From.GetName]" }
	title = BBA_italy_missiolinis.42.t
	desc = BBA_italy_missiolinis.42.desc
	picture = GFX_report_event_soldiers_marching
	
	is_triggered_only = yes
	trigger = {
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			ITA_missiolinis_finalize_mission_effect = yes
			ITA_missiolinis_add_to_failed_missions = yes
		}
	}

	# Ooops
	option = { 
		name = BBA_italy_missiolinis.42.a
		
		ITA_missiolini_strengthen_the_army_failure_effect = yes		
	}
}

# Strengthen the army - SUCCESS 
country_event = {
	id = BBA_italy_missiolinis.43
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_missiolinis.43 FROM = [From.GetName]" }
	title = BBA_italy_missiolinis.43.t
	desc = BBA_italy_missiolinis.43.desc
	picture = GFX_report_event_soldiers_marching
	
	is_triggered_only = yes
	trigger = {
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			ITA_missiolinis_finalize_mission_effect = yes
			ITA_missiolinis_add_to_successful_missions = yes
		}
	}

	# Nice
	option = { 
		name = BBA_italy_missiolinis.43.a
		
		ITA_missiolini_strengthen_the_army_success_effect = yes
	}
}

### STOCKPILE TRUCKS ###
# Stockpile Trucks - Missiolini
unit_leader_event = {
	id = BBA_italy_missiolinis.51
	title = BBA_italy_missiolinis.51.t
	desc = BBA_italy_missiolinis.51.desc
	picture = GFX_report_event_generic_mussolini
	
	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_cd_ready = yes #IF NO OTHER MISSIOLINI HAS BEEN ACTIVATED RECENTLY, GO AHEAD
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			ITA_missiolinis_initialize_new_mission_effect = yes
			set_country_flag = ITA_missiolini_stockpile_trucks_triggered_flag #Trigger only once
			#Establish goal
			set_variable = { ITA_missiolinis_stockpile_trucks_goal = num_equipment@motorized_equipment_1 }
			add_to_variable = { ITA_missiolinis_stockpile_trucks_goal = ITA_missiolinis_trucks_to_produce }
			add_to_variable = { ITA_missiolinis_stockpile_trucks_goal = -1 } #So that the trigger in the mission works properly (can only use >, and not >=)
		}
	}

	# OK dude
	option = { 
		name = BBA_italy_missiolinis.51.a
		ai_chance = {
			base = 10
		}

		activate_mission = ITA_missiolini_stockpile_trucks

		ITA_mussolinis_reroll_cleanup_if_necessary = yes #To clear stuff if coming from a reroll
	}


	# Re-roll
	option = { 
		name = BBA_italy_missiolinis.council

		ai_chance = {
			base = 0
		}

		trigger = {
			has_completed_focus = ITA_boost_the_grand_council_of_fascism
			NOT = { has_country_flag = ITA_missiolinis_rerolling_flag }
		}

		ITA_missiolinis_reroll_cost = yes

		hidden_effect = {
			#Revert mission initialization from immediate effect
			ITA_missiolinis_revert_new_mission_initialization_effect = yes

			#Revert other stuff in the immediate effect
			clr_country_flag = ITA_missiolini_stockpile_trucks_triggered_flag
			set_variable = { ITA_missiolinis_stockpile_trucks_goal = 0 }

			#Re-roll
			set_variable = { ITA_missiolini_reroll_from = 1 } #STOCKPILE TRUCKS
			country_event = { id = BBA_italy_missiolinis.00 hours = 20 }
		}
	}
}

# Stockpile Trucks - FAILURE 
country_event = {
	id = BBA_italy_missiolinis.52
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_missiolinis.52 FROM = [From.GetName]" }
	title = BBA_italy_missiolinis.52.t
	desc = BBA_italy_missiolinis.52.desc
	picture = GFX_report_event_generic_truck
	
	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			ITA_missiolinis_finalize_mission_effect = yes
			ITA_missiolinis_add_to_failed_missions = yes
		}
	}

	# Ooops
	option = { 
		name = BBA_italy_missiolinis.52.a
		
		ITA_missiolini_stockpile_trucks_failure_effect = yes		
	}
}

# Stockpile Trucks - SUCCESS 
country_event = {
	id = BBA_italy_missiolinis.53
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_missiolinis.53 FROM = [From.GetName]" }
	title = BBA_italy_missiolinis.53.t
	desc = BBA_italy_missiolinis.53.desc
	picture = GFX_report_event_generic_truck
	
	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			ITA_missiolinis_finalize_mission_effect = yes
			ITA_missiolinis_add_to_successful_missions = yes
		}
	}

	# Nice
	option = { 
		name = BBA_italy_missiolinis.53.a
		
		ITA_missiolini_stockpile_trucks_success_effect = yes
	}
}


### STOCKPILE FUEL ###
# Stockpile Fuel - Missiolini
unit_leader_event = {
	id = BBA_italy_missiolinis.61
	title = BBA_italy_missiolinis.61.t
	desc = BBA_italy_missiolinis.61.desc
	picture = GFX_report_event_generic_mussolini
	
	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_cd_ready = yes #IF NO OTHER MISSIOLINI HAS BEEN ACTIVATED RECENTLY, GO AHEAD
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			ITA_missiolinis_initialize_new_mission_effect = yes
			set_country_flag = ITA_missiolini_stockpile_fuel_triggered_flag #Trigger only once
		}
	}

	# OK dude
	option = { 
		name = BBA_italy_missiolinis.61.a
		ai_chance = {
			base = 10
		}

		activate_mission = ITA_missiolini_stockpile_fuel

		ITA_mussolinis_reroll_cleanup_if_necessary = yes #To clear stuff if coming from a reroll
	}

	# Re-roll
	option = { 
		name = BBA_italy_missiolinis.council

		ai_chance = {
			base = 0
		}

		trigger = {
			has_completed_focus = ITA_boost_the_grand_council_of_fascism
			NOT = { has_country_flag = ITA_missiolinis_rerolling_flag }
		}

		ITA_missiolinis_reroll_cost = yes

		hidden_effect = {
			#Revert mission initialization from immediate effect
			ITA_missiolinis_revert_new_mission_initialization_effect = yes

			#Revert other stuff in the immediate effect
			clr_country_flag = ITA_missiolini_stockpile_fuel_triggered_flag

			#Re-roll
			set_variable = { ITA_missiolini_reroll_from = 2 } #STOCKPILE FUEL
			country_event = { id = BBA_italy_missiolinis.00 hours = 20 }
		}
	}
}

# Stockpile Fuel - FAILURE 
country_event = {
	id = BBA_italy_missiolinis.62
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_missiolinis.62 FROM = [From.GetName]" }
	title = BBA_italy_missiolinis.62.t
	desc = BBA_italy_missiolinis.62.desc
	picture = GFX_report_event_tank_factory
	
	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			ITA_missiolinis_finalize_mission_effect = yes
			ITA_missiolinis_add_to_failed_missions = yes
		}
	}

	# Ooops
	option = { 
		name = BBA_italy_missiolinis.62.a
		
		ITA_missiolini_stockpile_fuel_failure_effect = yes		
	}
}

# Stockpile Fuel - SUCCESS 
country_event = {
	id = BBA_italy_missiolinis.63
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_missiolinis.63 FROM = [From.GetName]" }
	title = BBA_italy_missiolinis.63.t
	desc = BBA_italy_missiolinis.63.desc
	picture = GFX_report_event_tank_factory
	
	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			ITA_missiolinis_finalize_mission_effect = yes
			ITA_missiolinis_add_to_successful_missions = yes
		}
	}

	# Nice
	option = { 
		name = BBA_italy_missiolinis.63.a
		
		ITA_missiolini_stockpile_fuel_success_effect = yes
	}
}


### STRENGTHEN THE AIRFORCE ###
# Strengthen the Airforce - Missiolini
unit_leader_event = {
	id = BBA_italy_missiolinis.71
	title = BBA_italy_missiolinis.71.t
	desc = BBA_italy_missiolinis.71.desc
	picture = GFX_report_event_generic_mussolini
	
	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_cd_ready = yes #IF NO OTHER MISSIOLINI HAS BEEN ACTIVATED RECENTLY, GO AHEAD
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			ITA_missiolinis_initialize_new_mission_effect = yes
			set_country_flag = ITA_missiolini_strengthen_the_airforce_triggered_flag #Less probable to have this more than once
			#Establish goal - Figthers
			#log = "Fighters in stockpile = [?ROOT.num_equipment@small_plane_airframe]"
			set_variable = { ITA_missiolinis_fighters_goal = num_equipment@small_plane_airframe }
			#log = "Fighters deployed = [?ROOT.num_deployed_planes_with_type@small_plane_airframe]"
			add_to_variable = { ITA_missiolinis_fighters_goal = num_deployed_planes_with_type@small_plane_airframe }
			#log = "Total figthers in country = [?ROOT.ITA_missiolinis_fighters_goal]"
			
			#Add to goal - CV Figthers
			#log = "CV Fighters in stockpile = [?ROOT.num_equipment@cv_small_plane_airframe]"
			#add_to_variable = { ITA_missiolinis_fighters_goal = num_equipment@cv_small_plane_airframe }
			#log = "CV Fighters deployed = [?ROOT.num_deployed_planes_with_type@cv_small_plane_airframe]"
			#add_to_variable = { ITA_missiolinis_fighters_goal = num_deployed_planes_with_type@cv_small_plane_airframe }
			
			add_to_variable = { ITA_missiolinis_fighters_goal = ITA_missiolinis_fighters_to_produce }
			#log = "Total figthers to produce = [?ROOT.ITA_missiolinis_fighters_goal]"



			#Establish goal - Bombers (CAS)
			#log = "CAS in stockpile = [?ROOT.num_equipment@small_plane_cas_airframe]"
			set_variable = { ITA_missiolinis_cas_goal = num_equipment@small_plane_cas_airframe }
			#log = "CAS deployed = [?ROOT.num_deployed_planes_with_type@small_plane_cas_airframe]"
			add_to_variable = { ITA_missiolinis_cas_goal = num_deployed_planes_with_type@small_plane_cas_airframe }
			#Add to goal - Bombers (CV CAS)
			#log = "CV CAS in stockpile = [?ROOT.num_equipment@cv_small_plane_cas_airframe]"
			#add_to_variable = { ITA_missiolinis_cas_goal = num_equipment@cv_small_plane_cas_airframe }
			#log = "CV CAS deployed = [?ROOT.num_deployed_planes_with_type@cv_small_plane_cas_airframe]"
			#add_to_variable = { ITA_missiolinis_cas_goal = num_deployed_planes_with_type@cv_small_plane_cas_airframe }
			#log = "Total CAS in country = [?ROOT.ITA_missiolinis_cas_goal]"
			add_to_variable = { ITA_missiolinis_cas_goal = ITA_missiolinis_bombers_to_produce }
			#log = "Total CAS to produce = [?ROOT.ITA_missiolinis_cas_goal]"

			#Establish goal - Bombers (Nav)
			#log = "Naval Bombers in stockpile = [?ROOT.num_equipment@nav_bomber_equipment]"
			set_variable = { ITA_missiolinis_naval_bombers_goal = num_equipment@nav_bomber_equipment }
			#log = "Naval Bombers deployed = [?ROOT.num_deployed_planes_with_type@nav_bomber_equipment]"
			add_to_variable = { ITA_missiolinis_naval_bombers_goal = num_deployed_planes_with_type@nav_bomber_equipment }
			#Add to goal - Bombers (CV Nav)
			#log = "Naval Bombers in stockpile = [?ROOT.num_equipment@nav_bomber_equipment]"
			#add_to_variable = { ITA_missiolinis_naval_bombers_goal = num_equipment@nav_bomber_equipment }
			#log = "Naval Bombers deployed = [?ROOT.num_deployed_planes_with_type@nav_bomber_equipment]"
			#add_to_variable = { ITA_missiolinis_naval_bombers_goal = num_deployed_planes_with_type@nav_bomber_equipment }
			#log = "Total naval bombers in country = [?ROOT.ITA_missiolinis_naval_bombers_goal]"
			add_to_variable = { ITA_missiolinis_naval_bombers_goal = ITA_missiolinis_bombers_to_produce }
			#log = "Total naval bombers to produce = [?ROOT.ITA_missiolinis_naval_bombers_goal]"

			#Establish goal - Bombers (Tac)
			#log = "Tactical Bombers in stockpile = [?ROOT.num_equipment@tac_bomber_equipment]"
			set_variable = { ITA_missiolinis_tactical_bombers_goal = num_equipment@tac_bomber_equipment }
			#log = "Tactical Bombers deployed = [?ROOT.num_deployed_planes_with_type@tac_bomber_equipment]"
			add_to_variable = { ITA_missiolinis_tactical_bombers_goal = num_deployed_planes_with_type@tac_bomber_equipment }
			#log = "Total tactical bombers in country = [?ROOT.ITA_missiolinis_tactical_bombers_goal]"
			add_to_variable = { ITA_missiolinis_tactical_bombers_goal = ITA_missiolinis_bombers_to_produce }
			#log = "Total tactical bombers to produce = [?ROOT.ITA_missiolinis_tactical_bombers_goal]"
		}
	}

	# OK dude
	option = { 
		name = BBA_italy_missiolinis.71.a
		ai_chance = {
			base = 10
		}

		activate_mission = ITA_missiolini_strengthen_the_airforce

		ITA_mussolinis_reroll_cleanup_if_necessary = yes #To clear stuff if coming from a reroll
	}

	# Re-roll
	option = { 
		name = BBA_italy_missiolinis.council

		ai_chance = {
			base = 0
		}

		trigger = {
			has_completed_focus = ITA_boost_the_grand_council_of_fascism
			NOT = { has_country_flag = ITA_missiolinis_rerolling_flag }
		}

		ITA_missiolinis_reroll_cost = yes

		hidden_effect = {
			#Revert mission initialization from immediate effect
			ITA_missiolinis_revert_new_mission_initialization_effect = yes

			#Revert other stuff in the immediate effect
			clr_country_flag = ITA_missiolini_strengthen_the_airforce_triggered_flag
			set_variable = { ITA_missiolinis_fighters_goal = 0 }
			set_variable = { ITA_missiolinis_cas_goal = 0 }
			set_variable = { ITA_missiolinis_naval_bombers_goal = 0 }
			set_variable = { ITA_missiolinis_tactical_bombers_goal = 0 }


			#Re-roll
			set_variable = { ITA_missiolini_reroll_from = 3 } #STRENGTHEN THE AIRFORCE
			country_event = { id = BBA_italy_missiolinis.00 hours = 20 }
		}
	}
}

# Strengthen the Airforce - FAILURE 
country_event = {
	id = BBA_italy_missiolinis.72
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_missiolinis.72 FROM = [From.GetName]" }
	title = BBA_italy_missiolinis.72.t
	desc = BBA_italy_missiolinis.72.desc
	picture = GFX_report_event_fighters
	
	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			ITA_missiolinis_finalize_mission_effect = yes
			ITA_missiolinis_add_to_failed_missions = yes
		}
	}

	# Ooops
	option = { 
		name = BBA_italy_missiolinis.72.a
		
		ITA_missiolini_strengthen_the_airforce_failure_effect = yes		
	}
}

# Strengthen the Airforce - SUCCESS 
country_event = {
	id = BBA_italy_missiolinis.73
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_missiolinis.73 FROM = [From.GetName]" }
	title = BBA_italy_missiolinis.73.t
	desc = BBA_italy_missiolinis.73.desc
	picture = GFX_report_event_fighters
	
	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			ITA_missiolinis_finalize_mission_effect = yes
			ITA_missiolinis_add_to_successful_missions = yes
		}
	}

	# Nice
	option = { 
		name = BBA_italy_missiolinis.73.a
		
		ITA_missiolini_strengthen_the_airforce_success_effect = yes
	}
}


### INDUSTRIAL RESEARCH ###
# Industrial Research - Missiolini
unit_leader_event = {
	id = BBA_italy_missiolinis.81
	title = BBA_italy_missiolinis.81.t
	desc = BBA_italy_missiolinis.81.desc
	picture = GFX_report_event_generic_mussolini
	
	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_cd_ready = yes #IF NO OTHER MISSIOLINI HAS BEEN ACTIVATED RECENTLY, GO AHEAD
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			ITA_missiolinis_initialize_new_mission_effect = yes
			set_country_flag = ITA_missiolini_industrial_research_triggered_flag #Less probable to have this more than once

			if = {
				limit = {
					date > 1943.1.1
				}
				random_list = {
					30 = { #PORDUCTION BRANCH
						modifier = { #If tech is already researched then this makes no sense
							factor = 0
							OR = {
								has_tech = flexible_line
								has_tech = streamlined_line
								is_researching_technology = flexible_line
								is_researching_technology = streamlined_line
							}
						}
						modifier = { #If lagging behind, then it's more likely
							factor = 1.5
							NOT = { has_tech = assembly_line_production }
						}

						set_country_flag = { flag = ITA_missiolini_research_production_flag value = 3 }
					}
					20 = { #INDUSTRY BRANCH
						modifier = { #If tech is already researched then this makes no sense
							factor = 0
							OR = {
								has_tech = concentrated_industry5
								has_tech = dispersed_industry5
								is_researching_technology = concentrated_industry5
								is_researching_technology = dispersed_industry5
							}
						}
						modifier = { #If lagging behind, then it's more likely
							factor = 1.5
							NOT = { has_tech = concentrated_industry4 }
							NOT = { has_tech = dispersed_industry4 }
						}

						set_country_flag = { flag = ITA_missiolini_research_industry_flag value = 3 }
					}
					10 = { #CONSTRUCTION BRANCH
						modifier = { #If tech is already researched then this makes no sense
							factor = 0
							OR = {
								has_tech = construction5
								is_researching_technology = construction5
							}
						}
						modifier = { #If lagging behind, then it's more likely
							factor = 1.5
							NOT = { has_tech = construction4 }
						}

						set_country_flag = { flag = ITA_missiolini_research_construction_flag value = 3 }
					}
				}
			}
			else_if = {
				limit = {
					date > 1941.1.1
				}
				random_list = {
					30 = { #PORDUCTION BRANCH
						modifier = { #If tech is already researched then this makes no sense
							factor = 0
							OR = {
								has_tech = assembly_line_production
								is_researching_technology = assembly_line_production
							}
						}
						modifier = { #If lagging behind, then it's more likely
							factor = 1.5
							NOT = { has_tech = advanced_machine_tools }
						}

						set_country_flag = { flag = ITA_missiolini_research_production_flag value = 2 }
					}
					20 = { #INDUSTRY BRANCH
						modifier = { #If tech is already researched then this makes no sense
							factor = 0
							OR = {
								has_tech = concentrated_industry4
								has_tech = dispersed_industry4
								is_researching_technology = concentrated_industry4
								is_researching_technology = dispersed_industry4
							}
						}
						modifier = { #If lagging behind, then it's more likely
							factor = 1.5
							NOT = { has_tech = concentrated_industry3 }
							NOT = { has_tech = dispersed_industry3 }
						}

						set_country_flag = { flag = ITA_missiolini_research_industry_flag value = 2 }
					}
					10 = { #CONSTRUCTION BRANCH
						modifier = { #If tech is already researched then this makes no sense
							factor = 0
							OR = {
								has_tech = construction4
								is_researching_technology = construction4
							}
						}
						modifier = { #If lagging behind, then it's more likely
							factor = 1.5
							NOT = { has_tech = construction3 }
						}

						set_country_flag = { flag = ITA_missiolini_research_construction_flag value = 2 }
					}
				}
			}
			else = { #Safe to assume that it's date > 1939.1.1
				random_list = {
					30 = { #PORDUCTION BRANCH
						modifier = { #If tech is already researched then this makes no sense
							factor = 0
							OR = {
								has_tech = advanced_machine_tools
								is_researching_technology = advanced_machine_tools
							}
						}
						modifier = { #If lagging behind, then it's more likely
							factor = 1.5
							NOT = { has_tech = improved_machine_tools }
						}

						set_country_flag = { flag = ITA_missiolini_research_production_flag value = 1 }
					}
					20 = { #INDUSTRY BRANCH
						modifier = { #If tech is already researched then this makes no sense
							factor = 0
							OR = {
								has_tech = concentrated_industry3
								has_tech = dispersed_industry3
								is_researching_technology = concentrated_industry3
								is_researching_technology = dispersed_industry3
							}
						}
						modifier = { #If lagging behind, then it's more likely
							factor = 1.5
							NOT = { has_tech = concentrated_industry2 }
							NOT = { has_tech = dispersed_industry2 }
						}

						set_country_flag = { flag = ITA_missiolini_research_industry_flag value = 1 }
					}
					10 = { #CONSTRUCTION BRANCH
						modifier = { #If tech is already researched then this makes no sense
							factor = 0
							OR = {
								has_tech = construction3
								is_researching_technology = construction3
							}
						}
						modifier = { #If lagging behind, then it's more likely
							factor = 1.5
							NOT = { has_tech = construction2 }
						}

						set_country_flag = { flag = ITA_missiolini_research_construction_flag value = 1 }
					}
				}
			}
		}
	}

	# OK dude
	option = { 
		name = BBA_italy_missiolinis.81.a
		ai_chance = {
			base = 10
		}

		activate_mission = ITA_missiolini_industrial_research

		ITA_mussolinis_reroll_cleanup_if_necessary = yes #To clear stuff if coming from a reroll
	}

	# Re-roll
	option = { 
		name = BBA_italy_missiolinis.council

		ai_chance = {
			base = 0
		}

		trigger = {
			has_completed_focus = ITA_boost_the_grand_council_of_fascism
			NOT = { has_country_flag = ITA_missiolinis_rerolling_flag }
		}

		ITA_missiolinis_reroll_cost = yes

		hidden_effect = {
			#Revert mission initialization from immediate effect
			ITA_missiolinis_revert_new_mission_initialization_effect = yes

			#Revert other stuff in the immediate effect
			if = {
				limit = {
					has_country_flag = ITA_missiolini_research_production_flag
				}
				clr_country_flag = ITA_missiolini_research_production_flag
			}
			if = {
				limit = {
					has_country_flag = ITA_missiolini_research_industry_flag
				}
				clr_country_flag = ITA_missiolini_research_industry_flag
			}
			if = {
				limit = {
					has_country_flag = ITA_missiolini_research_construction_flag
				}
				clr_country_flag = ITA_missiolini_research_construction_flag
			}

			#Re-roll
			set_variable = { ITA_missiolini_reroll_from = 4 } #INDUSTRIAL RESEARCH
			country_event = { id = BBA_italy_missiolinis.00 hours = 20 }
		}
	}
}

# Industrial Research - FAILURE 
country_event = {
	id = BBA_italy_missiolinis.82
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_missiolinis.82 FROM = [From.GetName]" }
	title = BBA_italy_missiolinis.82.t
	desc = BBA_italy_missiolinis.82.desc
	picture = GFX_report_event_generic_research_lab
	
	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			ITA_missiolinis_finalize_mission_effect = yes
			ITA_missiolinis_add_to_failed_missions = yes
		}
	}

	# Ooops
	option = { 
		name = BBA_italy_missiolinis.82.a
		
		ITA_missiolini_industrial_research_failure_effect = yes		
	}
}

# Industrial Research - SUCCESS 
country_event = {
	id = BBA_italy_missiolinis.83
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_missiolinis.83 FROM = [From.GetName]" }
	title = BBA_italy_missiolinis.83.t
	desc = BBA_italy_missiolinis.83.desc
	picture = GFX_report_event_generic_research_lab
	
	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			ITA_missiolinis_finalize_mission_effect = yes
			ITA_missiolinis_add_to_successful_missions = yes
		}
	}

	# Nice
	option = { 
		name = BBA_italy_missiolinis.83.a
		
		ITA_missiolini_industrial_research_success_effect = yes
	}
}



### EXPAND INTELLIGENCE SERVICE ###
# Expand Intelligence Service - Missiolini
unit_leader_event = {
	id = BBA_italy_missiolinis.91
	title = BBA_italy_missiolinis.91.t
	desc = BBA_italy_missiolinis.91.desc
	picture = GFX_report_event_generic_mussolini
	
	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_cd_ready = yes #IF NO OTHER MISSIOLINI HAS BEEN ACTIVATED RECENTLY, GO AHEAD
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			ITA_missiolinis_initialize_new_mission_effect = yes
			set_country_flag = ITA_missiolini_expand_intelligence_service_triggered_flag #Less probable to have this more than once

			if = { #Create Intelligence Agency
				limit = {
					has_intelligence_agency = no 
				}
				set_country_flag = { flag = ITA_missiolini_upgrade_agency_goal_flag value = 1 }
			}
			else = { #Upgrade Intelligence Agency
				random_list = {
					30 = { #Form Cryptology Department
						modifier = {
							factor = 0
							has_done_agency_upgrade = upgrade_form_department
						}

						set_country_flag = { flag = ITA_missiolini_upgrade_agency_goal_flag value = 2 }
					}
					20 = { #Army Department
						modifier = {
							factor = 0
							has_done_agency_upgrade = upgrade_army_department
						}

						set_country_flag = { flag = ITA_missiolini_upgrade_agency_goal_flag value = 3 }
					}
					10 = { #Anti-Partisan
						modifier = {
							factor = 0
							OR = {
								has_done_agency_upgrade = upgrade_anti_partisan
								NOT = {
									any_controlled_state = {
										has_resistance = yes
									}
								}
							}
						}
						modifier = {
							factor = 5
							any_controlled_state = {
								resistance > 50
							}
						}

						set_country_flag = { flag = ITA_missiolini_upgrade_agency_goal_flag value = 4 }
					}
					0 = { #Passive Defense
						modifier = {
							factor = 0
							has_done_agency_upgrade = upgrade_passive_defense
						}
						modifier = {
							add = 1
							has_done_agency_upgrade = upgrade_form_department
							has_done_agency_upgrade = upgrade_army_department
							OR = {
								has_done_agency_upgrade = upgrade_anti_partisan
								NOT = {
									any_controlled_state = {
										has_resistance = yes
									}
								}
							}
						}

						set_country_flag = { flag = ITA_missiolini_upgrade_agency_goal_flag value = 5 }
					}
				}
			}
		}
	}

	# OK dude
	option = { 
		name = BBA_italy_missiolinis.91.a
		ai_chance = {
			base = 10
		}

		activate_mission = ITA_missiolini_expand_intelligence_agency

		ITA_mussolinis_reroll_cleanup_if_necessary = yes #To clear stuff if coming from a reroll
	}

	# Re-roll
	option = { 
		name = BBA_italy_missiolinis.council

		ai_chance = {
			base = 0
		}

		trigger = {
			has_completed_focus = ITA_boost_the_grand_council_of_fascism
			NOT = { has_country_flag = ITA_missiolinis_rerolling_flag }
		}

		ITA_missiolinis_reroll_cost = yes

		hidden_effect = {
			#Revert mission initialization from immediate effect
			ITA_missiolinis_revert_new_mission_initialization_effect = yes

			#Revert other stuff in the immediate effect
			clr_country_flag = ITA_missiolini_expand_intelligence_service_triggered_flag
			clr_country_flag = ITA_missiolini_upgrade_agency_goal_flag

			#Re-roll
			set_variable = { ITA_missiolini_reroll_from = 5 } #EXPAND INTELLIGENCE SERVICE
			country_event = { id = BBA_italy_missiolinis.00 hours = 20 }
		}
	}
}

# Expand Intelligence Service - FAILURE 
country_event = {
	id = BBA_italy_missiolinis.92
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_missiolinis.92 FROM = [From.GetName]" }
	title = BBA_italy_missiolinis.92.t
	desc = BBA_italy_missiolinis.92.desc
	picture = GFX_report_event_hitler_handshake
	
	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			ITA_missiolinis_finalize_mission_effect = yes
			ITA_missiolinis_add_to_failed_missions = yes
		}
	}

	# Ooops
	option = { 
		name = BBA_italy_missiolinis.92.a
		
		ITA_missiolini_expand_intelligence_service_failure_effect = yes		
	}
}

# Expand Intelligence Service - SUCCESS 
country_event = {
	id = BBA_italy_missiolinis.93
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_missiolinis.93 FROM = [From.GetName]" }
	title = BBA_italy_missiolinis.93.t
	desc = BBA_italy_missiolinis.93.desc
	picture = GFX_report_event_hitler_handshake
	
	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			ITA_missiolinis_finalize_mission_effect = yes
			ITA_missiolinis_add_to_successful_missions = yes
		}
	}

	# Nice
	option = { 
		name = BBA_italy_missiolinis.93.a
		
		ITA_missiolini_expand_intelligence_service_success_effect = yes
	}
}



### OCCUPY ALBANIA ###
# Occupy Albania - Missiolini
unit_leader_event = {
	id = BBA_italy_missiolinis.101
	title = BBA_italy_missiolinis.101.t
	desc = BBA_italy_missiolinis.101.desc
	picture = GFX_report_event_generic_mussolini
	
	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_cd_ready = yes #IF NO OTHER MISSIOLINI HAS BEEN ACTIVATED RECENTLY, GO AHEAD
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			ITA_missiolinis_initialize_new_mission_effect = yes
			set_country_flag = ITA_missiolini_occupy_albania_triggered_flag #Trigger only once
		}
	}

	# OK dude
	option = { 
		name = BBA_italy_missiolinis.101.a
		ai_chance = {
			base = 10
		}

		activate_mission = ITA_missiolini_occupy_albania

		ITA_mussolinis_reroll_cleanup_if_necessary = yes #To clear stuff if coming from a reroll
	}
}

# Occupy Albania - FAILURE 
country_event = {
	id = BBA_italy_missiolinis.102
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_missiolinis.102 FROM = [From.GetName]" }
	title = BBA_italy_missiolinis.102.t
	desc = BBA_italy_missiolinis.102.desc
	picture = GFX_report_event_soldiers_marching
	
	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			ITA_missiolinis_finalize_mission_effect = yes
			ITA_missiolinis_add_to_failed_missions = yes
		}
	}

	# Ooops
	option = { 
		name = BBA_italy_missiolinis.102.a
		
		ITA_missiolini_occupy_albania_failure_effect = yes		
	}
}

# Occupy Albania - SUCCESS 
country_event = {
	id = BBA_italy_missiolinis.103
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_missiolinis.103 FROM = [From.GetName]" }
	title = BBA_italy_missiolinis.103.t
	desc = BBA_italy_missiolinis.103.desc
	picture = GFX_report_event_soldiers_marching
	
	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			ITA_missiolinis_finalize_mission_effect = yes
			ITA_missiolinis_add_to_successful_missions = yes
		}
	}

	# Nice
	option = { 
		name = BBA_italy_missiolinis.103.a
		
		ITA_missiolini_occupy_albania_success_effect = yes
	}
}


### OCCUPY DALMATIA ###
# Occupy Dalmatia - Missiolini
unit_leader_event = {
	id = BBA_italy_missiolinis.111
	title = BBA_italy_missiolinis.111.t
	desc = BBA_italy_missiolinis.111.desc
	picture = GFX_report_event_generic_mussolini
	
	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_cd_ready = yes #IF NO OTHER MISSIOLINI HAS BEEN ACTIVATED RECENTLY, GO AHEAD
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			ITA_missiolinis_initialize_new_mission_effect = yes
			set_country_flag = ITA_missiolini_occupy_dalmatia_triggered_flag #Trigger only once
		}
	}

	# OK dude
	option = { 
		name = BBA_italy_missiolinis.111.a
		ai_chance = {
			base = 10
		}

		activate_mission = ITA_missiolini_occupy_dalmatia

		ITA_mussolinis_reroll_cleanup_if_necessary = yes #To clear stuff if coming from a reroll
	}
}

# Occupy Dalmatia - FAILURE 
country_event = {
	id = BBA_italy_missiolinis.112
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_missiolinis.112 FROM = [From.GetName]" }
	title = BBA_italy_missiolinis.112.t
	desc = BBA_italy_missiolinis.112.desc
	picture = GFX_report_event_soldiers_marching
	
	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			ITA_missiolinis_finalize_mission_effect = yes
			ITA_missiolinis_add_to_failed_missions = yes
		}
	}

	# Ooops
	option = { 
		name = BBA_italy_missiolinis.112.a
		
		ITA_missiolini_occupy_dalmatia_failure_effect = yes		
	}
}

# Occupy Dalmatia - SUCCESS 
country_event = {
	id = BBA_italy_missiolinis.113
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_missiolinis.113 FROM = [From.GetName]" }
	title = BBA_italy_missiolinis.113.t
	desc = BBA_italy_missiolinis.113.desc
	picture = GFX_report_event_soldiers_marching
	
	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			ITA_missiolinis_finalize_mission_effect = yes
			ITA_missiolinis_add_to_successful_missions = yes
		}
	}

	# Nice
	option = { 
		name = BBA_italy_missiolinis.113.a
		
		ITA_missiolini_occupy_dalmatia_success_effect = yes
	}
}


### OCCUPY GREECE ###
# Occupy Greece - Missiolini
unit_leader_event = {
	id = BBA_italy_missiolinis.121
	title = BBA_italy_missiolinis.121.t
	desc = BBA_italy_missiolinis.121.desc
	picture = GFX_report_event_generic_mussolini
	
	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_cd_ready = yes #IF NO OTHER MISSIOLINI HAS BEEN ACTIVATED RECENTLY, GO AHEAD
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			ITA_missiolinis_initialize_new_mission_effect = yes
			set_country_flag = ITA_missiolini_occupy_greece_triggered_flag #Trigger only once
		}
	}

	# OK dude
	option = { 
		name = BBA_italy_missiolinis.121.a
		ai_chance = {
			base = 10
		}

		activate_mission = ITA_missiolini_occupy_greece

		ITA_mussolinis_reroll_cleanup_if_necessary = yes #To clear stuff if coming from a reroll
	}
}

# Occupy Greece - FAILURE 
country_event = {
	id = BBA_italy_missiolinis.122
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_missiolinis.122 FROM = [From.GetName]" }
	title = BBA_italy_missiolinis.122.t
	desc = BBA_italy_missiolinis.122.desc
	picture = GFX_report_event_soldiers_marching
	
	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			ITA_missiolinis_finalize_mission_effect = yes
			ITA_missiolinis_add_to_failed_missions = yes
		}
	}

	# Ooops
	option = { 
		name = BBA_italy_missiolinis.122.a
		
		ITA_missiolini_occupy_greece_failure_effect = yes		
	}
}

# Occupy Greece - SUCCESS 
country_event = {
	id = BBA_italy_missiolinis.123
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_missiolinis.123 FROM = [From.GetName]" }
	title = BBA_italy_missiolinis.123.t
	desc = BBA_italy_missiolinis.123.desc
	picture = GFX_report_event_soldiers_marching
	
	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			ITA_missiolinis_finalize_mission_effect = yes
			ITA_missiolinis_add_to_successful_missions = yes
		}
	}

	# Nice
	option = { 
		name = BBA_italy_missiolinis.123.a
		
		ITA_missiolini_occupy_greece_success_effect = yes
	}
}


### OCCUPY TICINO ###
# Occupy Ticino - Missiolini
unit_leader_event = {
	id = BBA_italy_missiolinis.131
	title = BBA_italy_missiolinis.131.t
	desc = BBA_italy_missiolinis.131.desc
	picture = GFX_report_event_generic_mussolini
	
	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_cd_ready = yes #IF NO OTHER MISSIOLINI HAS BEEN ACTIVATED RECENTLY, GO AHEAD
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			ITA_missiolinis_initialize_new_mission_effect = yes
			set_country_flag = ITA_missiolini_occupy_ticino_triggered_flag #Trigger only once
		}
	}

	# OK dude
	option = { 
		name = BBA_italy_missiolinis.131.a
		ai_chance = {
			base = 10
		}

		activate_mission = ITA_missiolini_occupy_ticino

		ITA_mussolinis_reroll_cleanup_if_necessary = yes #To clear stuff if coming from a reroll
	}
}

# Occupy Ticino - FAILURE 
country_event = {
	id = BBA_italy_missiolinis.132
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_missiolinis.132 FROM = [From.GetName]" }
	title = BBA_italy_missiolinis.132.t
	desc = BBA_italy_missiolinis.132.desc
	picture = GFX_report_event_soldiers_marching
	
	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			ITA_missiolinis_finalize_mission_effect = yes
			ITA_missiolinis_add_to_failed_missions = yes
		}
	}

	# Ooops
	option = { 
		name = BBA_italy_missiolinis.132.a
		
		ITA_missiolini_occupy_ticino_failure_effect = yes		
	}
}

# Occupy Ticino - SUCCESS 
country_event = {
	id = BBA_italy_missiolinis.133
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_missiolinis.133 FROM = [From.GetName]" }
	title = BBA_italy_missiolinis.133.t
	desc = BBA_italy_missiolinis.133.desc
	picture = GFX_report_event_soldiers_marching
	
	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			ITA_missiolinis_finalize_mission_effect = yes
			ITA_missiolinis_add_to_successful_missions = yes
		}
	}

	# Nice
	option = { 
		name = BBA_italy_missiolinis.133.a
		
		ITA_missiolini_occupy_ticino_success_effect = yes
	}
}

### BOLSTER POLITICAL CABINET ###
# Bolster Political Cabinet - Missiolini
unit_leader_event = {
	id = BBA_italy_missiolinis.201
	title = BBA_italy_missiolinis.201.t
	desc = BBA_italy_missiolinis.201.desc
	picture = GFX_report_event_generic_mussolini
	
	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_cd_ready = yes #IF NO OTHER MISSIOLINI HAS BEEN ACTIVATED RECENTLY, GO AHEAD
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			ITA_missiolinis_initialize_new_mission_effect = yes
			set_country_flag = ITA_missiolini_bolster_political_cabinet_triggered_flag #Trigger only once
		}
	}

	# OK dude
	option = { 
		name = BBA_italy_missiolinis.201.a
		ai_chance = {
			base = 10
		}

		activate_mission = ITA_missiolini_bolster_political_cabinet

		ITA_mussolinis_reroll_cleanup_if_necessary = yes #To clear stuff if coming from a reroll
	}

	# Re-roll
	option = { 
		name = BBA_italy_missiolinis.council

		ai_chance = {
			base = 0
		}

		trigger = {
			has_completed_focus = ITA_boost_the_grand_council_of_fascism
			NOT = { has_country_flag = ITA_missiolinis_rerolling_flag }
		}

		ITA_missiolinis_reroll_cost = yes

		hidden_effect = {
			#Revert mission initialization from immediate effect
			ITA_missiolinis_revert_new_mission_initialization_effect = yes

			#Revert other stuff in the immediate effect
			clr_country_flag = ITA_missiolini_bolster_political_cabinet_triggered_flag

			#Re-roll
			set_variable = { ITA_missiolini_reroll_from = 6 } #BOLSTER POLITICAL CABINET
			country_event = { id = BBA_italy_missiolinis.00 hours = 20 }
		}
	}
}

# Bolster Political Cabinet - FAILURE 
country_event = {
	id = BBA_italy_missiolinis.202
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_missiolinis.202 FROM = [From.GetName]" }
	title = BBA_italy_missiolinis.202.t
	desc = BBA_italy_missiolinis.202.desc
	picture = GFX_report_event_ITA_grand_council
	
	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			ITA_missiolinis_finalize_mission_effect = yes
			ITA_missiolinis_add_to_failed_missions = yes
		}
	}

	# Ooops
	option = { 
		name = BBA_italy_missiolinis.202.a
		
		ITA_missiolini_bolster_political_cabinet_failure_effect = yes		
	}
}

# Bolster Political Cabinet - SUCCESS 
country_event = {
	id = BBA_italy_missiolinis.203
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_missiolinis.203 FROM = [From.GetName]" }
	title = BBA_italy_missiolinis.203.t
	desc = BBA_italy_missiolinis.203.desc
	picture = GFX_report_event_ITA_grand_council
	
	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			ITA_missiolinis_finalize_mission_effect = yes
			ITA_missiolinis_add_to_successful_missions = yes
		}
	}

	# Nice
	option = { 
		name = BBA_italy_missiolinis.203.a
		
		ITA_missiolini_bolster_political_cabinet_success_effect = yes
	}
}


### BOLSTER MILITARY HIGH COMMAND ###
# Bolster Military High Command- Missiolini
unit_leader_event = {
	id = BBA_italy_missiolinis.211
	title = BBA_italy_missiolinis.211.t
	desc = BBA_italy_missiolinis.211.desc
	picture = GFX_report_event_generic_mussolini
	
	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_cd_ready = yes #IF NO OTHER MISSIOLINI HAS BEEN ACTIVATED RECENTLY, GO AHEAD
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			ITA_missiolinis_initialize_new_mission_effect = yes
			set_country_flag = ITA_missiolini_bolster_military_high_command_triggered_flag #Trigger only once
		}
	}

	# OK dude
	option = { 
		name = BBA_italy_missiolinis.211.a
		ai_chance = {
			base = 10
		}

		activate_mission = ITA_missiolini_bolster_military_high_command

		ITA_mussolinis_reroll_cleanup_if_necessary = yes #To clear stuff if coming from a reroll
	}

	# Re-roll
	option = { 
		name = BBA_italy_missiolinis.council

		ai_chance = {
			base = 0
		}

		trigger = {
			has_completed_focus = ITA_boost_the_grand_council_of_fascism
			NOT = { has_country_flag = ITA_missiolinis_rerolling_flag }
		}

		ITA_missiolinis_reroll_cost = yes

		hidden_effect = {
		#Revert mission initialization from immediate effect
			ITA_missiolinis_revert_new_mission_initialization_effect = yes

			#Revert other stuff in the immediate effect
			clr_country_flag = ITA_missiolini_bolster_military_high_command_triggered_flag

			#Re-roll
			set_variable = { ITA_missiolini_reroll_from = 7 } #BOLSTER MILITARY CABINET
			country_event = { id = BBA_italy_missiolinis.00 hours = 20 }
		}
	}
}

# Bolster Military High Command- FAILURE 
country_event = {
	id = BBA_italy_missiolinis.212
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_missiolinis.212 FROM = [From.GetName]" }
	title = BBA_italy_missiolinis.212.t
	desc = BBA_italy_missiolinis.212.desc
	picture = GFX_report_event_military_planning
	
	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			ITA_missiolinis_finalize_mission_effect = yes
			ITA_missiolinis_add_to_failed_missions = yes
		}
	}

	# Ooops
	option = { 
		name = BBA_italy_missiolinis.212.a

		ITA_missiolini_bolster_military_high_command_failure_effect = yes		
	}
}

# Bolster Military High Command- SUCCESS 
country_event = {
	id = BBA_italy_missiolinis.213
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_missiolinis.213 FROM = [From.GetName]" }
	title = BBA_italy_missiolinis.213.t
	desc = BBA_italy_missiolinis.213.desc
	picture = GFX_report_event_military_planning
	
	is_triggered_only = yes

	trigger = {
		ITA_missiolinis_system_available = yes
	}

	immediate = {
		hidden_effect = {
			ITA_missiolinis_finalize_mission_effect = yes
			ITA_missiolinis_add_to_successful_missions = yes
		}
	}

	# Nice
	option = { 
		name = BBA_italy_missiolinis.213.a
		
		ITA_missiolini_bolster_military_high_command_success_effect = yes
	}
}



##        #######   ######     ###    ##          ########  ##     ## ##       ######## ########   ######  
##       ##     ## ##    ##   ## ##   ##          ##     ## ##     ## ##       ##       ##     ## ##    ## 
##       ##     ## ##        ##   ##  ##          ##     ## ##     ## ##       ##       ##     ## ##       
##       ##     ## ##       ##     ## ##          ########  ##     ## ##       ######   ########   ######  
##       ##     ## ##       ######### ##          ##   ##   ##     ## ##       ##       ##   ##         ## 
##       ##     ## ##    ## ##     ## ##          ##    ##  ##     ## ##       ##       ##    ##  ##    ## 
########  #######   ######  ##     ## ########    ##     ##  #######  ######## ######## ##     ##  ######  


# Local Rulers Approach Italian Officials - Haile Selassie Gugsa (Addis Ababa) - event for ITA
unit_leader_event = {
	id = BBA_italy_local_rulers.1
	title = BBA_italy_local_rulers.1.t
	desc = BBA_italy_local_rulers.1.desc
	picture = GFX_report_event_mussolini_hotel
	
	is_triggered_only = yes

	# Concessions
	option = { 
		name = BBA_italy_local_rulers.1.a
		ai_chance = {
			base = 10
			
		}

		#Send next event
	}

	# Puppet
	option = { 
		name = BBA_italy_local_rulers.1.b
		ai_chance = {
			base = 0
		}
	}

	# NO TO ALL
	option = { 
		name = BBA_italy_local_rulers.1.d
		ai_chance = {
			base = 0
		}
	}
}

# Local Rulers Approach Italian Officials - Abba Jofir (Illubabor-Kaffa) - event for ITA
unit_leader_event = {
	id = BBA_italy_local_rulers.2
	title = BBA_italy_local_rulers.2.t
	desc = BBA_italy_local_rulers.2.desc
	picture = GFX_report_event_mussolini_hotel
	
	is_triggered_only = yes

	# Concessions
	option = { 
		name = BBA_italy_local_rulers.2.a
		ai_chance = {
			base = 10
			
		}
	}

	# Puppet
	option = { 
		name = BBA_italy_local_rulers.2.b
		ai_chance = {
			base = 0
		}
	}

	# Nej tack
	option = { 
		name = BBA_italy_local_rulers.2.c
		ai_chance = {
			base = 10
		}
	}

	# NO TO ALL
	option = { 
		name = BBA_italy_local_rulers.2.d
		ai_chance = {
			base = 0
		}
		
	}
}






   ###    #### ########        ###     ######   ######  #### ########  ######## ##    ## ########  ######  
  ## ##    ##  ##     ##      ## ##   ##    ## ##    ##  ##  ##     ## ##       ###   ##    ##    ##    ## 
 ##   ##   ##  ##     ##     ##   ##  ##       ##        ##  ##     ## ##       ####  ##    ##    ##       
##     ##  ##  ########     ##     ## ##       ##        ##  ##     ## ######   ## ## ##    ##     ######  
#########  ##  ##   ##      ######### ##       ##        ##  ##     ## ##       ##  ####    ##          ## 
##     ##  ##  ##    ##     ##     ## ##    ## ##    ##  ##  ##     ## ##       ##   ###    ##    ##    ## 
##     ## #### ##     ##    ##     ##  ######   ######  #### ########  ######## ##    ##    ##     ######  




# Balbo Accident - Event Dispatcher
country_event = {
	id = BBA_italy_air_accident.10
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_air_accident.10 FROM = [From.GetName]" }

	hidden = yes

	fire_only_once = yes

	trigger = {
		original_tag = ITA
		#date > 1940.01.01
		NOT = {
			has_completed_focus = ITA_italo_balbo_focus
			focus_progress = {
				focus = ITA_italo_balbo_focus
				progress > 0
			}
		}
		any_enemy_country = {
			is_major = yes
		}
	}

	mean_time_to_happen = {
		days = 180
		modifier = {
			factor = 0.5
			date > 1940.06.01
			any_controlled_state = {
				is_core_of = LBA
				any_neighbor_state = {
					controller = { has_war_with = ROOT }
				}
			}
		}
	}

	immediate = {
		random_list = {
			10 = { # Balbo dies - Historical
				modifier = {
					factor = 10
					is_historical_focus_on = yes
				}
				modifier = {
					factor = 0.5
					has_completed_focus = ITA_expand_rome_flying_school
				}
				modifier = {
					factor = 0.1
					has_completed_focus = ITA_officers_of_the_service_role
				}
				modifier = {
					factor = 0
					is_historical_focus_on = no
					has_completed_focus = ITA_officers_of_the_service_role
				}
				country_event = { id = BBA_italy_air_accident.01 hours = 16 random_hours = 8}
			}
			10 = { # Tellera dies
				modifier = {
					factor = 10
					is_historical_focus_on = yes
				}
				modifier = {
					factor = 0.5
					has_completed_focus = ITA_expand_rome_flying_school
				}
				modifier = {
					factor = 0.2
					has_completed_focus = ITA_officers_of_the_service_role
				}
				modifier = {
					factor = 0
					is_historical_focus_on = no
					has_completed_focus = ITA_officers_of_the_service_role
				}
				country_event = { id = BBA_italy_air_accident.02 hours = 16 random_hours = 8}
			}
			10 = { # No one dies
				modifier = {
					factor = 5
					has_completed_focus = ITA_expand_rome_flying_school
				}
				country_event = { id = BBA_italy_air_accident.03 hours = 16 random_hours = 8}
			}
		}
	}
}

# Balbo Accident - Balbo dies
country_event = {
	id = BBA_italy_air_accident.01
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_air_accident.01 FROM = [From.GetName]" }
	title = BBA_italy_air_accident.01.t
	desc = BBA_italy_air_accident.01.desc
	picture = GFX_report_event_ITA_air_crash
	
	is_triggered_only = yes

	fire_only_once = yes

	immediate = {
		hidden_effect = {
			set_country_flag = ITA_balbo_accident_flag
		}
	}

	trigger = {
		has_character = ITA_italo_balbo
		NOT = { has_completed_focus = ITA_italo_balbo_focus }
	}

	# Sayonara Balbo
	option = { 
		name = BBA_italy_air_accident.01.a

		retire_character = ITA_italo_balbo
		
		if = {
			limit = {
				has_character = ITA_giuseppe_tellera
			}
			ITA_giuseppe_tellera = {
				add_unit_leader_trait = trait_cautious
			}
		}
	}
}

# Balbo Accident - Tellera dies (instead of Balbo)
country_event = {
	id = BBA_italy_air_accident.02
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_air_accident.02 FROM = [From.GetName]" }
	title = BBA_italy_air_accident.02.t
	desc = BBA_italy_air_accident.02.desc
	picture = GFX_report_event_ITA_air_crash
	
	is_triggered_only = yes

	fire_only_once = yes

	immediate = {
		hidden_effect = {
			set_country_flag = ITA_balbo_accident_flag
		}
	}

	trigger = {
		has_character = ITA_giuseppe_tellera
		has_character = ITA_italo_balbo
	}

	# Sayonara Tellera
	option = { 
		name = BBA_italy_air_accident.02.a

		retire_character = ITA_giuseppe_tellera

		ITA_italo_balbo = {
			add_trait = { trait = harsh_leader }
		}
	}
}

# Balbo Accident - No one dies - Everyone is happy
country_event = {
	id = BBA_italy_air_accident.03
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_air_accident.03 FROM = [From.GetName]" }
	title = BBA_italy_air_accident.03.t
	desc = BBA_italy_air_accident.03.desc
	picture = GFX_report_event_generic_bombers
	
	is_triggered_only = yes

	fire_only_once = yes

	immediate = {
		hidden_effect = {
			set_country_flag = ITA_balbo_accident_flag
		}
	}

	trigger = {
		has_character = ITA_italo_balbo
	}

	# Lucky bois
	option = { 
		name = BBA_italy_air_accident.03.a

		ITA_italo_balbo = {
			add_trait = { trait = inspirational_leader }
		}
	}
}

# Pintor & Pellegrini Accident - Event Dispatcher
country_event = {
	id = BBA_italy_air_accident.00
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_air_accident.00 FROM = [From.GetName]" }

	hidden = yes

	fire_only_once = yes

	trigger = {
		original_tag = ITA
		#date > 1940.01.01
		any_controlled_state = {
			is_core_of = FRA
		}
	}

	mean_time_to_happen = {
		days = 180
		modifier = {
			factor = 0.5
			date > 1940.07.01
		}
	}

	immediate = {
		random_list = {
			10 = { # Pintor & Pellegrini die - Historical
				modifier = {
					factor = 10
					is_historical_focus_on = yes
				}
				modifier = {
					factor = 0.5
					has_completed_focus = ITA_expand_rome_flying_school
				}
				modifier = {
					factor = 0.1
					has_completed_focus = ITA_officers_of_the_service_role
				}
				modifier = {
					factor = 0
					is_historical_focus_on = no
					has_completed_focus = ITA_officers_of_the_service_role
				}
				country_event = { id = BBA_italy_air_accident.11 hours = 16 random_hours = 8}
			}
			10 = { # No one dies
				modifier = {
					factor = 5
					has_completed_focus = ITA_expand_rome_flying_school
				}
				country_event = { id = BBA_italy_air_accident.12 hours = 16 random_hours = 8}
			}
		}
	}
}

# Pintor & Pellegrini Accident - Both die
country_event = {
	id = BBA_italy_air_accident.11
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_air_accident.11 FROM = [From.GetName]" }
	title = BBA_italy_air_accident.11.t
	desc = BBA_italy_air_accident.11.desc
	picture = GFX_report_event_ITA_air_crash
	
	is_triggered_only = yes

	fire_only_once = yes

	immediate = {
		hidden_effect = {
			set_country_flag = ITA_pintor_pellegrini_accident_flag
		}
	}

	trigger = {
		OR = {
			has_character = ITA_pietro_pintor
			has_character = ITA_aldo_pellegrini
		}
	}

	# Sayonara
	option = { 
		name = BBA_italy_air_accident.11.a

		if = {
			limit = {
				has_Character = ITA_pietro_pintor
			}
			retire_character = ITA_pietro_pintor
		}
		if = {
			limit = {
				has_Character = ITA_aldo_pellegrini
			}
			retire_character = ITA_aldo_pellegrini
		}		
	}
}

# Pintor & Pellegrini Accident - No one dies - Everyone is happy
country_event = {
	id = BBA_italy_air_accident.12
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_air_accident.12 FROM = [From.GetName]" }
	title = BBA_italy_air_accident.12.t
	desc = BBA_italy_air_accident.12.desc
	picture = GFX_report_event_generic_bombers
	
	is_triggered_only = yes

	fire_only_once = yes

	immediate = {
		hidden_effect = {
			set_country_flag = ITA_pintor_pellegrini_accident_flag
		}
	}

	trigger = {
		OR = {
			has_character = ITA_pietro_pintor
			has_character = ITA_aldo_pellegrini
		}
	}

	# Lucky bois
	option = { 
		name = BBA_italy_air_accident.12.a

		if = { #Upgrade trait
			limit = {	
				has_character = ITA_aldo_pellegrini
			}
			ITA_aldo_pellegrini = {
				custom_effect_tooltip = ITA_pellegrini_promotion_tt
			}
			hidden_effect = {
				ITA_aldo_pellegrini = {
					remove_trait = {
						trait = air_chief_ground_support_1
						slot = air_chief
					}

					add_trait = {
						trait = air_chief_ground_support_2
						slot = air_chief
					}
				}
			}
		}
	}
}



	 ######   #######   #######  ########  ######## ########     ###    ######## ####  #######  ##    ##    ########  ########   #######   ######   ########     ###    ##     ##  ######  
	##    ## ##     ## ##     ## ##     ## ##       ##     ##   ## ##      ##     ##  ##     ## ###   ##    ##     ## ##     ## ##     ## ##    ##  ##     ##   ## ##   ###   ### ##    ## 
	##       ##     ## ##     ## ##     ## ##       ##     ##  ##   ##     ##     ##  ##     ## ####  ##    ##     ## ##     ## ##     ## ##        ##     ##  ##   ##  #### #### ##       
	##       ##     ## ##     ## ########  ######   ########  ##     ##    ##     ##  ##     ## ## ## ##    ########  ########  ##     ## ##   #### ########  ##     ## ## ### ##  ######  
	##       ##     ## ##     ## ##        ##       ##   ##   #########    ##     ##  ##     ## ##  ####    ##        ##   ##   ##     ## ##    ##  ##   ##   ######### ##     ##       ## 
	##    ## ##     ## ##     ## ##        ##       ##    ##  ##     ##    ##     ##  ##     ## ##   ###    ##        ##    ##  ##     ## ##    ##  ##    ##  ##     ## ##     ## ##    ## 
	 ######   #######   #######  ##        ######## ##     ## ##     ##    ##    ####  #######  ##    ##    ##        ##     ##  #######   ######   ##     ## ##     ## ##     ##  ######  


# Offer to join the Naval Cooperation Program - Event for allies
country_event = {
	id = BBA_italy_naval_cooperation_programs.01
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_naval_cooperation_programs.01 FROM = [From.GetName]" }
	title = BBA_italy_naval_cooperation_programs.01.t
	desc = BBA_italy_naval_cooperation_programs.01.desc
	picture = GFX_report_event_ast_navy
	
	is_triggered_only = yes

	# Accept
	option = { 
		name = BBA_italy_naval_cooperation_programs.01.a
		ai_chance = {
			base = 10
		}

		add_to_tech_sharing_group = ITA_naval_cooperation_program_research_group
		FROM = { add_to_tech_sharing_group = ITA_naval_cooperation_program_research_group }
		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_naval_cooperation_programs.02 hours = 1 } }
		}
	}

	# Refuse
	option = {
		name = BBA_italy_naval_cooperation_programs.01.b
		ai_chance = {
			base = 0 #AI always says 'yes'
		}

		FROM = {
			add_opinion_modifier = {
				target = ROOT
				modifier = BUL_rejected_our_proposal
			}
		}
		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_naval_cooperation_programs.03 hours = 1 } }
		}
	}
}

# Country joins the Naval Cooperation Program - Event for ITA
country_event = {
	id = BBA_italy_naval_cooperation_programs.02
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_naval_cooperation_programs.02 FROM = [From.GetName]" }
	title = BBA_italy_naval_cooperation_programs.02.t
	desc = BBA_italy_naval_cooperation_programs.02.desc
	picture = GFX_report_event_ast_navy
	
	is_triggered_only = yes

	# Coolio
	option = { 
		name = BBA_italy_naval_cooperation_programs.02.a

		effect_tooltip = {
			add_to_tech_sharing_group = ITA_naval_cooperation_program_research_group
			FROM = { add_to_tech_sharing_group = ITA_naval_cooperation_program_research_group }
		}
	}
}

# Country refuses to join the Naval Cooperation Program - Event for ITA
country_event = {
	id = BBA_italy_naval_cooperation_programs.03
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_naval_cooperation_programs.03 FROM = [From.GetName]" }
	title = BBA_italy_naval_cooperation_programs.03.t
	desc = BBA_italy_naval_cooperation_programs.03.desc
	picture = GFX_report_event_ast_navy
	
	is_triggered_only = yes

	# wtf
	option = { 
		name = BBA_italy_naval_cooperation_programs.03.a

		effect_tooltip = {
			add_opinion_modifier = {
				target = FROM
				modifier = BUL_rejected_our_proposal
			}
		}
	}
}

# Offer to perform joint maneuvers - Event for allies
country_event = {
	id = BBA_italy_naval_cooperation_programs.04
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_naval_cooperation_programs.04 FROM = [From.GetName]" }
	title = BBA_italy_naval_cooperation_programs.04.t
	desc = BBA_italy_naval_cooperation_programs.04.desc
	picture = GFX_report_event_usa_destroyers
	
	is_triggered_only = yes

	# Accept
	option = { 
		name = BBA_italy_naval_cooperation_programs.04.a
		ai_chance = {
			base = 10
		}

		effect_tooltip = {
			custom_effect_tooltip = ITA_joint_maneuvers_with_country_remove_effect_tt
			navy_experience = 50
			add_doctrine_cost_reduction = {
				name = ITA_joint_maneuvers_with_country_doctrine_bonus
				cost_reduction = 0.75
				uses = 1
				category = naval_doctrine
			}
			FROM = {
				navy_experience = 50
				add_doctrine_cost_reduction = {
					name = ITA_joint_maneuvers_with_country_doctrine_bonus
					cost_reduction = 0.75
					uses = 1
					category = naval_doctrine
				}
			}
		}
		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_naval_cooperation_programs.05 hours = 1 } }
		}
	}

	# Refuse
	option = {
		name = BBA_italy_naval_cooperation_programs.04.b
		ai_chance = {
			base = 0 #AI always says 'yes'
		}

		FROM = {
			add_opinion_modifier = {
				target = ROOT
				modifier = BUL_rejected_our_proposal
			}
		}
		hidden_effect = {
			set_country_flag = ITA_joint_maneuvers_rejected_flag #Preventing the decision to be taken again by Italy
			FROM = { country_event = { id = BBA_italy_naval_cooperation_programs.06 hours = 1 } }
		}
	}
}

# Country accepts joint maneuvers - Event for ITA
country_event = {
	id = BBA_italy_naval_cooperation_programs.05
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_naval_cooperation_programs.05 FROM = [From.GetName]" }
	title = BBA_italy_naval_cooperation_programs.05.t
	desc = BBA_italy_naval_cooperation_programs.05.desc
	picture = GFX_report_event_usa_destroyers
	
	is_triggered_only = yes

	# Coolio
	option = { 
		name = BBA_italy_naval_cooperation_programs.05.a

		effect_tooltip = {
			custom_effect_tooltip = ITA_joint_maneuvers_with_country_remove_effect_tt
			navy_experience = 50
			add_doctrine_cost_reduction = {
				name = ITA_joint_maneuvers_with_country_doctrine_bonus
				cost_reduction = 0.75
				uses = 1
				category = naval_doctrine
			}
			FROM = {
				navy_experience = 50
				add_doctrine_cost_reduction = {
					name = ITA_joint_maneuvers_with_country_doctrine_bonus
					cost_reduction = 0.75
					uses = 1
					category = naval_doctrine
				}
			}
		}
	}
}

# Country rejects joint maneuvers - Event for ITA
country_event = {
	id = BBA_italy_naval_cooperation_programs.06
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_naval_cooperation_programs.06 FROM = [From.GetName]" }
	title = BBA_italy_naval_cooperation_programs.06.t
	desc = BBA_italy_naval_cooperation_programs.06.desc
	picture = GFX_report_event_usa_destroyers
	
	is_triggered_only = yes

	# wtf
	option = { 
		name = BBA_italy_naval_cooperation_programs.06.a

		effect_tooltip = {
			add_opinion_modifier = {
				target = FROM
				modifier = BUL_rejected_our_proposal
			}
		}
	}
}

# Joint Maneuvers Prgoram finished - Event for ITA and ally
country_event = {
	id = BBA_italy_naval_cooperation_programs.07
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_naval_cooperation_programs.07 FROM = [From.GetName]" }
	title = BBA_italy_naval_cooperation_programs.07.t
	desc = BBA_italy_naval_cooperation_programs.07.desc
	picture = GFX_report_event_usa_destroyers
	
	is_triggered_only = yes

	# Awesome
	option = { 
		name = BBA_italy_naval_cooperation_programs.07.a

		navy_experience = 50
		add_doctrine_cost_reduction = {
			name = ITA_joint_maneuvers_with_country_doctrine_bonus
			cost_reduction = 0.75
			uses = 1
			category = naval_doctrine
		}
		effect_tooltip = {
			FROM = {
				navy_experience = 50
				add_doctrine_cost_reduction = {
					name = ITA_joint_maneuvers_with_country_doctrine_bonus
					cost_reduction = 0.75
					uses = 1
					category = naval_doctrine
				}
			}
		}
	}
}

# Offer to sell Italian Escort Ships - Event for SWE / other minors
country_event = {
	id = BBA_italy_naval_cooperation_programs.08
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_naval_cooperation_programs.08 FROM = [From.GetName]" }
	title = BBA_italy_naval_cooperation_programs.08.t
	desc = BBA_italy_naval_cooperation_programs.08.desc
	picture = GFX_report_event_sailors_in_working_rig
	
	is_triggered_only = yes

	# Accept
	option = { 
		name = BBA_italy_naval_cooperation_programs.08.a
		ai_chance = {
			base = 10
		}

		effect_tooltip = {
			custom_effect_tooltip = ITA_cooperation_programs_deal_others_tt
			FROM = {
				add_timed_idea = {
					idea = ITA_sold_obsolete_escort_ships_ns
					days = 365
				}
			}
		}

		hidden_effect = {
			FROM = {
				set_country_flag = ITA_sold_obsolete_escort_ships_flag #Cannot sell ships again
				country_event = { id = BBA_italy_naval_cooperation_programs.09 hours = 1 }
			}
		}
	}

	# Refuse
	option = {
		name = BBA_italy_naval_cooperation_programs.08.b
		ai_chance = {
			base = 0 #AI always says 'yes'
		}

		hidden_effect = {
			if = {
				limit = {
					original_tag = SWE
				}
				FROM = { set_country_flag = ITA_sweden_refused_to_buy_ships_flag }
			}
			set_country_flag = ITA_obsolete_escort_ships_rejected_flag #Preventing the decision to be taken again by Italy
			FROM = { country_event = { id = BBA_italy_naval_cooperation_programs.10 hours = 1 } }
		}
	}
}

# Country accepts buying Italian Escort Ships - Event for ITA
country_event = {
	id = BBA_italy_naval_cooperation_programs.09
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_naval_cooperation_programs.09 FROM = [From.GetName]" }
	title = BBA_italy_naval_cooperation_programs.09.t
	desc = BBA_italy_naval_cooperation_programs.09.desc
	picture = GFX_report_event_sailors_in_working_rig
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = { #Remove all other decisions for this, we are successful we won't sell any more ships
			clr_country_flag = ITA_escort_ships_purchase_ongoing_flag
		}
	}

	# Coolio
	option = { 
		name = BBA_italy_naval_cooperation_programs.09.a

		hidden_effect = { #transfer_ship does not generate any tt
			transfer_ship = {
				prefer_name = "RCT Bettino Ricasoli"
				type = destroyer
				target = FROM
				exclude_refitting = yes
			}
			transfer_ship = {
				prefer_name = "RCT Giovanni Nicotera"
				type = destroyer
				target = FROM
				exclude_refitting = yes
			}
			transfer_ship = {
				prefer_name = "RCT Astore"
				type = destroyer
				target = FROM
				exclude_refitting = yes
			}
			transfer_ship = {
				prefer_name = "RCT Spica"
				type = destroyer
				target = FROM
				exclude_refitting = yes
			}
		}
		custom_effect_tooltip = ITA_cooperation_programs_deal_others_tt
		add_timed_idea = {
			idea = ITA_sold_obsolete_escort_ships_ns
			days = 365
		}
	}
}

# Country rejects buying Italian Escort Ships - Event for ITA
country_event = {
	id = BBA_italy_naval_cooperation_programs.10
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_naval_cooperation_programs.10 FROM = [From.GetName]" }
	title = BBA_italy_naval_cooperation_programs.10.t
	desc = BBA_italy_naval_cooperation_programs.10.desc
	picture = GFX_report_event_sailors_in_working_rig 
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			clr_country_flag = ITA_escort_ships_purchase_ongoing_flag
		}
	}

	# Disappointing
	option = { 
		name = BBA_italy_naval_cooperation_programs.10.a

	}
}

# Offer to cede Aquila-Class DDs - Event for Spanish tag
country_event = {
	id = BBA_italy_naval_cooperation_programs.11
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_naval_cooperation_programs.11 FROM = [From.GetName]" }
	title = BBA_italy_naval_cooperation_programs.11.t
	desc = BBA_italy_naval_cooperation_programs.11.desc
	picture = GFX_report_event_destroyers
	
	is_triggered_only = yes

	# Accept
	option = { 
		name = BBA_italy_naval_cooperation_programs.11.a
		ai_chance = {
			base = 10
		}

		effect_tooltip = {
			custom_effect_tooltip = ITA_cede_aquila_class_destroyers_tt
			FROM = {
				navy_experience = 50
				add_political_power = 50
			}
		}

		hidden_effect = {
			FROM = {
				set_country_flag = ITA_ceded_aquila_class_destroyers_flag #Cannot cede ships again
				country_event = { id = BBA_italy_naval_cooperation_programs.12 hours = 1 }
			}
		}
	}

	# Refuse
	option = {
		name = BBA_italy_naval_cooperation_programs.08.b #Intentional
		ai_chance = {
			base = 0 #AI always says 'yes'
		}

		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_naval_cooperation_programs.13 hours = 1 } }
		}
	}
}

# Country accepts the Aquila-Class DDs - Event for ITA
country_event = {
	id = BBA_italy_naval_cooperation_programs.12
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_naval_cooperation_programs.12 FROM = [From.GetName]" }
	title = BBA_italy_naval_cooperation_programs.12.t
	desc = BBA_italy_naval_cooperation_programs.12.desc
	picture = GFX_report_event_destroyers
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = { #Remove all other decisions for this, we are successful we won't sell any more ships
			clr_country_flag = ITA_escort_ships_purchase_ongoing_flag
		}
	}

	# Coolio
	option = { 
		name = BBA_italy_naval_cooperation_programs.12.a

		navy_experience = 50
		add_political_power = 50
		custom_effect_tooltip = ITA_cede_aquila_class_destroyers_tt
		FROM = {
			add_opinion_modifier = {
				modifier = ITA_ceded_destroyers
				target = ROOT
			}
		}
		hidden_effect = {
			transfer_ship = {
				prefer_name = "RCT Aquila"
				type = destroyer
				target = FROM
			}
			transfer_ship = {
				prefer_name = "RCT Falco"
				type = destroyer
				target = FROM
			}
		}
	}
}

# Country rejects the Aquila-Class DDs - Event for ITA
country_event = {
	id = BBA_italy_naval_cooperation_programs.13
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_naval_cooperation_programs.13 FROM = [From.GetName]" }
	title = BBA_italy_naval_cooperation_programs.13.t
	desc = BBA_italy_naval_cooperation_programs.13.desc
	picture = GFX_report_event_destroyers
	
	is_triggered_only = yes

	# you mad bro?
	option = { 
		name = BBA_italy_naval_cooperation_programs.03.a #Intentional

	}
}

# Offer to produce Midget Submarines - Event for minor European ally
country_event = {
	id = BBA_italy_naval_cooperation_programs.14
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_naval_cooperation_programs.14 FROM = [From.GetName]" }
	title = BBA_italy_naval_cooperation_programs.14.t
	desc = BBA_italy_naval_cooperation_programs.14.desc
	picture = GFX_report_event_generic_naval_treaty
	
	is_triggered_only = yes

	# Accept
	option = { 
		name = BBA_italy_naval_cooperation_programs.14.a
		ai_chance = {
			base = 100
			modifier = {
				factor = 0
				OR = {
					has_navy_size = {
						size < 1
						archetype = ship_hull_submarine #SS
					}
					NOT = {
						any_owned_state = {
							is_coastal = yes
						}
					}
				}
			}
		}

		custom_effect_tooltip = ITA_export_midget_submarines_tt

		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_naval_cooperation_programs.15 hours = 1 } }
			set_country_flag = ITA_midget_submarines_flag #Cannot sell subss again
		}
	}

	# Refuse
	option = {
		name = BBA_italy_naval_cooperation_programs.08.b #Intentional
		ai_chance = {
			base = 1
		}

		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_naval_cooperation_programs.16 hours = 1 } }
			set_country_flag = ITA_midget_submarines_flag #Cannot sell subss again
		}
	}
}

# Country accepts to buy Midget Submarines - Event for ITA
country_event = {
	id = BBA_italy_naval_cooperation_programs.15
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_naval_cooperation_programs.15 FROM = [From.GetName]" }
	title = BBA_italy_naval_cooperation_programs.15.t
	desc = BBA_italy_naval_cooperation_programs.15.desc
	picture = GFX_report_event_generic_naval_treaty
	
	is_triggered_only = yes

	# Coolio
	option = { 
		name = BBA_italy_naval_cooperation_programs.15.a

		custom_effect_tooltip = ITA_export_midget_submarines_tt
		FROM = {
			add_opinion_modifier = {
				modifier = POR_sold_ships
				target = ROOT
			}
		}
	}
}

# Country rejects the Midget Submarines - Event for ITA
country_event = {
	id = BBA_italy_naval_cooperation_programs.16
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_naval_cooperation_programs.16 FROM = [From.GetName]" }
	title = BBA_italy_naval_cooperation_programs.16.t
	desc = BBA_italy_naval_cooperation_programs.16.desc
	picture = GFX_report_event_generic_naval_treaty
	
	is_triggered_only = yes

	# Pfff ok
	option = { 
		name = BBA_italy_naval_cooperation_programs.10.a #Intentional

		clr_country_flag = ITA_producing_midget_submarines_for_export_flag
	}
}

# Midget Submarines are ready - Event for minor European ally
country_event = {
	id = BBA_italy_naval_cooperation_programs.17
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_naval_cooperation_programs.17 FROM = [From.GetName]" }
	title = BBA_italy_naval_cooperation_programs.17.t
	desc = BBA_italy_naval_cooperation_programs.17.desc
	picture = GFX_report_event_generic_naval_treaty
	
	is_triggered_only = yes

	# Accept
	option = { 
		name = BBA_italy_naval_cooperation_programs.17.a

		create_equipment_variant = {
			name = "CB Class"
			type = ship_hull_midget_submarine
			name_group = ITA_SS_HISTORICAL
			parent_version = 0
			modules = {
				fixed_ship_torpedo_slot = ship_torpedo_sub_2
				fixed_ship_engine_slot = sub_ship_engine_2
			}
		}

		create_ship = { type = ship_hull_midget_submarine equipment_variant = "CB Class" creator = FROM }
		create_ship = { type = ship_hull_midget_submarine equipment_variant = "CB Class" creator = FROM }
		create_ship = { type = ship_hull_midget_submarine equipment_variant = "CB Class" creator = FROM }
		create_ship = { type = ship_hull_midget_submarine equipment_variant = "CB Class" creator = FROM }
		create_ship = { type = ship_hull_midget_submarine equipment_variant = "CB Class" creator = FROM }
	}
}

country_event = {
	id = BBA_italy_human_torpedo_raid.1
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_human_torpedo_raid.1 FROM = [From.GetName]" }
	title = BBA_italy_human_torpedo_raid.1.t
	desc = BBA_italy_human_torpedo_raid.1.desc
	picture = GFX_report_event_ast_navy
	
	is_triggered_only = yes

	
	option = { 
		name = BBA_italy_human_torpedo_raid.1.a 

		custom_effect_tooltip = ITA_human_torpedo_raid_tt
		
		custom_effect_tooltip = ITA_human_torpedo_target_effect_tt
	}
}


 ######   #######  ##        #######  ##    ## ####    ###    ##          ##     ##    ###    ##    ##    ###     ######   ######## ##     ## ######## ##    ## ######## 
##    ## ##     ## ##       ##     ## ###   ##  ##    ## ##   ##          ###   ###   ## ##   ###   ##   ## ##   ##    ##  ##       ###   ### ##       ###   ##    ##    
##       ##     ## ##       ##     ## ####  ##  ##   ##   ##  ##          #### ####  ##   ##  ####  ##  ##   ##  ##        ##       #### #### ##       ####  ##    ##    
##       ##     ## ##       ##     ## ## ## ##  ##  ##     ## ##          ## ### ## ##     ## ## ## ## ##     ## ##   #### ######   ## ### ## ######   ## ## ##    ##    
##       ##     ## ##       ##     ## ##  ####  ##  ######### ##          ##     ## ######### ##  #### ######### ##    ##  ##       ##     ## ##       ##  ####    ##    
##    ## ##     ## ##       ##     ## ##   ###  ##  ##     ## ##          ##     ## ##     ## ##   ### ##     ## ##    ##  ##       ##     ## ##       ##   ###    ##    
 ######   #######  ########  #######  ##    ## #### ##     ## ########    ##     ## ##     ## ##    ## ##     ##  ######   ######## ##     ## ######## ##    ##    ##    


# Colonial Police occupation law available, Wanna apply it everywhere possible? - Event for ITA
country_event = {
	id = BBA_italy_colonial_management.1
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_colonial_management.1 FROM = [From.GetName]" }
	title = BBA_italy_colonial_management.1.t
	desc = BBA_italy_colonial_management.1.desc
	picture = GFX_report_event_spr_italian_volunteers
	
	is_triggered_only = yes

	# APPLY IT EVERYWHERE TACK!
	option = { 
		name = BBA_italy_colonial_management.1.a

		ai_chance = {
			base = 10
		}
		ITA = { set_occupation_law_where_available = colonial_police } # Set law in all countries/states where it's available.
	}

	# NOT INTERESTED
	option = { 
		name = BBA_italy_colonial_management.1.b

		ai_chance = {
			base = 0
		}

		custom_effect_tooltip = BBA_italy_colonial_management.1_do_not_apply_tt
	}
}



########   #######  ########  
##     ## ##     ## ##     ## 
##     ## ##     ## ##     ## 
########  ##     ## ########  
##     ## ##     ## ##        
##     ## ##     ## ##        
########   #######  ##        

# Lost core - BoP affected - Event for ITA
country_event = {
	id = BBA_italy_bop.1
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_bop.1 FROM = [From.GetName]" }
	title = BBA_italy_bop.1.t
	desc = BBA_italy_bop.1.desc
	picture = GFX_report_event_generic_soldiers_surrendering
	
	is_triggered_only = yes

	# ok
	option = { 
		name = BBA_italy_bop.1.a
		if = {
			limit = { FROM.FROM = { OR = { has_state_category = megalopolis state = 876 } } } #Milan or Rome
			ITA_bop_high_decrease_effect = yes
			ITA_bop_increase_lost_core_modifier = yes
		#	custom_effect_tooltip = ITA_losing_cores_tt
		}
		else_if = {
			limit = { FROM.FROM = { OR = { has_state_category = metropolis has_state_category = large_city state = 742 } } } #Major cities and Venice
			ITA_bop_medium_decrease_effect = yes
			ITA_bop_increase_lost_core_modifier = yes
		#	custom_effect_tooltip = ITA_losing_cores_tt
		}
		else_if = {
			limit = { FROM.FROM = { OR = { has_state_category = city has_state_category = large_town } } }
			ITA_bop_low_decrease_effect = yes
			ITA_bop_increase_lost_core_modifier = yes
		#	custom_effect_tooltip = ITA_losing_cores_tt
		}
		else_if = {
			limit = { FROM.FROM = { OR = { has_state_category = town has_state_category = rural } } }
			ITA_bop_very_low_decrease_effect = yes
			ITA_bop_increase_lost_core_modifier = yes
		#	custom_effect_tooltip = ITA_losing_cores_tt
		}
	}
}

# Lost colony - BoP affected - Event for ITA
country_event = {
	id = BBA_italy_bop.2
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_bop.2 FROM = [From.GetName]" }
	title = BBA_italy_bop.2.t
	desc = BBA_italy_bop.2.desc
	picture = GFX_report_event_generic_soldiers_surrendering
	
	is_triggered_only = yes

	# ok
	option = { 
		name = BBA_italy_bop.2.a

		effect_tooltip = {
			ITA_bop_very_low_decrease_effect = yes
		}
		custom_effect_tooltip = ITA_losing_colonies_tt
	}
}

country_event = {
	id = BBA_italy_bop.3
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_bop.3 FROM = [From.GetName]" }
	title = BBA_italy_bop.3.t
	desc = BBA_italy_bop.3.desc
	picture = GFX_report_event_generic_italian_celebration
	
	is_triggered_only = yes

	fire_only_once = yes

	# ok
	option = { 
		name = BBA_italy_bop.3.a

		ITA_bop_medium_increase_effect = yes	
		custom_effect_tooltip = ITA_reclaiming_cores_tt	
	}
}


 ######  #### ##     ## #### ##          ##      ##    ###    ########  
##    ##  ##  ##     ##  ##  ##          ##  ##  ##   ## ##   ##     ## 
##        ##  ##     ##  ##  ##          ##  ##  ##  ##   ##  ##     ## 
##        ##  ##     ##  ##  ##          ##  ##  ## ##     ## ########  
##        ##   ##   ##   ##  ##          ##  ##  ## ######### ##   ##   
##    ##  ##    ## ##    ##  ##          ##  ##  ## ##     ## ##    ##  
 ######  ####    ###    #### ########     ###  ###  ##     ## ##     ## 


# Event to complete first focus in RSI branch without the RDS getting the popup
country_event = { #TODO_Manu: Check if this solves the shit
	id = BBA_italy_civil_war.0
	hidden = yes

	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				tag = RSI
			}
			complete_national_focus = ITA_the_italian_social_republic
		}
		else_if = {
			limit = {
				tag = RDS
			}
			complete_national_focus = ITA_the_italian_liberation_war
		}
	}
}


# CIVIL WAR!!! - Event for Italy
country_event = {
	id = BBA_italy_civil_war.1
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_civil_war.1 FROM = [From.GetName]" }
	title = BBA_italy_civil_war.1.t
	desc = BBA_italy_civil_war.1.desc
	picture = GFX_report_event_ITA_italian_civil_war
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			set_country_flag = ITA_fascist_side_for_character_split_flag # Used for character split
			ITA_cw_set_sides_and_overlords = yes #MANAGES SIDES (Cosmetics, flags, overlords, etc.)

			ITA_cw_manage_states_split_effect = yes #SETS THE STATE SPLIT
		}
	}

	# Fascist
	option = { 
		name = BBA_italy_civil_war.1.a

		ai_chance = {
			base = 1
		}

		effect_tooltip = {
			start_civil_war = {
				ideology = neutrality #SPLITTING TAG
				size = 0.35
			}
			custom_effect_tooltip = BBA_italy_civil_war_fascist_tt
		}

		hidden_effect = {
			if = { limit = { has_cosmetic_tag = ITA_neutrality } drop_cosmetic_tag = yes }
			ITA_set_special_characters_as_fascist_effect = yes
			ITA_start_civil_war_effect = yes
			complete_national_focus = ITA_the_italian_social_republic
			RDS = { country_event = { id = BBA_italy_civil_war.0 hours = 1 } }
			news_event = { id = bba_news.110 hours = 2 }
		}
		#ITA_log_the_shit = yes
	}

	# Monarchist
	option = { 
		name = BBA_italy_civil_war.1.b

		ai_chance = {
			base = 0
		}

		effect_tooltip = {
			start_civil_war = {
				ideology = neutrality #SPLITTING TAG
				size = 0.35
			}
			custom_effect_tooltip = BBA_italy_civil_war_monarchist_tt
		}

		hidden_effect = {
			ITA_set_special_characters_as_monarchist_effect = yes
			ITA_start_civil_war_effect = yes
			RDS = { change_tag_from = ROOT }
			#FOCUS TREE for RSI -> Needs to be here otherwise RDS player will see completion popup for this
			RSI = { country_event = { id = BBA_italy_civil_war.0 hours = 1 } }
			RDS = { country_event = { id = BBA_italy_civil_war.0 hours = 1 } }
			news_event = { id = bba_news.110 hours = 2 }
		}
		#ITA_log_the_shit = yes

		#BELLA CIAO
		hidden_effect = {
			play_song = "bella_ciao"
		}
	}

	# Communist
	option = { 
		name = BBA_italy_civil_war.1.c

		ai_chance = {
			base = 0
		}
		
		set_global_flag = ITA_communist_cw_flag

		effect_tooltip = {
			start_civil_war = {
				ideology = neutrality #SPLITTING TAG
				size = 0.35
			}
			custom_effect_tooltip = BBA_italy_civil_war_communist_tt
		}

		hidden_effect = {
			if = { limit = { has_cosmetic_tag = ITA_neutrality } drop_cosmetic_tag = yes }
			ITA_set_special_characters_as_monarchist_effect = yes #Should be enough for the split (Commies + Democ + Monarchists together)
			ITA_start_civil_war_effect = yes
			RDS = { change_tag_from = ROOT }
			#FOCUS TREE for RSI -> Needs to be here otherwise RDS player will see completion popup for this
			RSI = { country_event = { id = BBA_italy_civil_war.0 hours = 1 } }
			RDS = { country_event = { id = BBA_italy_civil_war.0 hours = 1 } }
			news_event = { id = bba_news.110 hours = 2 }
		}
		#ITA_log_the_shit = yes

		#BELLA CIAO
		hidden_effect = {
			play_song = "bella_ciao"
		}
	}

	# Democratic
	option = { 
		name = BBA_italy_civil_war.1.d

		ai_chance = {
			base = 0
		}
		
		set_global_flag = ITA_democratic_cw_flag

		effect_tooltip = {
			start_civil_war = {
				ideology = neutrality #SPLITTING TAG
				size = 0.35
			}
			custom_effect_tooltip = BBA_italy_civil_war_democratic_tt
		}

		hidden_effect = {
			ITA_set_special_characters_as_monarchist_effect = yes #Should be enough for the split (Commies + Democ + Monarchists together)
			ITA_start_civil_war_effect = yes
			RDS = { change_tag_from = ROOT }
			#FOCUS TREE for RSI -> Needs to be here otherwise RDS player will see completion popup for this
			RSI = { country_event = { id = BBA_italy_civil_war.0 hours = 1 } }
			RDS = { country_event = { id = BBA_italy_civil_war.0 hours = 1 } }
			news_event = { id = bba_news.110 hours = 2 }
		}
		#ITA_log_the_shit = yes

		#BELLA CIAO
		hidden_effect = {
			play_song = "bella_ciao"
		}
	}
}

# Fronte Militare Clandestino (state modifier) - Event for RSI
country_event = {
	id = BBA_italy_civil_war.2
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_civil_war.2 FROM = [From.GetName]" }
	title = BBA_italy_civil_war.2.t
	desc = BBA_italy_civil_war.2.desc
	picture = GFX_report_event_ITA_partisans
	
	is_triggered_only = yes

	# Ok
	option = { 
		name = BBA_italy_civil_war.2.a

		effect_tooltip = {
			every_core_state = {
				custom_effect_tooltip = ITA_fronte_militare_clandestino_modifier_tt
			}
		}
	}
}

# Gappisti (state modifier) - Event for RSI
country_event = {
	id = BBA_italy_civil_war.3
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_civil_war.3 FROM = [From.GetName]" }
	title = BBA_italy_civil_war.3.t
	desc = BBA_italy_civil_war.3.desc
	picture = GFX_report_event_ITA_partisans
	
	is_triggered_only = yes

	# Ok
	option = { 
		name = BBA_italy_civil_war.3.a

		add_stability = -0.05
		custom_effect_tooltip = ITA_gappisti_state_modifier_rsi_tt
	}
}

# Anti-Partisan Measures (state modifier) - Event for RDS
country_event = {
	id = BBA_italy_civil_war.4
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_civil_war.4 FROM = [From.GetName]" }
	title = BBA_italy_civil_war.4.t
	desc = BBA_italy_civil_war.4.desc
	picture = GFX_report_event_ger_civil_war
	
	is_triggered_only = yes

	# Ok
	option = { 
		name = BBA_italy_civil_war.4.a

		add_stability = -0.05
		custom_effect_tooltip = ITA_gappisti_state_modifier_rds_tt
	}
}

# GIVE US INDEPENDENCE- Event for Italian overlord (RSI and RDS)
country_event = {
	id = BBA_italy_civil_war.5
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_civil_war.5 FROM = [From.GetName]" }
	title = BBA_italy_civil_war.5.t
	desc = BBA_italy_civil_war.5.desc
	picture = GFX_report_event_generic_sign_treaty2
	
	is_triggered_only = yes

	# Ok
	option = { 
		name = BBA_italy_civil_war.5.a

		ai_chance = {
			base = 1
		}

		effect_tooltip = {
			end_puppet = FROM
			FROM = {
				add_opinion_modifier = {
					target = ROOT
					modifier = ITA_granted_us_independence
				}
			}
		}
		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_civil_war.6 hours = 1 } }
		}
	}

	# Nej tack
	option = { 
		name = BBA_italy_civil_war.5.b

		ai_chance = {
			base = 0
		}

		custom_effect_tooltip = germany.126.warning #Can lead to war
		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_civil_war.7 hours = 1 } }
		}
	}
}

# We are independent now - Event for RSI or RDS
country_event = {
	id = BBA_italy_civil_war.6
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_civil_war.6 FROM = [From.GetName]" }
	title = BBA_italy_civil_war.6.t
	desc = BBA_italy_civil_war.6.desc
	picture = GFX_report_event_generic_sign_treaty2
	
	is_triggered_only = yes

	# Ok
	option = { 
		name = BBA_italy_civil_war.6.a
		
		FROM = { end_puppet = ROOT }

		add_opinion_modifier = {
			target = FROM
			modifier = ITA_granted_us_independence
		}
	}
}

# INDEPENDENCE REJECTED! - Event for RSI or RDS
country_event = {
	id = BBA_italy_civil_war.7
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_civil_war.7 FROM = [From.GetName]" }
	title = BBA_italy_civil_war.7.t
	desc = BBA_italy_civil_war.7.desc
	picture = GFX_report_event_generic_sign_treaty2
	
	is_triggered_only = yes

	# We comply
	option = { 
		name = BBA_italy_civil_war.7.b

		add_opinion_modifier = {
			target = FROM
			modifier = ITA_refused_to_grant_us_independence
		}

		add_stability = -0.05
	}

	# JA ME MATEN TE RAJO PRIMO
	option = { 
		name = BBA_italy_civil_war.7.a
		
		FROM = { end_puppet = ROOT }

		if = {
			limit = {
				is_in_faction_with = FROM
			}
			leave_faction = yes
		}
		
		declare_war_on = {
			target = FROM 
			type = independence_wargoal 
		}

		add_opinion_modifier = {
			target = FROM
			modifier = ITA_refused_to_grant_us_independence
		}
		
		add_timed_idea = {
			idea = ITA_independence_war
			days = 365
		}

		add_war_support = 0.1
	}
}

# ITALIAN CIVIL WAR!!! - Event for People occupying Italian cores
country_event = {
	id = BBA_italy_civil_war.100
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_civil_war.100 FROM = [From.GetName]" }
	title = BBA_italy_civil_war.100.t
	desc = BBA_italy_civil_war.100.desc
	picture = GFX_report_event_ITA_italian_civil_war
	
	is_triggered_only = yes

	fire_only_once = yes

	# Give them states
	option = { 
		name = BBA_italy_civil_war.100.a

		ai_chance = {
			base = 10
		}

		effect_tooltip = {
			custom_effect_tooltip = ITA_we_will_transfer_the_following_states_tt
			every_controlled_state = {
				limit = {
					OR = {
						has_state_flag = ITA_cw_state_split
						is_owned_by = RSI
					}
				}
			}
		}
		hidden_effect = {
			RDS = { country_event = { id = BBA_italy_civil_war.101 hours = 1 } }
		}
	}

	# My stuff go away
	option = { 
		name = BBA_italy_civil_war.100.b

		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				FROM = { is_ai = no }
			}
		}

		custom_effect_tooltip = ITA_we_keep_our_occupied_states_tt
	}
}

# Country gives occupied states to RDS - Event for RDS
country_event = {
	id = BBA_italy_civil_war.101
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_civil_war.101 FROM = [From.GetName]" }
	title = BBA_italy_civil_war.101.t
	desc = BBA_italy_civil_war.101.desc
	picture = GFX_report_event_generic_sign_treaty1
	
	is_triggered_only = yes

	# Good
	option = { 
		name = BBA_italy_civil_war.101.a

		effect_tooltip = {
			FROM = {
				custom_effect_tooltip = ITA_we_will_transfer_the_following_states_tt
				every_controlled_state = {
					limit = {
						OR = {
							has_state_flag = ITA_cw_state_split
							is_owned_by = RSI
						}
					}
				}
			}
		}

		hidden_effect = {
			FROM = {
				every_controlled_state = {
					limit = {
						OR = {
							has_state_flag = ITA_cw_state_split
							is_owned_by = RSI
						}
						NOT = { is_claimed_by = FROM is_core_of = FROM }
					}
					ROOT = { transfer_state = PREV }
				}
			}
		}
	}
}


############################
### ITALIAN CW VIA FOCUS ###
############################

# Italian CW (triggered by focus) - Event for ITA
country_event = {
	id = BBA_italy_civil_war.300
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_civil_war.300 FROM = [From.GetName]" }
	title = BBA_italy_civil_war.1.t #intentional
	desc = BBA_italy_civil_war.300.desc
	picture = GFX_report_event_ITA_italian_civil_war
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			set_country_flag = ITA_antifa_side_for_character_split_flag #For character split
			ITA_set_special_characters_as_antifascists_effect = yes
		}
	}

	# Communist always!
	option = { 
		name = BBA_italy_civil_war.1.c #intentional

		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				ITA_is_socialist_ai = yes
			}
		}

		ITA_start_anti_fascist_civil_war = yes

		ITA_promote_cln_to_country_leader_communism = yes

		ITA_civil_war_deal_with_militias = yes

		ITA_anti_fascist_civil_war_deal_with_fascist_side = yes
		
		if = {
			limit = { has_cosmetic_tag = ITA_neutrality }
			effect_tooltip = { set_cosmetic_tag = ITA_communism }
			hidden_effect = { drop_cosmetic_tag = yes }
		}
	}
	
	#Mimimimi democratic
	option = { 
		name = BBA_italy_civil_war.1.d #intentional

		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				ITA_is_communist_ai = yes
			}
		}

		ITA_start_anti_fascist_civil_war = yes

		set_politics = { ruling_party = democratic }

		ITA_promote_cln_to_country_leader_democratic = yes

		ITA_civil_war_deal_with_militias = yes

		ITA_anti_fascist_civil_war_deal_with_fascist_side = yes
	}
}


####################################
### THE COUNCIL DEPOSES THE DUCE ###
####################################
country_event = {
	id = BBA_italy_council_deposes_duce.1
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_council_deposes_duce.1 FROM = [From.GetName]" }
	title = BBA_italy_council_deposes_duce.1.t
	desc = BBA_italy_council_deposes_duce.1.desc
	picture = GFX_report_event_generic_italian_fascists

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			if = {
				limit = {
					NOT = {
						has_country_flag = ITA_deposed_leader_flag
					}
				}
				set_country_flag = ITA_deposed_leader_flag
				random_character = {
					limit = {
						is_country_leader = yes
					}
					set_variable = { ITA.ITA_var_deposed_leader = THIS } #For loc purposes
				}
			}
		}
	}

	option = { 
		name = BBA_italy_council_deposes_duce.1.a

		if = { #DEMOCRATIC Monarchy
			limit = {
				OR = {
					has_completed_focus = ITA_christian_democracy
					has_completed_focus = ITA_democratic_king
				}
			}
			ITA_grand_council = {
				set_character_name = ITA_grand_council_alt

				if = {
					limit = {
						NOT = { has_ideology_group = democratic }
					}
					add_country_leader_role = {
						promote_leader = yes
						country_leader = {
							ideology = conservatism
							expire = 1965.1.1.1
							traits = { the_grand_council } 
						}
					}
				}
				else = {
					promote_character = yes
				}
			}
			
		}
		else_if = { #MONARCHIST
			limit = {
				has_completed_focus = ITA_monarchia_d_italia
			}
			ITA_grand_council = {
				set_character_name = ITA_grand_council_alt

				if = {
					limit = {
						NOT = { has_ideology_group = neutrality }
					}
					add_country_leader_role = {
						promote_leader = yes
						country_leader = {
							ideology = oligarchism
							expire = 1965.1.1.1
							traits = { the_grand_council } 
						}
					}
				}
				else = {
					promote_character = yes
				}
			}
		}
		else = { #FASCIST
			ITA_grand_council = {
				promote_character = yes
			}
		}
		hidden_effect = {
			every_country = {
				news_event = { id = bba_news.109 hours = 2 }
			}
		}
	}
}

#####################
###PURGE THE PARTY###
#####################
country_event = {
	id = BBA_italy_purge_the_party.1
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_purge_the_party.1 FROM = [From.GetName]" }
	title = BBA_italy_purge_the_party.1.t
	desc = BBA_italy_purge_the_party.1.desc
	picture = GFX_report_event_generic_italian_fascists

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			ITA_characters_to_purge_effect = yes
		}
	}

	option = { #KILL ADVISORS
		name = BBA_italy_purge_the_party.1.a
		ai_chance = {
			base = 10
		}
		custom_effect_tooltip = SOV_characters_will_be_purged_tt
		character_list_tooltip = {
			limit = {
				has_character_flag = ITA_purge_advisor
			}
		}
		add_political_power = 50
		ITA_bop_very_low_increase_effect = yes

		hidden_effect = {
			ITA_purge_advisors_effect = yes
			ITA_clear_purge_flag_effect = yes
			if = {
				limit = {
					NOT = { has_country_flag = ITA_some_fascists_purged }
				}
				set_country_flag = ITA_some_fascists_purged 
			}			
			if= { 
				limit = {
					NOT = { has_country_flag = ITA_first_purge_happened_flag }
				}
				set_country_flag = ITA_first_purge_happened_flag
				country_event = { id = BBA_italy_purge_the_party.1 days = 7 random_days = 3 }
			}
			else = {
				country_event = { id = bba_news.100 hours = 12 random_hours = 8 } 				
			}
		}
	}

	option = { #KILL GENERALS
		name = BBA_italy_purge_the_party.1.b
		ai_chance = {
			base = 10
		}
		custom_effect_tooltip = SOV_characters_will_be_purged_tt
		character_list_tooltip = {
			limit = {
				has_character_flag = ITA_purge_general
			}
		}
		add_political_power = 50
		ITA_bop_very_low_increase_effect = yes

		hidden_effect = {
			ITA_purge_generals_effect = yes
			ITA_clear_purge_flag_effect = yes
			if = {
				limit = {
					NOT = { has_country_flag = ITA_no_fascists_purged }
				}
				set_country_flag = ITA_some_fascists_purged 
			}
			if= {
				limit = {
					NOT = { has_country_flag = ITA_first_purge_happened_flag }
				}
				set_country_flag = ITA_first_purge_happened_flag 
				country_event = { id = BBA_italy_purge_the_party.1 days = 7 random_days = 3 }
			}
			else = {
				country_event = { id = bba_news.100 hours = 12 random_hours = 8 } 				
			}
		}
	}		

	option = { #NO KILLING
		name = BBA_italy_purge_the_party.1.c
		ai_chance = {
			base = 10
		}
		custom_effect_tooltip = ITA_characters_will_be_spared_tt
		character_list_tooltip = {
			limit = {
				has_character_flag = ITA_purge_advisor
			}
		}
		character_list_tooltip = {
			limit = {
				has_character_flag = ITA_purge_general
			}
		}

		ITA_bop_very_low_decrease_effect = yes

		hidden_effect = {
			ITA_dont_purge_effect = yes
			if = {
				limit = {
					NOT = { has_country_flag = ITA_no_fascists_purged }
				}
				set_country_flag = ITA_no_fascists_purged
			}
			if= {
				limit = {
					NOT = { has_country_flag = ITA_first_purge_happened_flag }
				}
				set_country_flag = ITA_first_purge_happened_flag 
				country_event = { id = BBA_italy_purge_the_party.1 days = 7 random_days = 3 }
			}
			else = {
				country_event = { id = bba_news.100 hours = 12 random_hours = 8 } 			
			}
		}
	}

	option = { #KILL ALL
		name = BBA_italy_purge_the_party.1.d
		ai_chance = {
			base = 10
		}
		custom_effect_tooltip = SOV_characters_will_be_purged_tt
		character_list_tooltip = {
			limit = {
				has_character_flag = ITA_purge_advisor
				
			}
		}
		character_list_tooltip = {
			limit = {
				has_character_flag = ITA_purge_general
			}
		}
		add_political_power = 75 
		ITA_bop_medium_increase_effect = yes

		hidden_effect = {
			ITA_purge_advisors_effect = yes
			ITA_purge_generals_effect = yes
			ITA_clear_purge_flag_effect = yes
			if = {
				limit = {
					NOT = { has_country_flag = ITA_many_fascists_purged }
				}
				set_country_flag = ITA_many_fascists_purged
			}
			if = { 
				limit = {
					NOT = { has_country_flag = ITA_first_purge_happened_flag }
				}
				set_country_flag = ITA_first_purge_happened_flag
				country_event = { id = BBA_italy_purge_the_party.1 days = 7 random_days = 3 }
			}
			else = {
				country_event = { id = bba_news.100 hours = 12 random_hours = 8 } 				
			}
		}
	}
}

###########################
###THE FATE OF MUSSOLINI###
###########################
country_event = {
	id = BBA_italy_decide_the_fate_of_mussolini.1
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_decide_the_fate_of_mussolini.1 FROM = [From.GetName]" }
	title = BBA_italy_decide_the_fate_of_mussolini.1.t
	desc = BBA_italy_decide_the_fate_of_mussolini.1.desc
	picture = GFX_report_event_generic_mussolini

	is_triggered_only = yes

	option = { #Trial 
		name = BBA_italy_decide_the_fate_of_mussolini.1.a
		ai_chance = {
			base = 5
			modifier = {
				add = 35
				has_dino_grandi = yes
			}
		}
		custom_effect_tooltip = ITA_mussolini_stands_trial_tt
		country_event = { id = BBA_italy_decide_the_fate_of_mussolini.2 days = 10 }
	}

	option = { #Execution
		name = BBA_italy_decide_the_fate_of_mussolini.1.b
		ai_chance = {
			base = 10
		}
		add_political_power = 75
		add_stability = -0.05 
		add_popularity = {
		    ideology = fascism
		    popularity = -0.05
		}
		remove_ideas = ITA_shadow_of_mussolini

		ITA_bop_medium_increase_effect = yes

		hidden_effect = {
			retire_character = ITA_benito_mussolini
			news_event = { id = bba_news.101 hours = 12 random_hours = 6 } 
		}
	}

	option = { #Assassination
		name = BBA_italy_decide_the_fate_of_mussolini.1.c
		ai_chance = {
			base = 10
			modifier = {
				add = 20
				has_country_leader = {
					character = ITA_italo_balbo
					ruling_only = yes
				}
			}
		}	
		custom_effect_tooltip = ITA_mussolini_is_assassinated_tt
		country_event = { id = BBA_italy_decide_the_fate_of_mussolini.3 days = 5 } 
	}
}

#MUSSOLINI STANDS ON TRIAL
country_event = {
	id = BBA_italy_decide_the_fate_of_mussolini.2
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_decide_the_fate_of_mussolini.2 FROM = [From.GetName]" }
	title = BBA_italy_decide_the_fate_of_mussolini.2.t
	desc = BBA_italy_decide_the_fate_of_mussolini.2.desc
	picture = GFX_report_event_generic_mussolini

	is_triggered_only = yes

	option = { #acquitted
		name = BBA_italy_decide_the_fate_of_mussolini.2.a
		ai_chance = {
			base = 1
		}
		remove_ideas = ITA_shadow_of_mussolini
		custom_effect_tooltip = ITA_mussolini_walks_free_tt
		hidden_effect = {
			set_country_flag = ITA_mussolini_is_innocent
			news_event = { id = bba_news.102 hours = 16 random_hours = 4 } 
		}
	}

	option = { #imprisonment
		name = BBA_italy_decide_the_fate_of_mussolini.2.b
		ai_chance = {
			base = 10
		}
		add_political_power = 50
		add_popularity = {
		    ideology = fascism
		    popularity = 0.05
		} 
		
		remove_ideas = ITA_shadow_of_mussolini

		ITA_bop_low_increase_effect = yes

		hidden_effect = {
			set_country_flag = ITA_mussolini_is_guilty
			news_event = { id = bba_news.102 hours = 16 random_hours = 4 }
		}
	}
}

#MUSSOLINI IS ASSASSINATED
country_event = {
	id = BBA_italy_decide_the_fate_of_mussolini.3
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_decide_the_fate_of_mussolini.3 FROM = [From.GetName]" }
	title = BBA_italy_decide_the_fate_of_mussolini.3.t
	desc = BBA_italy_decide_the_fate_of_mussolini.3.desc
	picture = GFX_report_event_generic_mussolini

	is_triggered_only = yes

	option = { #Blame Communists
		name = BBA_italy_decide_the_fate_of_mussolini.3.a

		ai_chance = {
			base = 10
			modifier = {
				add = 10
				has_country_leader = {
					character = ITA_italo_balbo
					ruling_only = yes
				}
			}
		}

		add_war_support = 0.05
		add_popularity = {
		    ideology = communism
		    popularity = -0.05
		} 
		remove_ideas = ITA_shadow_of_mussolini
		hidden_effect = {
			set_country_flag = ITA_mussolini_blame_communists
			retire_character = ITA_benito_mussolini
			news_event = { id = bba_news.103 hours = 8 random_hours = 2 } 
		}
	}

	option = { #Cover Story
		name = BBA_italy_decide_the_fate_of_mussolini.3.b

		ai_chance = {
			base = 10
			modifier = {
				add = 10
				has_dino_grandi = yes
			}
		}

		add_political_power = 25

		ITA_bop_very_low_increase_effect = yes

		remove_ideas = ITA_shadow_of_mussolini
		hidden_effect = {
			set_country_flag = ITA_mussolini_cover_story
			retire_character = ITA_benito_mussolini
			news_event = { id = bba_news.103 hours = 8 random_hours  = 2 } 
		}
	}
}

################################################
###ITALY ASKS ENGLAND/FRANCE FOR TECH SHARING###
################################################
country_event = {
	id = BBA_italy_research_agreement.1
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_research_agreement.1 FROM = [From.GetName]" }
	title = BBA_italy_research_agreement.1.t
	desc = BBA_italy_research_agreement.1.desc
	picture = GFX_report_event_generic_lend_lease 

	is_triggered_only = yes

	option = { #Accept
		name = BBA_italy_research_agreement.1.a

		ai_chance = {
			base = 10
			modifier = {
				add = 5
				is_historical_focus_on = yes
			}
			modifier = {
				add = 20
				is_in_faction_with = FROM
			}
			modifier = {
				add = 15
				has_government = FROM
			}
			modifier = {
				add = 10
				has_opinion = {
					target = FROM
					value > 24
				}
			}
			modifier = {
				add = 15
				has_opinion = {
					target = FROM
					value > 49
				}
			}
			modifier = {
				add = 15
				has_dino_grandi = yes
			}
			modifier = {
				factor = 0
				OR = {
					FROM = { is_justifying_wargoal_against = ROOT }
					ROOT = { is_justifying_wargoal_against = FROM }
					FROM = { has_wargoal_against = ROOT }
					ROOT = { has_wargoal_against = FROM }
				}
			}
		}
		
		if = {
			limit = { #For France
				original_tag = FRA 
			}
			ITA_franco_italian_cooperation_effect = yes
		}
		else = { #For England
			ITA_anglo_italian_cooperation_effect = yes
		}

		hidden_effect = {
			FROM = { news_event = { id = bba_news.104 hours = 8 random_hours = 4 }}
		}
	}

	option = { #Reject
		name = BBA_italy_research_agreement.1.b

		ai_chance = {
			base = 1
		}
		effect_tooltip = {
			FROM = {
				add_opinion_modifier = { 
					target = ROOT
					modifier = ITA_military_cooperation_rejection
				}
			}
		}
		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_research_agreement.2 hours = 8 random_hours = 4 } } 
		}
	}
}

#ITALY RECEIVES THE REJECTION EVENT FROM ASKING UK/FRANCE TO TECH SHARE
country_event = { 
	id = BBA_italy_research_agreement.2
	title = BBA_italy_research_agreement.2.t
	desc = BBA_italy_research_agreement.2.desc
	picture = GFX_report_event_generic_read_write 

	is_triggered_only = yes

	option = { #Ouch
		name = BBA_italy_research_agreement.2.a
		add_opinion_modifier = { 
			target = FROM
			modifier = ITA_military_cooperation_rejection
		}
	}
}

#########################################################
###ITALY ASKS ENGLAND/FRANCE FOR A NON AGGRESSION PACT###
#########################################################
country_event = { 
	id = BBA_italy_pact.1
	title = BBA_italy_pact.1.t
	desc = BBA_italy_pact.1.desc
	picture = GFX_report_event_generic_panzer_attack 

	is_triggered_only = yes

	option = { #Accept
		name = BBA_italy_pact.1.a

		ai_chance = {
			base = 10
			modifier = {
				add = 5
				is_historical_focus_on = yes
			}
			modifier = {
				add = 15
				has_government = FROM
			}
			modifier = {
				add = 15
				has_opinion = {
					target = FROM
					value > 49
				}
			}
			modifier = {
				add = 25
				has_opinion = {
					target = FROM
					value > 74
				}
			}
			modifier = {
				add = 15
				has_dino_grandi = yes
			}
			modifier = {
				factor = 0
				OR = {
					FROM = { is_justifying_wargoal_against = ROOT }
					ROOT = { is_justifying_wargoal_against = FROM }
					FROM = { has_wargoal_against = ROOT }
					ROOT = { has_wargoal_against = FROM }
				}
			}
		}

		ITA_non_aggression_pact_effect = yes

		hidden_effect = {
			FROM = {news_event = { id = bba_news.105 hours = 12 random_hours = 6 }}
		}
	}

	option = { #Refuse
		name = BBA_italy_pact.1.b

		ai_chance = {
			base = 5
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		effect_tooltip = {
			FROM = {
				add_opinion_modifier = { 
					target = ROOT
					modifier = ITA_military_cooperation_rejection
				}
			}
		}
		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_pact.2 hours = 8 random_hours = 4 } }
		}
	}
}

#ITALY RECEIVES THE REJECTION EVENT FROM ASKING UK/FRANCE FOR NON AGGRESSION PACT
country_event = {
	id = BBA_italy_pact.2
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_pact.2 FROM = [From.GetName]" }
	title = BBA_italy_pact.2.t
	desc = BBA_italy_pact.2.desc
	picture = GFX_report_event_generic_rally_3 

	is_triggered_only = yes

	option = { #Ouch
		name = BBA_italy_pact.2.a
		add_opinion_modifier = { 
			target = FROM
			modifier = ITA_military_cooperation_rejection
		}
	}
}

###############################################
###ITALY ASKS FOR RECOGNITION FOR ITS EMPIRE###
###############################################
country_event = {
	id = BBA_italy_recognize_the_empire.1
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_recognize_the_empire.1 FROM = [From.GetName]" }
	title = BBA_italy_recognize_the_empire.1.t
	desc = BBA_italy_recognize_the_empire.1.desc
	picture = GFX_report_event_ITA_grand_council 

	is_triggered_only = yes

	option = { #Recognize
		name = BBA_italy_recognize_the_empire.1.a

		ai_chance = {
			base = 10
			modifier = {
				add = 10
				is_historical_focus_on = yes
			}
			modifier = {
				add = 15
				has_government = FROM
			}
			modifier = {
				add = 10
				has_opinion = {
					target = FROM
					value > 49
				}
			}
			modifier = {
				add = 20
				has_opinion = {
					target = FROM
					value > 74
				}
			}
			modifier = {
				add = 20
				ROOT = { has_non_aggression_pact_with = FROM }
			}
			modifier = {
				add = 15
				has_dino_grandi = yes
			}
			modifier = {
				factor = 0
				OR = {
					FROM = { is_justifying_wargoal_against = ROOT }
					ROOT = { is_justifying_wargoal_against = FROM }
					FROM = { has_wargoal_against = ROOT }
					ROOT = { has_wargoal_against = FROM }
					FROM = { has_war_with = ROOT }
				}
			}
		}

		add_political_power = 15

		effect_tooltip = {
			FROM = {
				add_opinion_modifier = { 
					target = ROOT
					modifier = ITA_recognized_the_empire
				}
			}
			ITA_recognize_the_empire_effect = yes
		}


		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_recognize_the_empire.2 hours = 8 random_hours = 4 } }
		}
	}

	option = { #Dismiss
		name = BBA_italy_recognize_the_empire.1.b

		ai_chance = {
			base = 10
			modifier = {
				add = 15
				has_opinion = {
					target = FROM
					value < 1
				}
			}
			modifier = {
				add = 10
				has_government = communism
			}
		}
		
		effect_tooltip = {
			FROM = {
				add_opinion_modifier = { 
					target = ROOT
					modifier = ITA_dismissed_the_empire
				}
			}
		}

		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_recognize_the_empire.3 hours = 8 random_hours = 4 } }
		}
	}
}

#ITALY RECEIVES THE IMPERIAL RECOGNITION THEY SO CRAVE
country_event = {
	id = BBA_italy_recognize_the_empire.2
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_recognize_the_empire.2 FROM = [From.GetName]" }
	title = BBA_italy_recognize_the_empire.2.t
	desc = BBA_italy_recognize_the_empire.2.desc
	picture = GFX_report_event_generic_italian_celebration

	is_triggered_only = yes

	option = { #Yay
		name = BBA_italy_recognize_the_empire.2.a

		add_opinion_modifier = { 
			target = FROM
			modifier = ITA_recognized_the_empire
		}
		add_political_power = 20
		ITA_recognize_the_empire_effect = yes
	}
}

#ITALY RECEIVES THE IMPERIAL REJECTION THEY SO FEAR
country_event = {
	id = BBA_italy_recognize_the_empire.3
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_recognize_the_empire.3 FROM = [From.GetName]" }
	title = BBA_italy_recognize_the_empire.3.t
	desc = BBA_italy_recognize_the_empire.3.desc
	picture = GFX_report_event_generic_rally2 

	is_triggered_only = yes

	option = { #Ouch
		name = BBA_italy_recognize_the_empire.3.a

		add_opinion_modifier = { 
			target = FROM
			modifier = ITA_dismissed_the_empire
		}
	}
}

#######################################################
###FASCIST COUNTRY RECEIVES ITALIAN MILITARY SUPPORT###
#######################################################
country_event = {
	id = BBA_italy_sends_military_support.1
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_sends_military_support.1 FROM = [From.GetName]" }
	title = BBA_italy_sends_military_support.1.t
	desc = BBA_italy_sends_military_support.1.desc
	picture = GFX_report_event_generic_truck 

	is_triggered_only = yes

	option = { #Yay
		name = BBA_italy_sends_military_support.1.a

		ROOT = {
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 2500
				producer = FROM
			}
			add_equipment_to_stockpile = {
				type = support_equipment
				amount = 250
				producer = FROM
			}
			add_opinion_modifier = {
				target = FROM
				modifier = SOV_sent_us_weapons
			}
		}
	}
}



 ######   #######  ##     ## ##     ## ##     ## ##    ## ####  ######  ######## 
##    ## ##     ## ###   ### ###   ### ##     ## ###   ##  ##  ##    ##    ##    
##       ##     ## #### #### #### #### ##     ## ####  ##  ##  ##          ##    
##       ##     ## ## ### ## ## ### ## ##     ## ## ## ##  ##   ######     ##    
##       ##     ## ##     ## ##     ## ##     ## ##  ####  ##        ##    ##    
##    ## ##     ## ##     ## ##     ## ##     ## ##   ###  ##  ##    ##    ##    
 ######   #######  ##     ## ##     ##  #######  ##    ## ####  ######     ##    


#Communist Leadership - Event for ITA
country_event = {
	id = BBA_italy_communist_events.01
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_communist_events.01 FROM = [From.GetName]" }
	title = BBA_italy_communist_events.01.t
	desc = BBA_italy_communist_events.01.desc
	picture = GFX_report_event_communists_in_riga

	is_triggered_only = yes

	#GRAMSCI (COMMIE)
	option = {
		name = BBA_italy_communist_events.01.a

		ai_chance = {
			base = 3
		}

		trigger = {
			has_completed_focus = ITA_liberate_gramsci
		}

		hidden_effect = {
			if = {
				limit = {
					ITA_comitato_di_liberazione_nazionale = {
						has_ideology = marxism
					}
				}
				remove_country_leader_role = {
					character = ITA_comitato_di_liberazione_nazionale
					ideology = marxism
				}
			}
			if = {
				limit = {
					ITA_comitato_di_liberazione_nazionale = {
						has_ideology = socialism
					}
				}
				remove_country_leader_role = {
					character = ITA_comitato_di_liberazione_nazionale
					ideology = socialism
				}
			}
		}
		ITA_add_country_leader_role_to_gramsci = yes		
	}

	#TOGLIATTI (COMMUNIST)
	option = {
		name = BBA_italy_communist_events.01.b

		ai_chance = {
			base = 1
		}

		hidden_effect = {
			remove_country_leader_role = {
				character = ITA_comitato_di_liberazione_nazionale
				ideology = marxism
			} 
		}
		promote_character = ITA_palmiro_togliatti
	}

	#PERTINI (SOCIALIST)
	option = {
		name = BBA_italy_communist_events.01.c

		ai_chance = {
			base = 1
		}

		hidden_effect = {
			remove_country_leader_role = {
				character = ITA_comitato_di_liberazione_nazionale
				ideology = marxism
			} 
		}
		promote_character = ITA_sandro_pertini
		set_party_name = {
			ideology = communism
			name = ITA_partito_socialista_italiano
			long_name = ITA_partito_socialista_italiano_long
		}
	}
}

# The New Italian Republic calls for aid - Event for communist an socialist countries
country_event = {
	id = BBA_italy_communist_events.02
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_communist_events.02 FROM = [From.GetName]" }
	title = BBA_italy_communist_events.02.t
	desc = BBA_italy_communist_events.02.desc
	picture = GFX_report_event_generic_rifles

	is_triggered_only = yes

	#Send Help
	option = {
		name = BBA_italy_communist_events.02.a

		ai_chance = {
			base = 10
			modifier = {
				factor = 2
				has_opinion = {
					target = FROM
					value > 25
				}
			}
			modifier = {
				factor = 2
				has_opinion = {
					target = FROM
					value > 50
				}
			}
		}

		custom_effect_tooltip = ITA_country_supports_new_italian_government_tt
		hidden_effect = {
			FROM = {
				add_to_variable = { ITA_infantry_equipment_from_leftist_aid = 1000 }
				add_to_variable = { ITA_support_equipment_from_leftist_aid = 100 }
				add_to_variable = { ITA_trucks_from_leftist_aid = 50 }
				add_to_variable = { ITA_consumer_goods_from_leftist_aid = -0.005 }
			}
		}
		FROM = {
			add_opinion_modifier = {
				target = ROOT
				modifier = ITA_supported_the_new_government
			}
		}
	}

	#Nej tack my comrade
	option = {
		name = BBA_italy_communist_events.02.b

		ai_chance = {
			base = 10
			modifier = {
				factor = 0
				is_subject_of = FROM
			}
		}


	}
}

# International Aid arrives! - Event dispatcher
country_event = {
	id = BBA_italy_communist_events.300
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_communist_events.300 FROM = [From.GetName]" }
	title = BBA_italy_communist_events.300.t
	desc = BBA_italy_communist_events.300.desc

	hidden = yes

	is_triggered_only = yes

	immediate = {
		if = { #People are supporting
			limit = {
				check_variable = { ITA_trucks_from_leftist_aid > 0 }
			}
			country_event = BBA_italy_communist_events.03
		}
		else = { #No one supported T_T
			country_event = BBA_italy_communist_events.04
		}
	}
}

# International Aid arrives! - Event for ITA
country_event = {
	id = BBA_italy_communist_events.03
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_communist_events.03 FROM = [From.GetName]" }
	title = BBA_italy_communist_events.03.t
	desc = BBA_italy_communist_events.03.desc
	picture = GFX_report_event_generic_rifles

	is_triggered_only = yes

	#Send Help
	option = {
		name = BBA_italy_communist_events.03.a

		custom_effect_tooltip = ITA_international_support_arrives_tt
		add_equipment_to_stockpile = { 
			type = infantry_equipment
			amount = ROOT.ITA_infantry_equipment_from_leftist_aid
			producer = ROOT
		}
		add_equipment_to_stockpile = { 
			type = support_equipment
			amount = ROOT.ITA_support_equipment_from_leftist_aid
			producer = ROOT
		}
		add_equipment_to_stockpile = { 
			type = motorized_equipment
			amount = ROOT.ITA_trucks_from_leftist_aid
			producer = ROOT
		}
		custom_effect_tooltip = ITA_international_support_consumer_goods_tt
		hidden_effect = {
			add_dynamic_modifier = { modifier = ITA_international_aid days = 730 } #WARNING this days value needs to match the one in the tooltip ITA_international_support_arrives_tt
		}
	}
}

# No International Aid received - Event for ITA
country_event = {
	id = BBA_italy_communist_events.04
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_communist_events.04 FROM = [From.GetName]" }
	title = BBA_italy_communist_events.04.t
	desc = BBA_italy_communist_events.04.desc
	picture = GFX_report_event_generic_rifles

	is_triggered_only = yes

	#Send Help
	option = {
		name = BBA_italy_communist_events.04.a

		add_political_power = 25
	}
}

# Military Cooperation - Event for Italian allies
country_event = {
	id = BBA_italy_communist_events.05
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_communist_events.05 FROM = [From.GetName]" }
	title = BBA_italy_communist_events.05.t
	desc = BBA_italy_communist_events.05.desc
	picture = GFX_report_event_soldiers_marching

	is_triggered_only = yes

	#Military Cooperation
	option = {
		name = BBA_italy_communist_events.05.a

		if = {
			limit = {
				is_faction_leader = yes
			}
			army_experience = 25
			air_experience = 25
			navy_experience = 25

			add_doctrine_cost_reduction = {
				name = ITA_army_modernization
				cost_reduction = 1
				uses = 1
				category = land_doctrine
			}
		}
		else = {
			army_experience = 15
			air_experience = 15
			navy_experience = 15

			add_doctrine_cost_reduction = {
				name = ITA_army_modernization
				cost_reduction = 0.5
				uses = 1
				category = land_doctrine
			}
		}
	}
}

# United Anarchist Confederations - Event for SPC
country_event = {
	id = BBA_italy_communist_events.06
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_communist_events.06 FROM = [From.GetName]" }
	title = BBA_italy_communist_events.06.t
	desc = BBA_italy_communist_events.06.desc
	picture = GFX_report_event_spr_anarchists

	is_triggered_only = yes

	#Accept
	option = {
		name = BBA_italy_communist_events.06.a

		ai_chance = {
			base = 1
		}

		add_political_power = 35

		effect_tooltip = {
			give_guarantee = FROM
			FROM = { give_guarantee = ROOT }

			add_opinion_modifier = {
				target = FROM
				modifier = ITA_united_anarchist_confederations
			}
			FROM = {
				add_opinion_modifier = {
					target = ROOT
					modifier = ITA_united_anarchist_confederations
				}
			}
		}

		hidden_effect = {
			country_event = { id = BBA_italy_communist_events.07 hours = 24 random_hours = 12 }
		}
	}

	#Refuse
	option = {
		name = BBA_italy_communist_events.06.b

		ai_chance = {
			base = 0
		}

		hidden_effect = {
			country_event = { id = BBA_italy_communist_events.08 hours = 24 random_hours = 12 }
		}
	}
}

# United Anarchist Confederations - SPC Accepts - Event for ITA
country_event = {
	id = BBA_italy_communist_events.07
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_communist_events.07 FROM = [From.GetName]" }
	title = BBA_italy_communist_events.07.t
	desc = BBA_italy_communist_events.07.desc
	picture = GFX_report_event_spr_anarchists

	is_triggered_only = yes

	#Ok
	option = {
		name = BBA_italy_communist_events.06.a #intentional

		add_political_power = 35

		give_guarantee = FROM
		FROM = { give_guarantee = ROOT }

		add_opinion_modifier = {
			target = FROM
			modifier = ITA_united_anarchist_confederations
		}
		FROM = {
			add_opinion_modifier = {
				target = ROOT
				modifier = ITA_united_anarchist_confederations
			}
		}
		hidden_effect = {
			news_event = { id = bba_news.111 hours = 24 random_hours = 12 }
		}
	}
}

# United Anarchist Confederations - SPC Refuses - Event for ITA
country_event = {
	id = BBA_italy_communist_events.08
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_communist_events.08 FROM = [From.GetName]" }
	title = BBA_italy_communist_events.08.t
	desc = BBA_italy_communist_events.08.desc
	picture = GFX_report_event_spr_anarchists

	is_triggered_only = yes

	#Ok
	option = {
		name = BBA_italy_communist_events.08.a

		
	}
}

#Gramsci gets a new leader trait
country_event = {
	id = BBA_italy_communist_events.09
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_communist_events.09 FROM = [From.GetName]" }
	title = BBA_italy_communist_events.09.t
	desc = BBA_italy_communist_events.09.desc
	picture = GFX_report_event_ITA_gramsci

	fire_only_once = yes

	is_triggered_only = yes

	trigger = {
		has_character = ITA_antonio_gramsci
	}

	#Ok
	option = {
		name = BBA_italy_communist_events.09.a
		if = {	
			limit = {
				ITA_antonio_gramsci = { 
					is_country_leader = yes
				}
			}
			ITA_antonio_gramsci = {
				swap_country_leader_traits = {
					remove = indisposed_political_scientist
					add = cultural_hegemony_theorist
				}
			}
		}
		else = {
			effect_tooltip = {
				remove_trait = {
					character = ITA_antonio_gramsci
					ideology = marxism
					trait = indisposed_political_scientist
				}
				add_trait = {
					character = ITA_antonio_gramsci
					ideology = marxism
					trait = cultural_hegemony_theorist
				}
			}
			hidden_effect = {
				ITA_antonio_gramsci = {
					set_character_flag = ITA_improve_gramscis_trait_flag
				}
			}
		}
	}
}


########  ######## ##     ##  #######   ######  ########     ###    ######## ####  ######  
##     ## ##       ###   ### ##     ## ##    ## ##     ##   ## ##      ##     ##  ##    ## 
##     ## ##       #### #### ##     ## ##       ##     ##  ##   ##     ##     ##  ##       
##     ## ######   ## ### ## ##     ## ##       ########  ##     ##    ##     ##  ##       
##     ## ##       ##     ## ##     ## ##       ##   ##   #########    ##     ##  ##       
##     ## ##       ##     ## ##     ## ##    ## ##    ##  ##     ##    ##     ##  ##    ## 
########  ######## ##     ##  #######   ######  ##     ## ##     ##    ##    ####  ######  


#Democratic Leadership - Event for ITA
country_event = {
	id = BBA_italy_democratic_events.01
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_democratic_events.01 FROM = [From.GetName]" }
	title = BBA_italy_democratic_events.01.t
	desc = BBA_italy_democratic_events.01.desc
	picture = GFX_report_event_ITA_democratic_parlament

	is_triggered_only = yes

	#PARRI (Popolare)
	option = {
		name = BBA_italy_democratic_events.01.a

		ai_chance = {
			base = 1
		}

		hidden_effect = {
			if = {
				limit = {
					ITA_comitato_di_liberazione_nazionale = {
						has_ideology = marxism
					}
				}
				remove_country_leader_role = {
					character = ITA_comitato_di_liberazione_nazionale
					ideology = marxism
				}
			}
			if = {
				limit = {
					ITA_comitato_di_liberazione_nazionale = {
						has_ideology = socialism
					}
				}
				remove_country_leader_role = {
					character = ITA_comitato_di_liberazione_nazionale
					ideology = socialism
				}
			}
		}
		promote_character = ITA_ferruccio_parri
	}

	#BONOMI (Lavoro)
	option = {
		name = BBA_italy_democratic_events.01.b

		ai_chance = {
			base = 1
		}

		hidden_effect = {
			remove_country_leader_role = {
				character = ITA_comitato_di_liberazione_nazionale
				ideology = marxism
			} 
		}
		promote_character = ITA_ivanoe_bonomi
		set_party_name = {
			ideology = democratic
			name = ITA_partito_democratico_del_lavoro
			long_name = ITA_partito_democratico_del_lavoro_long
		}
	}
}

#Scientific Cooperation - Event for Italian allies
country_event = {
	id = BBA_italy_democratic_events.02
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_democratic_events.02 FROM = [From.GetName]" }
	title = BBA_italy_democratic_events.02.t
	desc = BBA_italy_democratic_events.02.desc
	picture = GFX_report_event_generic_read_write

	is_triggered_only = yes

	#
	option = {
		name = BBA_italy_democratic_events.02.a

		add_ideas = ITA_scientific_cooperation_ns
	}
}

#Mafia Spawns - Event for ITA
country_event = {
	id = BBA_italy_democratic_events.03
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_democratic_events.03 FROM = [From.GetName]" }
	title = BBA_italy_democratic_events.03.t
	desc = BBA_italy_democratic_events.03.desc
	picture = GFX_report_event_gathering_protest

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			set_country_flag = ITA_country_is_aware_of_mafia_flag
			country_event = { id = BBA_italy_democratic_events.04 days = 40 random_days = 20 }
		}
	}

	#Su vieja
	option = {
		name = BBA_italy_democratic_events.03.a

		if = { #SICILIA PRIO
			limit = {
				SIC = {
					all_core_state = {
						is_controlled_by = ROOT
					}
				}
			}
			every_state = {
				limit = {
					is_core_of = SIC
				}
				ITA_add_correct_mafia_rising_modifier_version = yes
				set_variable = { ROOT.ITA_mafia_epicenter_state = THIS }
			}
		}
		else_if = { #CAMPANIA next - Camorra Napolitana
			limit = {
				NAP = {
					all_core_state = {
						is_controlled_by = ROOT
					}
				}
			}
			every_state = {
				limit = {
					is_core_of = NAP
				}
				ITA_add_correct_mafia_rising_modifier_version = yes
				set_variable = { ROOT.ITA_mafia_epicenter_state = THIS }
			}
		}
		else_if = { #CALABRIA
			limit = {
				CAL = {
					all_core_state = {
						is_controlled_by = ROOT
					}
				}
			}
			every_state = {
				limit = {
					is_core_of = CAL
				}
				ITA_add_correct_mafia_rising_modifier_version = yes
				set_variable = { ROOT.ITA_mafia_epicenter_state = THIS }
			}
		}
		else = { #FALLBACK
			random_state = {
				limit = {
					is_core_of = ITA
					controller = {
						original_tag = ITA
					}
				}
				ITA_add_correct_mafia_rising_modifier_version = yes
				set_variable = { ROOT.ITA_mafia_epicenter_state = THIS }
			}
		}
	}
}

#Mafia Spreads - HIDDEN event for ITA to add Mafia state modifier to a new state
country_event = {
	id = BBA_italy_democratic_events.04
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_democratic_events.04 FROM = [From.GetName]" }

	hidden = yes
	is_triggered_only = yes

	trigger = {
		original_tag = ITA
		has_civil_war = yes
	}

	immediate = {
		hidden_effect = {
			if = {
				limit = {
					any_state = {
						is_core_of = ITA
						ITA_state_has_any_version_of_mafia_rising_modifier = no
						any_neighbor_state = {
							state = ITA_mafia_epicenter_state
						}
					}
				}
				var:ITA_mafia_epicenter_state = {
					random_neighbor_state = {
						limit = {
							is_core_of = ITA
							ITA_state_has_any_version_of_mafia_rising_modifier = no
						}
						ITA_add_correct_mafia_rising_modifier_version = yes
						if= {
							limit = {
								controller = {
									NOT = { has_country_flag = ITA_country_is_aware_of_mafia_flag }
								}
							}
							controller = { country_event = { id = BBA_italy_democratic_events.05 hours = 1 } }
						}
					}
				}
			}
			else = {
				random_state = {
					limit = {
						is_core_of = ITA
						ITA_state_has_any_version_of_mafia_rising_modifier = no
					}
					prioritize = { 934 1410 } #CAMPANIA CALABRIA
					ITA_add_correct_mafia_rising_modifier_version = yes
					if= {
						limit = {
							controller = {
								NOT = { has_country_flag = ITA_country_is_aware_of_mafia_flag }
							}
						}
						controller = { country_event = { id = BBA_italy_democratic_events.05 hours = 1 } }
					}
				}
			}

			#REPEAT EVENT
			if = {	
				limit = {
					any_state = {
						is_core_of = ITA
						ITA_state_has_any_version_of_mafia_rising_modifier = no
					}
				}
				country_event = { id = BBA_italy_democratic_events.04 days = 40 random_days = 20 }
			}
		}
	}
}

#Mafia Abroad - Event for people getting Mafia
country_event = {
	id = BBA_italy_democratic_events.05
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_democratic_events.05 FROM = [From.GetName]" }
	title = BBA_italy_democratic_events.05.t
	desc = BBA_italy_democratic_events.05.desc
	picture = GFX_report_event_gathering_protest

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			set_country_flag = ITA_country_is_aware_of_mafia_flag
		}
	}

	#Wtf
	option = {
		name = BBA_italy_democratic_events.05.a

		custom_effect_tooltip = generic_states_affected_tt
		effect_tooltip = {
			every_controlled_state = { #Only for tooltip purposes, effects applied in the event above
				limit = {
					ITA_state_has_any_version_of_mafia_rising_modifier = yes
				}
				ITA_add_correct_mafia_rising_modifier_version = yes
			}
		}
	}
}


   ###    ##    ## ######## ####          ######   #######  ##        #######  ##    ## ####    ###    ##       ####  ######  ##     ## 
  ## ##   ###   ##    ##     ##          ##    ## ##     ## ##       ##     ## ###   ##  ##    ## ##   ##        ##  ##    ## ###   ### 
 ##   ##  ####  ##    ##     ##          ##       ##     ## ##       ##     ## ####  ##  ##   ##   ##  ##        ##  ##       #### #### 
##     ## ## ## ##    ##     ##  ####### ##       ##     ## ##       ##     ## ## ## ##  ##  ##     ## ##        ##   ######  ## ### ## 
######### ##  ####    ##     ##          ##       ##     ## ##       ##     ## ##  ####  ##  ######### ##        ##        ## ##     ## 
##     ## ##   ###    ##     ##          ##    ## ##     ## ##       ##     ## ##   ###  ##  ##     ## ##        ##  ##    ## ##     ## 
##     ## ##    ##    ##    ####          ######   #######  ########  #######  ##    ## #### ##     ## ######## ####  ######  ##     ## 



# Italy Condemns Colonialism - Event for Colonialist pigs
country_event = {
	id = BBA_italy_anti_colonialism_events.20
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_anti_colonialism_events.20 FROM = [From.GetName]" }
	title = BBA_italy_anti_colonialism_events.20.t
	desc = BBA_italy_anti_colonialism_events.20.desc
	picture = GFX_report_event_journalists_speech

	is_triggered_only = yes

	#Release all our stuff in Africa
	option = {
		name = BBA_italy_anti_colonialism_events.20.a

		ai_chance = {
			base = 0
			modifier = {
				add = 1
				strength_ratio = {
					tag = FROM
					ratio < 0.9
				}
			}
			modifier = {
				add = 5
				strength_ratio = {
					tag = FROM
					ratio < 0.5
				}
			}
			modifier = {
				add = 2
				has_government = communism
			}
			modifier = {
				add = -2
				is_in_faction = yes
			}
		}

		every_occupied_country = {
			limit = {
				capital_scope = {
					is_on_continent = africa
				}
			}
			ROOT = { release_puppet_on_controlled = PREV }
		}
		FROM = { set_country_flag = ITA_someone_decolonized_flag } #For loc purposes
	}

	#Are you guys crazy?!
	option = {
		name = BBA_italy_anti_colonialism_events.20.b

		ai_chance = {
			base = 5
		}

		set_country_flag = ITA_refused_decolonization_flag

		effect_tooltip = {
			every_owned_state = {
				limit = {
					is_on_continent = africa
					NOT = { is_core_of = owner }
				}
				add_dynamic_modifier = { modifier = ITA_anti_colonialism_sentiment }
			}
		}

		if = {
			limit = {
				FROM = { #Need to scope to FROM to work with scripted trigger
					ROOT = {
						country_can_be_reasonable_target_of_wargoal = yes
					}
				}
			}
			custom_effect_tooltip = maybe_war_tt
		}
	}
}

# Italy Condemns Colonialism - Country/ies refused - Event for ITA (After everyone decided what to do)
country_event = {
	id = BBA_italy_anti_colonialism_events.21
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_anti_colonialism_events.21 FROM = [From.GetName]" }
	title = BBA_italy_anti_colonialism_events.21.t
	desc = BBA_italy_anti_colonialism_events.21.desc
	picture = GFX_report_event_journalists_speech

	is_triggered_only = yes

	trigger = {
		original_tag = ITA
		any_other_country = { has_country_flag = ITA_refused_decolonization_flag }
	}

	#Our work here is done
	option = {
		name = BBA_italy_anti_colonialism_events.21.a

		ai_chance = {
			base = 1
		}

		every_other_country = {
			limit = {
				has_country_flag = ITA_refused_decolonization_flag
			}
			every_owned_state = {
				limit = {
					is_on_continent = africa
					NOT = { is_core_of = owner }
				}
				add_dynamic_modifier = { modifier = ITA_anti_colonialism_sentiment }
			}
		}

		hidden_effect = {
			if = {
				limit = {
					has_country_flag = ITA_someone_decolonized_flag
				}
				clr_country_flag = ITA_someone_decolonized_flag
			}
			#if = { #Don't clear this it's used to clear the dynamic modifier when appropriate
			#	limit = {
			#		any_other_country = {
			#			has_country_flag = ITA_refused_decolonization_flag
			#		}
			#	}
			#	clr_country_flag = ITA_refused_decolonization_flag
			#}
		}
	}

	#WAR
	option = {
		name = BBA_italy_anti_colonialism_events.21.b

		ai_chance = {
			base = 10
		}

		trigger = {
			any_other_country = {
				has_country_flag = ITA_refused_decolonization_flag
			}
		}

		every_other_country = {
			limit = {
				has_country_flag = ITA_refused_decolonization_flag
			}
			every_owned_state = {
				limit = {
					is_on_continent = africa
					NOT = { is_core_of = owner }
				}
				add_dynamic_modifier = { modifier = ITA_anti_colonialism_sentiment }
			}
			if = {
				limit = {
					country_can_be_reasonable_target_of_wargoal = yes
				}
				ROOT = {
					create_wargoal = {
						type = annex_everything
						target = PREV
					}
				}
			}
			#clr_country_flag = ITA_refused_decolonization_flag #Don't clear this it's used to clear the dynamic modifier when appropriate
		}

		hidden_effect = {
			if = {
				limit = {
					has_country_flag = ITA_someone_decolonized_flag
				}
				clr_country_flag = ITA_someone_decolonized_flag
			}
		}
	}
}

#ABOLISH COLONIALISM - Hidden Effect to dispatch appropriate region-wide events
country_event = {
	id = BBA_italy_anti_colonialism_events.51
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_anti_colonialism_events.51 FROM = [From.GetName]" }

	is_triggered_only = yes
	hidden = yes

	immediate = {
		set_variable = { ITA_abolish_colonies_default_delay = 10 }
		set_variable = { ITA_abolish_colonies_event_delay = 2 }

		#GET AVERAGE COMPLIANCE OF REGIONS

		#NORTH AFRICA
		if = {
			limit = {
				any_controlled_state = {
					ITA_state_is_in_north_africa = yes
				}
			}
			set_variable = { state_count = 0 }
			set_variable = { total_compliance = 0 }
			set_variable = { average_compliance = 0 }
			every_controlled_state = {
				limit = {
					ITA_state_is_in_north_africa = yes
				}
				add_to_array = {
					array = ROOT.ITA_states_to_check
					#value = THIS #optional, if not defined adds scope
				}
				add_to_variable = { ROOT.state_count = 1 }
				add_to_variable = { ROOT.total_compliance = THIS.compliance }
				log = "Total states: [?ROOT.state_count]"
				log = "Total compliance: [?ROOT.total_compliance]"
			}

			set_variable = { average_compliance = total_compliance }
			divide_variable = { average_compliance = state_count }
			log = "Average Compliance is [?average_compliance]"

			set_variable = { ITA_compliance_in_north_africa = average_compliance }

			random_list = {#NORTH AFRICA
				40 = {
					modifier = {
						factor = 2
						check_variable = { ITA_compliance_in_north_africa > 45 }
					}
					modifier = {
						factor = 2
						check_variable = { ITA_compliance_in_north_africa > 60 }
					}
					modifier = {
						add = 10
						has_completed_focus = ITA_develop_libya
					}
					modifier = {
						add = 10
						has_completed_focus = ITA_regional_development
						has_completed_focus = ITA_develop_libya
					}
					modifier = {
						add = 10
						has_completed_focus = ITA_litoranea_balbo
					}
					modifier = {
						add = 10
						has_completed_focus = ITA_via_della_vittoria
					}
					modifier = {
						add = 10
						has_completed_focus = ITA_prospect_for_oil
					}
					modifier = {
						add = 10
						has_completed_focus = ITA_libyan_refineries
					}
					modifier = {
						add = 10
						has_completed_focus = ITA_libyan_railway
					}
					modifier = {
						add = 5
						has_completed_focus = ITA_improve_overseas_naval_bases
					}
					country_event = { id = BBA_italy_anti_colonialism_events.52 days = ITA_abolish_colonies_event_delay } #accepts
				} 
				60 = {
					country_event = { id = BBA_italy_anti_colonialism_events.53 days = ITA_abolish_colonies_event_delay } #refuses
				}
			}
			#Increase delay for next events
			add_to_variable = { ITA_abolish_colonies_event_delay = ITA_abolish_colonies_default_delay }
		}


		#WEST AFRICA
		if = {
			limit = {
				any_controlled_state = {
					ITA_state_is_in_west_africa = yes
				}
			}
			set_variable = { state_count = 0 }
			set_variable = { total_compliance = 0 }
			set_variable = { average_compliance = 0 }
			every_controlled_state = {
				limit = {
					ITA_state_is_in_west_africa = yes
				}
				add_to_array = {
					array = ROOT.ITA_states_to_check
					#value = THIS #optional, if not defined adds scope
				}
				add_to_variable = { ROOT.state_count = 1 }
				add_to_variable = { ROOT.total_compliance = THIS.compliance }
				log = "Total states: [?ROOT.state_count]"
				log = "Total compliance: [?ROOT.total_compliance]"
			}

			set_variable = { average_compliance = total_compliance }
			divide_variable = { average_compliance = state_count }
			log = "Average Compliance is [?average_compliance]"

			set_variable = { ITA_compliance_in_west_africa = average_compliance }

			random_list = {#WEST AFRICA
				40 = {
					modifier = {
						factor = 2
						check_variable = { ITA_compliance_in_west_africa > 45 }
					}
					modifier = {
						factor = 2
						check_variable = { ITA_compliance_in_west_africa > 60 }
					}
					modifier = {
						add = 10
						OR = {
							has_completed_focus = ITA_united_anarchist_confederations
							has_completed_focus = ITA_italia_libera
						}
					}
					modifier = {
						add = 10
						OR = {
							has_completed_focus = ITA_il_sol_dell_avvenire
							has_completed_focus = ITA_peace_preservation
						}
					}
					country_event = { id = BBA_italy_anti_colonialism_events.56 days = ITA_abolish_colonies_event_delay } #accepts
				} 
				60 = {
					country_event = { id = BBA_italy_anti_colonialism_events.57 days = ITA_abolish_colonies_event_delay } #refuses
				}
			}
			#Increase delay for next events
			add_to_variable = { ITA_abolish_colonies_event_delay = ITA_abolish_colonies_default_delay }
		}

		#MIDDLE EAST
		if = {
			limit = {
				any_controlled_state = {
					ITA_state_is_in_middle_east = yes
				}
			}
			set_variable = { state_count = 0 }
			set_variable = { total_compliance = 0 }
			set_variable = { average_compliance = 0 }
			every_controlled_state = {
				limit = {
					ITA_state_is_in_middle_east = yes
				}
				add_to_array = {
					array = ROOT.ITA_states_to_check
					#value = THIS #optional, if not defined adds scope
				}
				add_to_variable = { ROOT.state_count = 1 }
				add_to_variable = { ROOT.total_compliance = THIS.compliance }
				log = "Total states: [?ROOT.state_count]"
				log = "Total compliance: [?ROOT.total_compliance]"
			}

			set_variable = { average_compliance = total_compliance }
			divide_variable = { average_compliance = state_count }
			log = "Average Compliance is [?average_compliance]"

			set_variable = { ITA_compliance_in_middle_east = average_compliance }

			random_list = {#MIDDLE EAST
				40 = {
					modifier = {
						factor = 2
						check_variable = { ITA_compliance_in_middle_east > 45 }
					}
					modifier = {
						factor = 2
						check_variable = { ITA_compliance_in_middle_east > 60 }
					}
					modifier = {
						add = 10
						OR = {
							has_completed_focus = ITA_united_anarchist_confederations
							has_completed_focus = ITA_italia_libera
						}
					}
					modifier = {
						add = 10
						OR = {
							has_completed_focus = ITA_il_sol_dell_avvenire
							has_completed_focus = ITA_peace_preservation
						}
					}
					country_event = { id = BBA_italy_anti_colonialism_events.62 days = ITA_abolish_colonies_event_delay } #accepts
				} 
				60 = {
					country_event = { id = BBA_italy_anti_colonialism_events.63 days = ITA_abolish_colonies_event_delay } #refuses
				}
			}
			#Increase delay for next events
			add_to_variable = { ITA_abolish_colonies_event_delay = ITA_abolish_colonies_default_delay }
		}

	#MM: Anything outside of Africa and Middle East commented out for now.

#		#ASIA
#		if = {
#			limit = {
#				any_controlled_state = {
#					ITA_state_is_in_asia = yes
#				}
#			}
#			set_variable = { state_count = 0 }
#			set_variable = { total_compliance = 0 }
#			set_variable = { average_compliance = 0 }
#			every_controlled_state = {
#				limit = {
#					ITA_state_is_in_asia = yes
#				}
#				add_to_array = {
#					array = ROOT.ITA_states_to_check
#					#value = THIS #optional, if not defined adds scope
#				}
#				add_to_variable = { ROOT.state_count = 1 }
#				add_to_variable = { ROOT.total_compliance = THIS.compliance }
#				log = "Total states: [?ROOT.state_count]"
#				log = "Total compliance: [?ROOT.total_compliance]"
#			}
#
#			set_variable = { average_compliance = total_compliance }
#			divide_variable = { average_compliance = state_count }
#			log = "Average Compliance is [?average_compliance]"
#
#			set_variable = { ITA_compliance_in_asia = average_compliance }
#
#			random_list = {#ASIA
#				40 = {
#					modifier = {
#						factor = 2
#						check_variable = { ITA_compliance_in_asia > 45 }
#					}
#					modifier = {
#						factor = 2
#						check_variable = { ITA_compliance_in_asia > 60 }
#					}
#					modifier = {
#						add = 10
#						OR = {
#							has_completed_focus = ITA_united_anarchist_confederations
#							has_completed_focus = ITA_italia_libera
#						}
#					}
#					modifier = {
#						add = 10
#						OR = {
#							has_completed_focus = ITA_il_sol_dell_avvenire
#							has_completed_focus = ITA_peace_preservation
#						}
#					}
#					country_event = { id = BBA_italy_anti_colonialism_events.64 days = ITA_abolish_colonies_event_delay } #accepts
#				} 
#				60 = {
#					country_event = { id = BBA_italy_anti_colonialism_events.65 days = ITA_abolish_colonies_event_delay } #refuses
#				}
#			}
#			#Increase delay for next events
#			add_to_variable = { ITA_abolish_colonies_event_delay = ITA_abolish_colonies_default_delay }
#		}
#
#		#LATIN AMERICA
#		if = {
#			limit = {
#				any_controlled_state = {
#					ITA_state_is_in_latin_america = yes
#				}
#			}
#			set_variable = { state_count = 0 }
#			set_variable = { total_compliance = 0 }
#			set_variable = { average_compliance = 0 }
#			every_controlled_state = {
#				limit = {
#					ITA_state_is_in_latin_america = yes
#				}
#				add_to_array = {
#					array = ROOT.ITA_states_to_check
#					#value = THIS #optional, if not defined adds scope
#				}
#				add_to_variable = { ROOT.state_count = 1 }
#				add_to_variable = { ROOT.total_compliance = THIS.compliance }
#				log = "Total states: [?ROOT.state_count]"
#				log = "Total compliance: [?ROOT.total_compliance]"
#			}
#
#			set_variable = { average_compliance = total_compliance }
#			divide_variable = { average_compliance = state_count }
#			log = "Average Compliance is [?average_compliance]"
#
#			set_variable = { ITA_compliance_in_latin_america = average_compliance }
#
#			random_list = {#LATIN AMERICA
#				40 = {
#					modifier = {
#						factor = 2
#						check_variable = { ITA_compliance_in_latin_america > 45 }
#					}
#					modifier = {
#						factor = 2
#						check_variable = { ITA_compliance_in_latin_america > 60 }
#					}
#					modifier = {
#						add = 10
#						OR = {
#							has_completed_focus = ITA_united_anarchist_confederations
#							has_completed_focus = ITA_italia_libera
#						}
#					}
#					modifier = {
#						add = 10
#						OR = {
#							has_completed_focus = ITA_il_sol_dell_avvenire
#							has_completed_focus = ITA_peace_preservation
#						}
#					}
#					country_event = { id = BBA_italy_anti_colonialism_events.66 days = ITA_abolish_colonies_event_delay } #accepts
#				} 
#				60 = {
#					country_event = { id = BBA_italy_anti_colonialism_events.67 days = ITA_abolish_colonies_event_delay } #refuses
#				}
#			}
#			#Increase delay for next events
#			add_to_variable = { ITA_abolish_colonies_event_delay = ITA_abolish_colonies_default_delay }
#		}
#
#		#OCEANIA
#		if = {
#			limit = {
#				any_controlled_state = {
#					ITA_state_is_in_oceania = yes
#				}
#			}
#			set_variable = { state_count = 0 }
#			set_variable = { total_compliance = 0 }
#			set_variable = { average_compliance = 0 }
#			every_controlled_state = {
#				limit = {
#					ITA_state_is_in_oceania = yes
#				}
#				add_to_array = {
#					array = ROOT.ITA_states_to_check
#					#value = THIS #optional, if not defined adds scope
#				}
#				add_to_variable = { ROOT.state_count = 1 }
#				add_to_variable = { ROOT.total_compliance = THIS.compliance }
#				log = "Total states: [?ROOT.state_count]"
#				log = "Total compliance: [?ROOT.total_compliance]"
#			}
#
#			set_variable = { average_compliance = total_compliance }
#			divide_variable = { average_compliance = state_count }
#			log = "Average Compliance is [?average_compliance]"
#
#			set_variable = { ITA_compliance_in_oceania = average_compliance }
#
#			random_list = {#OCEANIA
#				20 = {
#					modifier = {
#						factor = 2
#						check_variable = { ITA_compliance_in_oceania > 45 }
#					}
#					modifier = {
#						factor = 2
#						check_variable = { ITA_compliance_in_oceania > 60 }
#					}
#					modifier = {
#						add = 10
#						OR = {
#							has_completed_focus = ITA_united_anarchist_confederations
#							has_completed_focus = ITA_italia_libera
#						}
#					}
#					modifier = {
#						add = 10
#						OR = {
#							has_completed_focus = ITA_il_sol_dell_avvenire
#							has_completed_focus = ITA_peace_preservation
#						}
#					}
#					country_event = { id = BBA_italy_anti_colonialism_events.68 days = ITA_abolish_colonies_event_delay } #accepts
#				} 
#				60 = {
#					country_event = { id = BBA_italy_anti_colonialism_events.69 days = ITA_abolish_colonies_event_delay } #refuses
#				}
#			}
#			#Increase delay for next events
#			set_variable = { ITA_abolish_colonies_event_delay = 1 }
#		}
		#ITA_state_is_in_north_america #MM: Excluding North America (without Mexico) just like Europe is excluded
	}
}

# Abolish Colonialism - NORTH AFRICA ACCEPTS
country_event = {
	id = BBA_italy_anti_colonialism_events.52
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_anti_colonialism_events.52 FROM = [From.GetName]" }
	title = BBA_italy_anti_colonialism_events.52.t
	desc = BBA_italy_anti_colonialism_events.52.desc
	picture = GFX_report_event_generic_peaceful_annexation

	is_triggered_only = yes

	#Cool
	option = {
		name = BBA_italy_anti_colonialism_events.52.a

		every_controlled_state = {
			limit = {
				ITA_state_is_in_north_africa = yes
				NOT = { is_core_of = ROOT }
			}
			add_core_of = ROOT
		}
		every_owned_state = { #For resolving the decision of the region, only controlled states count. However, let's add owned states to the shopping cart
			limit = {
				ITA_state_is_in_north_africa = yes
				NOT = { is_core_of = ROOT }
			}
			add_core_of = ROOT
		}
	}
}

# Abolish Colonialism - NORTH AFRICA REJECTS
country_event = {
	id = BBA_italy_anti_colonialism_events.53
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_anti_colonialism_events.53 FROM = [From.GetName]" }
	title = BBA_italy_anti_colonialism_events.53.t
	desc = BBA_italy_anti_colonialism_events.53.desc
	picture = GFX_report_event_election_vote

	is_triggered_only = yes

	#Cool
	option = {
		name = BBA_italy_anti_colonialism_events.53.a

		custom_effect_tooltip = ITA_release_colonies_north_africa_tt
		hidden_effect = {
			release_on_controlled = MOR
			release_on_controlled = ALG
			release_on_controlled = TUN
			release_on_controlled = LBA
			release_on_controlled = EGY
		}
	}
}

# Abolish Colonialism - EAST AFRICA ACCEPTS
country_event = {
	id = BBA_italy_anti_colonialism_events.54
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_anti_colonialism_events.54 FROM = [From.GetName]" }
	title = BBA_italy_anti_colonialism_events.54.t
	desc = BBA_italy_anti_colonialism_events.54.desc
	picture = GFX_report_event_generic_peaceful_annexation

	is_triggered_only = yes

	#Cool
	option = {
		name = BBA_italy_anti_colonialism_events.52.a

		every_controlled_state = {
			limit = {
				ITA_state_is_in_east_africa = yes
				NOT = { is_core_of = ROOT }
			}
			add_core_of = ROOT
		}
		every_owned_state = { #For resolving the decision of the region, only controlled states count. However, let's add owned states to the shopping cart
			limit = {
				ITA_state_is_in_east_africa = yes
				NOT = { is_core_of = ROOT }
			}
			add_core_of = ROOT
		}
	}
}

# Abolish Colonialism - EAST AFRICA REJECTS
country_event = {
	id = BBA_italy_anti_colonialism_events.55
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_anti_colonialism_events.55 FROM = [From.GetName]" }
	title = BBA_italy_anti_colonialism_events.55.t
	desc = BBA_italy_anti_colonialism_events.55.desc
	picture = GFX_report_event_election_vote

	is_triggered_only = yes

	#Cool
	option = {
		name = BBA_italy_anti_colonialism_events.53.a

		custom_effect_tooltip = ITA_release_colonies_east_africa_tt
		
	}
}

# Abolish Colonialism - WEST AFRICA ACCEPTS
country_event = {
	id = BBA_italy_anti_colonialism_events.56
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_anti_colonialism_events.56 FROM = [From.GetName]" }
	title = BBA_italy_anti_colonialism_events.56.t
	desc = BBA_italy_anti_colonialism_events.56.desc
	picture = GFX_report_event_generic_peaceful_annexation

	is_triggered_only = yes

	#Cool
	option = {
		name = BBA_italy_anti_colonialism_events.52.a

		every_controlled_state = {
			limit = {
				ITA_state_is_in_west_africa = yes
				NOT = { is_core_of = ROOT }
			}
			add_core_of = ROOT
		}
		every_owned_state = { #For resolving the decision of the region, only controlled states count. However, let's add owned states to the shopping cart
			limit = {
				ITA_state_is_in_west_africa = yes
				NOT = { is_core_of = ROOT }
			}
			add_core_of = ROOT
		}
	}
}

# Abolish Colonialism - WEST AFRICA REJECTS
country_event = {
	id = BBA_italy_anti_colonialism_events.57
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_anti_colonialism_events.57 FROM = [From.GetName]" }
	title = BBA_italy_anti_colonialism_events.57.t
	desc = BBA_italy_anti_colonialism_events.57.desc
	picture = GFX_report_event_election_vote

	is_triggered_only = yes

	#Cool
	option = {
		name = BBA_italy_anti_colonialism_events.53.a

		custom_effect_tooltip = ITA_release_colonies_west_africa_tt
		hidden_effect = {
			
		}
	}
}

# Abolish Colonialism - CENTRAL AFRICA ACCEPTS
country_event = {
	id = BBA_italy_anti_colonialism_events.58
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_anti_colonialism_events.58 FROM = [From.GetName]" }
	title = BBA_italy_anti_colonialism_events.58.t
	desc = BBA_italy_anti_colonialism_events.58.desc
	picture = GFX_report_event_generic_peaceful_annexation

	is_triggered_only = yes

	#Cool
	option = {
		name = BBA_italy_anti_colonialism_events.52.a

		every_controlled_state = {
			limit = {
				ITA_state_is_in_central_africa = yes
				NOT = { is_core_of = ROOT }
			}
			add_core_of = ROOT
		}
		every_owned_state = { #For resolving the decision of the region, only controlled states count. However, let's add owned states to the shopping cart
			limit = {
				ITA_state_is_in_central_africa = yes
				NOT = { is_core_of = ROOT }
			}
			add_core_of = ROOT
		}
	}
}

# Abolish Colonialism - CENTRAL AFRICA REJECTS
country_event = {
	id = BBA_italy_anti_colonialism_events.59
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_anti_colonialism_events.59 FROM = [From.GetName]" }
	title = BBA_italy_anti_colonialism_events.59.t
	desc = BBA_italy_anti_colonialism_events.59.desc
	picture = GFX_report_event_election_vote

	is_triggered_only = yes

	#Cool
	option = {
		name = BBA_italy_anti_colonialism_events.53.a

		custom_effect_tooltip = ITA_release_colonies_central_africa_tt
		hidden_effect = {
			
		}
	}
}

# Abolish Colonialism - SOUTH AFRICA ACCEPTS
country_event = {
	id = BBA_italy_anti_colonialism_events.60
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_anti_colonialism_events.60 FROM = [From.GetName]" }
	title = BBA_italy_anti_colonialism_events.60.t
	desc = BBA_italy_anti_colonialism_events.60.desc
	picture = GFX_report_event_generic_peaceful_annexation

	is_triggered_only = yes

	#Cool
	option = {
		name = BBA_italy_anti_colonialism_events.52.a

		every_controlled_state = {
			limit = {
				ITA_state_is_in_south_africa = yes
				NOT = { is_core_of = ROOT }
			}
			add_core_of = ROOT
		}
		every_owned_state = { #For resolving the decision of the region, only controlled states count. However, let's add owned states to the shopping cart
			limit = {
				ITA_state_is_in_south_africa = yes
				NOT = { is_core_of = ROOT }
			}
			add_core_of = ROOT
		}
	}
}

# Abolish Colonialism - SOUTH AFRICA REJECTS
country_event = {
	id = BBA_italy_anti_colonialism_events.61
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_anti_colonialism_events.61 FROM = [From.GetName]" }
	title = BBA_italy_anti_colonialism_events.61.t
	desc = BBA_italy_anti_colonialism_events.61.desc
	picture = GFX_report_event_election_vote

	is_triggered_only = yes

	#Cool
	option = {
		name = BBA_italy_anti_colonialism_events.53.a

		custom_effect_tooltip = ITA_release_colonies_south_africa_tt
		hidden_effect = {
			
		}
	}
}

# Abolish Colonialism - MIDDLE EAST ACCEPTS
country_event = {
	id = BBA_italy_anti_colonialism_events.62
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_anti_colonialism_events.62 FROM = [From.GetName]" }
	title = BBA_italy_anti_colonialism_events.62.t
	desc = BBA_italy_anti_colonialism_events.62.desc
	picture = GFX_report_event_generic_peaceful_annexation

	is_triggered_only = yes

	#Cool
	option = {
		name = BBA_italy_anti_colonialism_events.52.a

		every_controlled_state = {
			limit = {
				ITA_state_is_in_middle_east = yes
				NOT = { is_core_of = ROOT }
			}
			add_core_of = ROOT
		}
		every_owned_state = { #For resolving the decision of the region, only controlled states count. However, let's add owned states to the shopping cart
			limit = {
				ITA_state_is_in_middle_east = yes
				NOT = { is_core_of = ROOT }
			}
			add_core_of = ROOT
		}
	}
}

# Abolish Colonialism - MIDDLE EAST REJECTS
country_event = {
	id = BBA_italy_anti_colonialism_events.63
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_anti_colonialism_events.63 FROM = [From.GetName]" }
	title = BBA_italy_anti_colonialism_events.63.t
	desc = BBA_italy_anti_colonialism_events.63.desc
	picture = GFX_report_event_election_vote

	is_triggered_only = yes

	#Cool
	option = {
		name = BBA_italy_anti_colonialism_events.53.a

		custom_effect_tooltip = ITA_release_colonies_south_africa_tt
		hidden_effect = {
			release_on_controlled = SAU
			release_on_controlled = OMA
			release_on_controlled = UAE
			release_on_controlled = QAT
			release_on_controlled = KUW
			release_on_controlled = IRQ
			release_on_controlled = SYR
			release_on_controlled = LEB
			release_on_controlled = JOR
			release_on_controlled = PAL
			release_on_controlled = GEO
			release_on_controlled = ARM
			release_on_controlled = PER
			release_on_controlled = AZR
			release_on_controlled = TUR
			release_on_controlled = KUR
		}
	}
}


# Negotiations with Albania - Event for ALB
country_event = {
	id = BBA_italy_anti_colonialism_events.100
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_anti_colonialism_events.100 FROM = [From.GetName]" }
	title = BBA_italy_anti_colonialism_events.100.t
	desc = BBA_italy_anti_colonialism_events.100.desc
	picture = GFX_report_event_albanian_king_zog
	
	is_triggered_only = yes
	
	#Accept - Get annexed
	option = {
		name = BBA_italy_anti_colonialism_events.100.a
		ai_chance = {
			base = 40
			modifier = {
				factor = 0
				is_subject = yes
				NOT = { is_subject_of = FROM }
			}
			modifier = {
				factor = 0.8
				any_other_country = {
					OR = {
						is_major = yes
						tag = YUG
					}
					NOT = { tag = FROM }
					OR = {
						has_guaranteed = ROOT
						is_in_faction_with = ROOT
					}
				}
			}
			modifier = {
				factor = 0.6
				OR = {
					has_government = neutrality
					has_government = fascism
				}
			}
			modifier = {
				factor = 10
				is_in_faction_with = FROM
			}
			modifier = {
				factor = 100
				is_subject_of = FROM
			}
		}

		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_anti_colonialism_events.101 hours = 6 random_hours = 2 } }
		}

		effect_tooltip = {
			FROM = { annex_country = { target = ROOT transfer_troops = yes } }
		}
		custom_effect_tooltip = GAME_OVER_TT
	}

	#Middle ground - Puppet
	option = {
		name = BBA_italy_anti_colonialism_events.100.b
		ai_chance = {
			base = 0
		}

		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_anti_colonialism_events.102 hours = 6 random_hours = 2 } }
		}

		effect_tooltip = {
			FROM = { puppet = ROOT }
		}
	}

	# Refuse
	option = {
		name = BBA_italy_anti_colonialism_events.100.c
		ai_chance = {
			factor = 20 
			modifier = {
				factor = 0
				OR = {
					AND = {
						is_in_faction_with = FROM
						OR = {
							is_subject = no
							is_subject_of = FROM
						}
					}
					AND = {
						is_in_faction = no 
						NOT = {
							any_other_country = {
								NOT = { tag = FROM }
								has_guaranteed = ROOT
							} 
						}
					}
				}
			}
			modifier = {
				add = 100
				is_in_faction = yes
				NOT = { is_in_faction_with = FROM }
			}
			modifier = {
				add = 100
				is_subject = yes
				NOT = { is_subject_of = FROM }
			}
		}

		FROM = {
			effect_tooltip = {
				create_wargoal = {
					type = take_state_focus
					target = ROOT
					generator = { 44 805 }
				}
			}
		}

		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_anti_colonialism_events.103 hours = 6 random_hours = 2 } }
		}
	}
}

# Negotiations with Albania - ALB gets annexed - Event for ITA
country_event = {
	id = BBA_italy_anti_colonialism_events.101
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_anti_colonialism_events.101 FROM = [From.GetName]" }
	title = BBA_italy_anti_colonialism_events.101.t
	desc = BBA_italy_anti_colonialism_events.101.desc
	picture = GFX_report_event_generic_peaceful_annexation

	is_triggered_only = yes

	#Cool
	option = {
		name = BBA_italy_anti_colonialism_events.101.a

		annex_country = { target = FROM transfer_troops = yes }
	}
}

# Negotiations with Albania - ALB gets puppetted - Event for ITA
country_event = {
	id = BBA_italy_anti_colonialism_events.102
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_anti_colonialism_events.102 FROM = [From.GetName]" }
	title = BBA_italy_anti_colonialism_events.102.t
	desc = BBA_italy_anti_colonialism_events.102.desc
	picture = GFX_report_event_generic_peaceful_annexation

	is_triggered_only = yes

	#Cool
	option = {
		name = BBA_italy_anti_colonialism_events.102.a

		puppet = FROM
	}
}

# Negotiations with Albania - ALB refused to get puppeted - Event for ITA
country_event = {
	id = BBA_italy_anti_colonialism_events.103
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_anti_colonialism_events.103 FROM = [From.GetName]" }
	title = BBA_italy_anti_colonialism_events.103.t
	desc = BBA_italy_anti_colonialism_events.103.desc
	picture = GFX_report_event_albanian_partisans

	is_triggered_only = yes

	#Nothing we respect their decision (pfff lies)
	option = {
		name = BBA_italy_anti_colonialism_events.103.a

		ai_chance = {
			base = 1
		}
	}

	#War goal
	option = {
		name = BBA_italy_anti_colonialism_events.103.a

		ai_chance = {
			base = 5
			modifier = {
				add = -4
				FROM = { is_ai = no }
			}
		}

		create_wargoal = {
			type = puppet_wargoal_focus
			target = FROM
		}

		hidden_effect = {
			country_event = { days = 1 id = bba_news.108 }
		}
	}
}



#### ##    ## ######## ######## ########  ########    ###     ######  ######## ####  #######  ##    ##    ######## ##     ## ######## ##    ## ########  ######  
 ##  ###   ##    ##    ##       ##     ## ##         ## ##   ##    ##    ##     ##  ##     ## ###   ##    ##       ##     ## ##       ###   ##    ##    ##    ## 
 ##  ####  ##    ##    ##       ##     ## ##        ##   ##  ##          ##     ##  ##     ## ####  ##    ##       ##     ## ##       ####  ##    ##    ##       
 ##  ## ## ##    ##    ######   ########  ######   ##     ## ##          ##     ##  ##     ## ## ## ##    ######   ##     ## ######   ## ## ##    ##     ######  
 ##  ##  ####    ##    ##       ##   ##   ##       ######### ##          ##     ##  ##     ## ##  ####    ##        ##   ##  ##       ##  ####    ##          ## 
 ##  ##   ###    ##    ##       ##    ##  ##       ##     ## ##    ##    ##     ##  ##     ## ##   ###    ##         ## ##   ##       ##   ###    ##    ##    ## 
#### ##    ##    ##    ######## ##     ## ######## ##     ##  ######     ##    ####  #######  ##    ##    ########    ###    ######## ##    ##    ##     ######  


# the Italians are demanding Ticino!
country_event = {
	id = BBA_italy_interaction_events.1
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.1 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.1.t 
	desc = BBA_italy_interaction_events.1.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	# It is hard to defend it anyway - One less weakpoint for us
	option = { 
		name = BBA_italy_interaction_events.1.a

		ai_chance = {
			base = 80
			modifier = {
				factor = 0
				OR = {
					FROM = {
						has_war_with = ROOT
					}
					ROOT = {
						OR = {
							AND = {
								has_war = yes
								any_enemy_country = {
									is_in_faction_with = FROM
								}
							}
							surrender_progress > 0.2
						}
					}
				}
			}

		}

		ITA = {
			country_event = {
			    id = BBA_italy_interaction_events.2
			    days = 2
			    random = 6
			}
		}
	}

	# How about no?
	option = { 
		name = BBA_italy_interaction_events.1.b

		ai_chance = {
			base = 20
		}

		ITA = {
			country_event = {
			    id = BBA_italy_interaction_events.3
			    days = 2
			    random = 6
			}
		}
	}
}

# The Swiss fold
country_event = {
	id = BBA_italy_interaction_events.2
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.2 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.2.t 
	desc = BBA_italy_interaction_events.2.desc
	picture = GFX_report_event_generic_sign_treaty2 
	
	is_triggered_only = yes

	# Perfetto!
	option = { 
		name = BBA_italy_interaction_events.2.a

		ITA = {
			transfer_state = 1466
			transfer_state = 708
		}
		708 = {
			add_core_of = ITA
			remove_core_of = SWI
		}
		1466 = {
			add_core_of = ITA
			remove_core_of = SWI
		}
	}
}

# The Swiss stand fast
country_event = {
	id = BBA_italy_interaction_events.3
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.3 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.3.t 
	desc = BBA_italy_interaction_events.3.desc
	picture = GFX_report_event_generic_sign_treaty2 
	
	is_triggered_only = yes

	# How DARE you?
	option = { 
		name = BBA_italy_interaction_events.3.a

		846 = {
			add_claim_by = ITA
		}
		ITA = {
			create_wargoal = {
				type = take_state_focus
				target = SWI
				generator = { 846 }
			}
		}	
	}
}

# Italy demands the coronation of an Italian prince!
country_event = {
	id = BBA_italy_interaction_events.4
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.4 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.4.t 
	desc = BBA_italy_interaction_events.4.desc
	picture = GFX_report_event_fascist_speech
	
	is_triggered_only = yes

	# why not?
	option = { 
		name = BBA_italy_interaction_events.4.a

		ai_chance = {
			base = 100
		}

		ITA = { 
			country_event = {
			    id = BBA_italy_interaction_events.5
			    days = 1
			    random = 2
			}
		}	
	}

	# iie
	option = { 
		name = BBA_italy_interaction_events.4.b

		ai_chance = {
			base = 0
		}

		ITA = {
			country_event = {
			    id = BBA_italy_interaction_events.6
			    days = 1
			    random = 2
			}
		}
	}
}

# The Croats accept
country_event = {
	id = BBA_italy_interaction_events.5
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.5 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.5.t 
	desc = BBA_italy_interaction_events.5.desc
	picture = GFX_report_event_hitler_croatia_handshake 
	
	is_triggered_only = yes

	# bellissimo!
	option = { 
		name = BBA_italy_interaction_events.5.a
		
		IF = {
			limit = {
				has_dlc = "Together for Victory"
			}
			ITA = {
				set_autonomy = {
				    target = CRO
				    autonomy_state = autonomy_reichsprotectorate
				    end_wars = no
				    end_civil_wars = no
				}
			}
		}
		IF = {
			limit = {
				NOT = {
					has_dlc = "Together for Victory"
				}
			}
			ITA = {
				puppet = CRO
			}
		}
	}
}

# The Croats reject
country_event = {
	id = BBA_italy_interaction_events.6
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.6 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.6.t 
	desc = BBA_italy_interaction_events.6.desc
	picture = GFX_report_event_bulgarian_soldiers
	
	is_triggered_only = yes

	# ah hell nah
	option = { 
		name = BBA_italy_interaction_events.6.a

		ITA = {
			create_wargoal = {
			    type = puppet_wargoal_focus
			    target = CRO
			}
		}
	}
}

# The new head of the national defence committee
country_event = {
	id = BBA_italy_interaction_events.7
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.7 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.7.t 
	desc = BBA_italy_interaction_events.7.desc
	picture = GFX_report_event_military_planning
	
	is_triggered_only = yes

	# nice
	option = { 
		name = BBA_italy_interaction_events.7.a

		add_country_leader_trait = ITA_head_of_the_national_committee	
	}
}

# Italy demands occupation of Dalmatia!
country_event = {
	id = BBA_italy_interaction_events.8
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.8 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.8.t 
	desc = BBA_italy_interaction_events.8.desc
	picture = GFX_report_event_fascist_speech
	
	is_triggered_only = yes

	# We see no reason to oppose this
	option = { 
		name = BBA_italy_interaction_events.8.a

		ai_chance = {
			base = 90
		}

		effect_tooltip = {
			if = {
				limit = {
					ROOT = {	
						OR = {		
							owns_state = 1563
							any_subject_country = {
								is_ai= yes
								owns_state = 1563
							}
						}
					}
				}
				
				every_state = {
					limit = {
						is_dalmatia = yes
						OR = {
							is_owned_by = ROOT
							owner = {
								is_ai = yes
								is_subject_of = ROOT
							}
						}
					}
					transfer_state_to = FROM
				}
			}
			
			if = {
				limit = {
					ROOT = {	
						OR = {		
							owns_state = 1476
							any_subject_country = {
								is_ai= yes
								owns_state = 1476
							}
						}
					}
				}
				FROM = {
					transfer_state = 1476
				}
			}
			if = {
				limit = {
					ROOT = {	
						OR = {		
							owns_state = 762
							any_subject_country = {
								is_ai= yes
								owns_state = 762
							}
						}
					}
				}
				every_state = {
					limit = {
						is_core_of = IST
						OR = {
							is_owned_by = ROOT
							owner = {
								is_ai = yes
								is_subject_of = ROOT
							}
						}
					}
					transfer_state_to = FROM
				}
			}
		}

		ITA = { 
			country_event = {
			    id = BBA_italy_interaction_events.9
			    days = 1
			    random = 2
			}
		}
	}

	# Hey stop that!
	option = { 
		name = BBA_italy_interaction_events.8.b
		trigger = {
			NOT = {
				is_subject_of = FROM
			}
		}

		ai_chance = {
			base = 10
		}

		ITA = {
			country_event = {
			    id = BBA_italy_interaction_events.10
			    days = 1
			    random = 2
			}
		}
		hidden_effect = {
			set_country_flag = ITA_refused_dalmatian_demands
		}
	}
}

# X country accepts our demands
country_event = {
	id = BBA_italy_interaction_events.9
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.9 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.9.t 
	desc = BBA_italy_interaction_events.9.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	# All according to Keikaku (TN: Keikaku means plan)
	option = { 
		name = BBA_italy_interaction_events.9.a

		if = {
			limit = {
				OR = {
					FROM = {
						
					owns_state = 1563
					}
					FROM = {
						any_subject_country = {
								is_ai= yes
								owns_state = 1563
							}
					}
							
				}
			}
			
				every_state = {
					limit = {
						is_dalmatia = yes
						OR = {
							is_owned_by = FROM
							owner = {
								is_ai = yes
								is_subject_of = FROM
							}
						}
					}
					transfer_state_to = ROOT
				}
			
		}
		if = {
			limit = {
				OR = {
					FROM = {
						owns_state = 1476
					}
					FROM = {
						any_subject_country = {
							is_ai= yes
							owns_state = 1476
						}
					}
				}
			}
			ROOT = {
				transfer_state = 1476
			}
		}
		if = {
			limit = {
				OR = {
					FROM = {
						owns_state = 762
					}
					FROM = {
						any_subject_country = {
							is_ai= yes
							owns_state = 762
						}
					}
				}
			}
			every_state = {
					limit = {
						is_core_of = IST
						OR = {
							is_owned_by = FROM
							owner = {
								is_ai = yes
								is_subject_of = FROM
							}
						}
					}
					transfer_state_to = ROOT
				}
		}	
	}
}

# X country rejects our demands
country_event = {
	id = BBA_italy_interaction_events.10
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.10 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.10.t 
	desc = BBA_italy_interaction_events.10.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	# Everything is not in fact Daijoubu
	option = { 
		name = BBA_italy_interaction_events.10.a

		if = {
			limit = {
				ROOT = {
					NOT = {
						is_in_faction_with = FROM
					}
				}
			} 
			if = {
				limit = {
					controls_state = 1563
				}
				ROOT = {
					create_wargoal = {
						type = take_state_focus
						target = FROM
						generator = { 1563 }
					}
				}
			}
			else_if = {
				limit = {
					controls_state = 1476
				}
				ROOT = {
					create_wargoal = {
						type = take_state_focus
						target = FROM
						generator = { 1476 }
					}
				}
			}
			else_if = {
				limit = {
					controls_state = 762
				}
				ROOT = {
					create_wargoal = {
						type = take_state_focus
						target = FROM
						generator = { 762 }
					}
				}
			}
		}
		else = {
			ROOT = {
				add_opinion_modifier = {
					target = FROM
					modifier = BUL_rejected_our_proposal
				}
			}
		}
		hidden_effect = {
			FROM = {
				clr_country_flag = ITA_sent_dalmatian_demands
			}
		}
	}
}

# Italy claims the montenegrin throne
country_event = {
	id = BBA_italy_interaction_events.11
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.11 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.11.t 
	desc = BBA_italy_interaction_events.11.desc
	picture = GFX_report_event_fascist_speech
	
	is_triggered_only = yes

	# They can have it
	option = { 
		name = BBA_italy_interaction_events.11.a

		ai_chance = {
			base = 60
		}

		ITA = { 
			country_event = {
			    id = BBA_italy_interaction_events.12
			    days = 1
			    random = 2
			}
		}
	}

	# N THK U
	option = { 
		name = BBA_italy_interaction_events.11.b

		ai_chance = {
			base = 40
		}

		ITA = {
			country_event = {
			    id = BBA_italy_interaction_events.13
			    days = 1
			    random = 2
			}
		}
	}
}

# X country accepts our demands (2)
country_event = {
	id = BBA_italy_interaction_events.12
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.12 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.12.t 
	desc = BBA_italy_interaction_events.12.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	# Perfetto!
	option = { 
		name = BBA_italy_interaction_events.12.a

		every_state = {
			limit = {
				is_core_of = MNT
				owner = {
					OR = {
						tag = PREV
						is_subject_of = PREV
					}	
				}
			}
			add_compliance = 15
			transfer_state_to = ROOT
		}
	}
}


# X country rejects our demands (2)
country_event = {
	id = BBA_italy_interaction_events.13
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.13 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.13.t 
	desc = BBA_italy_interaction_events.13.desc
	picture = GFX_report_event_generic_read_write
	 
	is_triggered_only = yes

	# Deplorable!
	option = { 
		name = BBA_italy_interaction_events.13.a

		if = {
			limit = {
				NOT = {
					is_in_faction_with = FROM
				}
			}
			ITA = {
				create_wargoal = {
					type = take_state_focus
					target = FROM
					generator = { 881 }
				}
			}
		}
	}
}


# Italy demands west-anatolian demiltarization
country_event = {
	id = BBA_italy_interaction_events.14
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.14 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.14.t 
	desc = BBA_italy_interaction_events.14.desc
	picture = GFX_report_event_fascist_speech
	
	is_triggered_only = yes

	# We have no use for troops there
	option = { 
		name = BBA_italy_interaction_events.14.a

		ai_chance = {
			base = 90
		}

		ITA = { 
			country_event = {
			    id = BBA_italy_interaction_events.15
			    days = 1
			    random = 2
			}
		}
	}

	# But then we can't defend ourselves!?
	option = { 
		name = BBA_italy_interaction_events.14.b

		ai_chance = {
			base = 10
		}

		ITA = {
			country_event = {
			    id = BBA_italy_interaction_events.16
			    days = 1
			    random = 2
			}
		}
	}
}

# X country accepts our demands (3)
country_event = {
	id = BBA_italy_interaction_events.15
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.15 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.15.t 
	desc = BBA_italy_interaction_events.15.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	# Perfetto!
	option = { 
		name = BBA_italy_interaction_events.15.a

		932 = {
			set_demilitarized_zone = yes
		}
		945 = {
			set_demilitarized_zone = yes
		}
		2768 = {
			set_demilitarized_zone = yes
		}
		991 = {
			set_demilitarized_zone = yes
		}
		1934 = {
			set_demilitarized_zone = yes
		}
	}
}

# X country rejects our demands (3)
country_event = {
	id = BBA_italy_interaction_events.16
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.16 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.16.t 
	desc = BBA_italy_interaction_events.16.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	# Perfetto!
	option = { 
		name = BBA_italy_interaction_events.16.a

		every_state = {
			limit = {
				OR = {
					state = 932
					state = 945
					state = 2768
					state = 991
					state = 1934
				}
			}
		}
	}
}

# Our territory is handed over to hungary
country_event = {
	id = BBA_italy_interaction_events.17
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.17 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.17.t 
	desc = BBA_italy_interaction_events.17.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	# oh, okay...
	option = { 
		name = BBA_italy_interaction_events.17.a 

	}
}

# Italy approaches us with an offer
country_event = {
	id = BBA_italy_interaction_events.18
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.18 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.18.t 
	desc = BBA_italy_interaction_events.18.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	# Hai
	option = { 
		name = BBA_italy_interaction_events.18.a

		ai_chance = {
			base = 70
		}

		ITA = {
			country_event = {
			    id = BBA_italy_interaction_events.19
			    days = 1
			    random = 2
			}
		}
	}

	# Iie
	option = { 
		name = BBA_italy_interaction_events.18.b 

		ai_chance = {
			base = 30
		}

		ITA = {
			country_event = {
			    id = BBA_italy_interaction_events.20
			    days = 1
			    random = 2
			}
		}
	}
}

# Greece accepts
country_event = {
	id = BBA_italy_interaction_events.19
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.19 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.19.t 
	desc = BBA_italy_interaction_events.19.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	# that works for us
	option = { 
		name = BBA_italy_interaction_events.19.a 

		GRE = {
			transfer_state = 164
		}
		GRE = {
			add_opinion_modifier = {
			    target = ITA
			    modifier = ITA_sold_stuff_to_us
			}
			add_ideas = ITA_dodecanese_treaty_idea
		}
		if = {
			limit = {
				NOT = { is_in_faction_with = FROM }
			}
			FROM = { add_to_faction = GRE }
		}
	}
}

# Greece rejects
country_event = {
	id = BBA_italy_interaction_events.20
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.20 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.20.t 
	desc = BBA_italy_interaction_events.20.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	# alright.. on to the next one I guess
	option = { 
		name = BBA_italy_interaction_events.20.a 

		ITA = {
			add_opinion_modifier = {
			    target = GRE
			    modifier = faction_traitor
			}
		}
	}
}



# Italy approaches us with an offer (2)
country_event = {
	id = BBA_italy_interaction_events.21
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.21 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.21.t 
	desc = BBA_italy_interaction_events.21.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	# Aye
	option = { 
		name = BBA_italy_interaction_events.21.a

		ai_chance = {
			base = 70
		}

		ITA = {
			country_event = {
			    id = BBA_italy_interaction_events.22
			    days = 1
			    random = 2
			}
		}
	}

	# Naye
	option = { 
		name = BBA_italy_interaction_events.21.b 

		ai_chance = {
			base = 30
		}

		ITA = {
			country_event = {
			    id = BBA_italy_interaction_events.23
			    days = 1
			    random = 2
			}
		}
	}
}

# Turkey accepts
country_event = {
	id = BBA_italy_interaction_events.22
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.22 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.22.t 
	desc = BBA_italy_interaction_events.22.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	# that works for us
	option = { 
		name = BBA_italy_interaction_events.22.a 

		TUR = {
			transfer_state = 164
		}
		TUR = {
			add_opinion_modifier = {
			    target = ITA
			    modifier = ITA_sold_stuff_to_us
			}
			add_ideas = ITA_dodecanese_treaty_idea
		}
		if = {
			limit = {
				NOT = { is_in_faction_with = FROM }
			}
			FROM = { add_to_faction = TUR }
		}
	}
}

# Turkey rejects 
country_event = {
	id = BBA_italy_interaction_events.23
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.23 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.23.t 
	desc = BBA_italy_interaction_events.23.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	# alright.. on to the next one I guess
	option = { 
		name = BBA_italy_interaction_events.23.a 

		ITA = {
			add_opinion_modifier = {
			    target = TUR
			    modifier = faction_traitor
			}
		}
	}
}

# Germany Tries to Anchluss Austria
country_event = {
	id = BBA_italy_interaction_events.24
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.24 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.24.t 
	desc = BBA_italy_interaction_events.24.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	# Fight alone
	option = { 
		name = BBA_italy_interaction_events.24.a 

		ai_chance = { 
			base = 60
		}

		GER = {
			country_event = {
			    id = BBA_italy_interaction_events.25
			    days = 1
			    random = 2
			}
		}
		add_war_support = 0.15
	}

	# Request Assistance
	option = { 
		name = BBA_italy_interaction_events.24.b 

		ai_chance = { 
			base = 30
			modifier = {
				add = 60
				has_dino_grandi = yes
			}
		}

		GER = {
			country_event = {
			    id = BBA_italy_interaction_events.25
			    days = 4
			}
		}

		ENG = {
			country_event = {
			    id = BBA_italy_interaction_events.27
			    days = 1
			}
		}

		FRA = {
			country_event = {
			    id = BBA_italy_interaction_events.28
			    days = 1
			}
		}

		add_stability = -0.1
		add_war_support = -0.05

		IF = {
			limit = {#Checks if ENG is hosting exiled ETH or if an ally does
				ITA_hosting_exiled_ethiopia = yes
				ITA = { #ITA must be at war with ETH
					has_war_with = ETH
				}
			}
			ENG = {
				set_country_flag = ITA_italy_asks_ethiopian_host_for_help
			}
		}
	}

	# Back down, cower in fear and wait for your demise
	option = { 
		name = BBA_italy_interaction_events.24.c 

		ai_chance = { 
			base = 10
		}

		GER = {
			country_event = {
			    id = BBA_italy_interaction_events.26
			    days = 1
			    random = 2
			}
		}
		add_war_support = -0.1
		add_stability = -0.15
		ITA = {
			diplomatic_relation = {
			    country = AUS
			    relation = guarantee
			    active = no
			}
		}
	}
}

# Italy stands up to us!
country_event = {
	id = BBA_italy_interaction_events.25
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.25 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.25.t 
	desc = BBA_italy_interaction_events.25.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	# They are getting ahead of themselves
	option = { 
		name = BBA_italy_interaction_events.25.a 

		ai_chance = { 
			base = 90
		}

		GER = {
			declare_war_on = {
			    target = AUS
			    type = annex_everything
			}
		}
		every_state = {
			limit = {
				has_state_flag = AUS_INITIAL_STATE
			}
			add_claim_by = GER
		}
	}

	# Sadly we must back down...
	option = { 
		name = BBA_italy_interaction_events.25.b 

		ai_chance = { 
			base = 10
		}

		add_stability = -0.1
		add_war_support = -0.2
		add_popularity = {
		    ideology = fascism
		    popularity = -0.3
		}

		hidden_effect = {
			every_country = {
				news_event = { hours = 6 id = BBA_italy_interaction_events_news.1 }
			}
		}
	}
}

#Germany Backs Down
news_event = {
	id = BBA_italy_interaction_events_news.1
	title = BBA_italy_interaction_events_news.1.t
	desc = BBA_italy_interaction_events_news.1.desc
	picture = GFX_news_event_generic_parliament
	
	is_triggered_only = yes
	
	option = { #Us
		name = BBA_italy_interaction_events_news.1.a
		trigger = {
			tag = ROOT
		}
	}

	option = { #Them
		name = BBA_italy_interaction_events_news.1.b
		trigger = {
			NOT = { tag = ROOT }
		}
	}
}

# Italy Backs Down 
country_event = {
	id = BBA_italy_interaction_events.26
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.26 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.26.t 
	desc = BBA_italy_interaction_events.26.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	# alright.. on to the next one I guess
	option = { 
		name = BBA_italy_interaction_events.26.a 

		every_state = {
			limit = {
				has_state_flag = AUS_INITIAL_STATE
				is_owned_by = AUS
			}
			add_core_of = GER
		}
		AUS = {
			every_unit_leader = {
				set_nationality = GER
			}
		}
		annex_country = { target = AUS transfer_troops = yes }
		add_political_power = 75
		set_country_flag = AUS_annexed
		add_war_support = 0.1
		add_stability = 0.05
		USA = {
			set_country_flag = { flag = USA_anschluss_window days = 60 value = 1 }
		}
		custom_effect_tooltip = anschluss_mefo_bills_tt
		hidden_effect = { # Having it appear twice might be confusing
			GER_mefo_bills_level_down = yes
			GER_mefo_bills_level_down = yes
		}
		custom_effect_tooltip = anschluss_mefo_bills_double_reduction
		add_to_variable = { var = GER_mefo_bill_counter value = -10 }

		if = {
			limit = {
				has_dlc = "Death or Dishonor"
				country_exists = YUG
				YUG = { has_war = no }
			}
			country_event = {
				id = DOD_yugoslavia.30
				days = 4
			}
		}
		hidden_effect = {
			news_event = { hours = 6 id = news.36 }
		}
	}
}

# (ENG) Italy wants our help against Germany
country_event = {
	id = BBA_italy_interaction_events.27
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.27 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.27.t 
	desc = BBA_italy_interaction_events.27.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	# Alright chaps, we're going in again
	option = { 
		name = BBA_italy_interaction_events.27.a 
		trigger = {
			NOT= {
				has_country_flag = ITA_italy_asks_ethiopian_host_for_help
			}
		}

		ai_chance = { 
			base = 50
			modifier = {
				add = 15
				ITA = {
					has_dino_grandi = yes
				}
			}
		}

		add_war_support = 0.05
		add_stability = -0.15

		ENG = {
			give_guarantee = AUS
		}

		hidden_effect = {
			every_country = {
				news_event = { hours = 6 id = BBA_italy_interaction_events_news.2 }
			}
		}
	}

	#Make Italy sign peace with Ethiopia
	option = { 
		name = BBA_italy_interaction_events.27.b
		trigger = {
			has_country_flag = ITA_italy_asks_ethiopian_host_for_help
		}

		ai_chance = { 
			base = 50
			modifier = {
				add = 15
				ITA = {
					has_dino_grandi = yes
				}
			}
		}
		custom_effect_tooltip = ITA_if_Italy_accepts_tt
		effect_tooltip = {
			add_war_support = 0.05
			add_stability = -0.15

			ENG = {
				give_guarantee = AUS
			}
		}

		FROM = {
			country_event = { id = BBA_italo_ethiopian_war_events.500 hours = 2 }
		}
	}

	# Blimey no, why should we care about the continent?
	option = { 
		name = BBA_italy_interaction_events.27.c 

		ai_chance = { 
			base = 50
		}

		add_stability = 0.1
	}
}

# The UK has guaranteed Austrian Independence
news_event = {
	id = BBA_italy_interaction_events_news.2
	title = BBA_italy_interaction_events_news.2.t
	desc = BBA_italy_interaction_events_news.2.desc
	picture = GFX_news_event_generic_parliament
		
	is_triggered_only = yes

	option = { #Wow
		name = BBA_italy_interaction_events_news.2.a 
		
	}
}

# (FRA) Italy wants our help against Germany
country_event = {
	id = BBA_italy_interaction_events.28
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.28 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.28.t 
	desc = BBA_italy_interaction_events.28.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	# Oui, pour la libert!
	option = { 
		name = BBA_italy_interaction_events.28.a 

		ai_chance = { 
			base = 50
			modifier = {
				add = 15
				ITA = {
					has_dino_grandi = yes
				}
			}
		}

		add_war_support = 0.05
		add_stability = -0.15

		FRA = {
			give_guarantee = AUS
		}

		hidden_effect = {
			every_country = {
				news_event = { hours = 6 id = BBA_italy_interaction_events_news.3 }
			}
		}
	}

	# This whole ordeal seems quite phony...
	option = { 
		name = BBA_italy_interaction_events.28.b 

		ai_chance = { 
			base = 50
		}

		add_stability = 0.1	
	}
}

# The French have guaranteed Austrian Independence
news_event = {
	id = BBA_italy_interaction_events_news.3
	title = BBA_italy_interaction_events_news.3.t
	desc = BBA_italy_interaction_events_news.3.desc
	picture = GFX_news_event_generic_parliament
	
	is_triggered_only = yes

	option = { #Stunning
		name = BBA_italy_interaction_events_news.3.a 
		
	}
} 

# (YUG) Italy is mean and we can't do anything about it
country_event = {
	id = BBA_italy_interaction_events.29
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.29 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.29.t 
	desc = BBA_italy_interaction_events.29.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	# We have no option but to accept
	option = { 
		name = BBA_italy_interaction_events.29.a 

		ai_chance = { 
			base = 100
		}

		every_state = {
			limit = {
				is_core_of = KOS
			}
			remove_core_of = ROOT
		}
		IF = {
			limit = {
				NOT = {
					KOS = {
						all_core_state = {
							is_controlled_by = ALB
						}
					}
				}
			}
			every_state = {
			limit = {
				is_core_of = KOS
			}
			transfer_state_to = ALB
		}
		}
		IF = {
			limit = {
				NOT = {
					KOS = {
						all_core_state = {
							NOT = { is_core_of = ALB }
						}
					}
				}
			}
		every_state = {
			limit = {
				is_core_of = KOS
			}
			add_core_of = ALB
		}
		}
	}

	# I don't like italy
	option = { 
		name = BBA_italy_interaction_events.29.b 
		
		ai_chance = { 
			base = 0
		}

		trigger = {
			is_subject = no
		}

		ROOT = {
			leave_faction = yes
		}
	}
}

# (HUN) Italy is nice :)
country_event = {
	id = BBA_italy_interaction_events.30
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.30 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.30.t 
	desc = BBA_italy_interaction_events.30.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	# Sounds good to me
	option = { 
		name = BBA_italy_interaction_events.30.a 

		ai_chance = { 
			base = 100
		}

		HUN = {
			add_opinion_modifier = {
			    target = ITA
			    modifier = ITA_recognized_our_claims
			}
		}
		ITA = {
			give_guarantee = HUN
		}
		HUN = {
			give_guarantee = ITA
		}
		every_state = {
			limit = {
				is_hungarian_vojvodina = yes
			}
			add_claim_by = HUN
		}
		every_state = {
			limit = {
				is_hungarian_vojvodina = yes
				owner = {
					OR = {
						tag = ITA
						is_subject_of = ITA
					}
				}
			}
			transfer_state_to = HUN
		}
		IF = {
			limit = {
				any_country = {
					is_subject_of = ITA
					controls_state = 1514
				}
			}
			random_country = {
				limit = { controls_state = 1514 }
				country_event = {
					id = BBA_italy_interaction_events.17
					days = 0
				}
			}
		}
	}

	# blasphemy that is
	option = { 
		name = BBA_italy_interaction_events.30.b 
		ai_chance = { 
			base = 0
		}
	}
}

# Italy wants to negotiate their claims to British Somalia
country_event = {
	id = BBA_italy_interaction_events.31
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.31 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.31.t 
	desc = BBA_italy_interaction_events.31.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	# We can give it to them
	option = { 
		name = BBA_italy_interaction_events.31.a 

		ai_chance = {
			base = 50
			modifier = {
				add = 10
				has_opinion = {
					target = ITA
					value > 70
				}
			}
			modifier = {
				add = 25
				ITA = {
					has_completed_focus = ITA_anglo_italian_pact
				}
			}
			modifier = {
				add = 15
				ITA = {
					has_country_leader = {
						character = ITA_dino_grandi
						ruling_only = yes
					}
				}
			}
			modifier = {
				add = 40
				ITA = {
					has_same_ideology = yes
				}
			}
		}
	}

	# They will not get it
	option = { 
		name = BBA_italy_interaction_events.31.b

		ai_chance = {
			base = 50
		}
	}
}

# Italy wants to negotiate their claims to djibouti
country_event = {
	id = BBA_italy_interaction_events.32
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.32 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.32.t 
	desc = BBA_italy_interaction_events.32.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	# Pour la Paix
	option = { 
		name = BBA_italy_interaction_events.32.a 

		ai_chance = {
			base = 50
			modifier = {
				add = 10
				has_opinion = {
					target = ITA
					value > 70
				}
			}
			modifier = {
				add = 25
				ITA = {
					has_completed_focus = ITA_franco_italian_pact
				}
			}
			modifier = {
				add = 15
				ITA = {
					has_country_leader = {
						character = ITA_dino_grandi
						ruling_only = yes
					}
				}
			}
			modifier = {
				add = 40
				ITA = {
					has_same_ideology = yes
				}
			}
		}

		hidden_effect = {
			
		}
	}

	# Non!
	option = { 
		name = BBA_italy_interaction_events.32.b

		ai_chance = {
			base = 50
		}
	}
}

# Italy wants to negotiate their claims to Socotra
country_event = {
	id = BBA_italy_interaction_events.33
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.33 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.33.t 
	desc = BBA_italy_interaction_events.33.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	# We can give it to them
	option = { 
		name = BBA_italy_interaction_events.33.a 

		ai_chance = {
			base = 50
			modifier = {
				add = 10
				has_opinion = {
					target = ITA
					value > 70
				}
			}
			modifier = {
				add = 25
				ITA = {
					has_completed_focus = ITA_anglo_italian_pact
				}
			}
			modifier = {
				add = 15
				ITA = {
					has_country_leader = {
						character = ITA_dino_grandi
						ruling_only = yes
					}
				}
			}
			modifier = {
				add = 40
				ITA = {
					has_same_ideology = yes
				}
			}
		}

		effect_tooltip = {
			
			ENG = {
				add_offsite_building = { type = industrial_complex level = 1 }
			}
		}

		hidden_effect = {
			
		}

		hidden_effect = {
			if = {
				limit = {
					NOT = {
						has_country_flag = ITA_italy_has_started_negotiations_flag
					}
				}
				set_country_flag = ITA_italy_has_started_negotiations_flag
			}
		}
	}

	# They will not get it
	option = { 
		name = BBA_italy_interaction_events.33.b

		ai_chance = {
			base = 50
		}
	}
}

# Italy wants to negotiate their claims to Tunisia
country_event = {
	id = BBA_italy_interaction_events.34
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.34 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.34.t 
	desc = BBA_italy_interaction_events.34.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	# Pour la Paix
	option = { 
		name = BBA_italy_interaction_events.34.a 

		ai_chance = {
			base = 50
			modifier = {
				add = 10
				has_opinion = {
					target = ITA
					value > 70
				}
			}
			modifier = {
				add = 25
				ITA = {
					has_completed_focus = ITA_franco_italian_pact
				}
			}
			modifier = {
				add = 15
				ITA = {
					has_country_leader = {
						character = ITA_dino_grandi
						ruling_only = yes
					}
				}
			}
			modifier = {
				add = 40
				ITA = {
					has_same_ideology = yes
				}
			}
		}

		effect_tooltip = {
			TUN = {
				every_core_state = {
					transfer_state_to = ITA
				}
			}
			FRA = {
				add_offsite_building = { type = industrial_complex level = 2 }
			}
		}

		hidden_effect = {
			set_global_flag = ITA_will_get_tunisia
		}
		
		if = { #Send this event if Britain controls the necessary state(s)
			limit = {
				ENG = {
					controls_state = 1622
				}
			}
			ENG = {
				country_event = {
				    id = BBA_italy_interaction_events.35
				    days = 3
				    random = 6
				}
			}
		}
		else = { #If Britain didn't have the necessary state(s), send this event
			FRA = {
				country_event = { #Balkan claims event
				    id = BBA_italy_interaction_events.36
				    days = 3
				    random = 6
				}
			}
		}

		hidden_effect = {
			if = {
				limit = {
					NOT = {
						has_country_flag = ITA_italy_has_started_negotiations_flag
					}
				}
				set_country_flag = ITA_italy_has_started_negotiations_flag
			}
		}
	}

	# Non!
	option = { 
		name = BBA_italy_interaction_events.34.b

		ai_chance = {
			base = 50
		}

		if = { #Send this event if Britain controls the necessary state(s)
			limit = {
				ENG = {
					controls_state = 116
				}
			}
			ENG = {
				country_event = {
				    id = BBA_italy_interaction_events.35
				    days = 3
				    random = 6
				}
			}
		}
		else = { #If Britain didn't have the necessary state(s), send this event
			FRA = {
				country_event = { #Balkan claims event
				    id = BBA_italy_interaction_events.36
				    days = 3
				    random = 6
				}
			}
		}

		hidden_effect = {
			if = {
				limit = {
					NOT = {
						has_country_flag = ITA_italy_has_started_negotiations_flag
					}
				}
				set_country_flag = ITA_italy_has_started_negotiations_flag
			}
		}
	}
}

# Italy wants to negotiate their claims to malta
country_event = {
	id = BBA_italy_interaction_events.35
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.35 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.35.t 
	desc = BBA_italy_interaction_events.35.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	# We can give it to them
	option = { 
		name = BBA_italy_interaction_events.35.a 

		ai_chance = {
			base = 50
			modifier = {
				add = 10
				has_opinion = {
					target = ITA
					value > 70
				}
			}
			modifier = {
				add = 25
				ITA = {
					has_completed_focus = ITA_anglo_italian_pact
				}
			}
			modifier = {
				add = 15
				ITA = {
					has_country_leader = {
						character = ITA_dino_grandi
						ruling_only = yes
					}
				}
			}
			modifier = {
				add = 40
				ITA = {
					has_same_ideology = yes
				}
			}
		}

		effect_tooltip = {
			ITA = {
				transfer_state = 1622
			}
			ENG = {
				add_offsite_building = { type = industrial_complex level = 1 }
			}
		}

		hidden_effect = {
			set_global_flag = ITA_will_get_malta
		}

		FRA = {
			country_event = {
			    id = BBA_italy_interaction_events.36
			    days = 3
			    random = 6
			}
		}

		hidden_effect = {
			if = {
				limit = {
					NOT = {
						has_country_flag = ITA_italy_has_started_negotiations_flag
					}
				}
				set_country_flag = ITA_italy_has_started_negotiations_flag
			}
		}
	}

	# They will not get it
	option = { 
		name = BBA_italy_interaction_events.35.b

		ai_chance = {
			base = 50
		}

		FRA = {
			country_event = {
			    id = BBA_italy_interaction_events.36
			    days = 3
			    random = 6
			}
		}

		hidden_effect = {
			if = {
				limit = {
					NOT = {
						has_country_flag = ITA_italy_has_started_negotiations_flag
					}
				}
				set_country_flag = ITA_italy_has_started_negotiations_flag
			}
		}
	}
}

# Italy wants to negotiate their claims to the balkans
country_event = {
	id = BBA_italy_interaction_events.36
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.36 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.36.t 
	desc = BBA_italy_interaction_events.36.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	immediate = { #For Loc purposes
		hidden_effect = {
			if = {
				limit = {
					NOT = {
						has_country_flag = ITA_italy_has_started_negotiations_flag
					}
				}
				set_country_flag = ITA_italy_has_started_negotiations_flag
			}
			else = {
				set_country_flag = ITA_italy_has_started_negotiations_flag
			}
		}
	}

	#No use arguing
	option = { 
		name = BBA_italy_interaction_events.36.a 

		hidden_effect = {
			set_global_flag = ITA_will_get_balkans
		}

		effect_tooltip = {
			every_state = {
				limit = {
					OR = {
						is_dalmatia = yes
						is_core_of = MNT
						is_core_of = SLV
						is_core_of = CRO
						is_core_of = BOS
						is_core_of = KOS
						is_core_of = MAC
						AND = {
							is_core_of = GRE
							NOT = {
								region = 33
							}
						}
					}
				}
				add_claim_by = ROOT
			}
		}

		ITA = {
			country_event = {
			    id = BBA_italy_interaction_events.37
			    days = 3
			    random = 6
			}
		}
	}
}


# (ITA) Treaty-terms concluded 
country_event = {
	id = BBA_italy_interaction_events.37
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.37 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.37.t 
	desc = BBA_italy_interaction_events.37.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			ENG = {
				clr_country_flag = ITA_italy_has_started_negotiations_flag
			}
			FRA = {
				clr_country_flag = ITA_italy_has_started_negotiations_flag
			}
		}
	}

	# Not all we wanted, but we can't complain
	option = { 
		name = BBA_italy_interaction_events.37.a 
		
		ai_chance = {
			base = 100
		}
		
		trigger = {
			NOT = {
				AND = {
					has_global_flag = ITA_will_get_tunisia
					has_global_flag = ITA_will_get_malta
					has_global_flag = ITA_will_get_balkans
				}
			}
		}

		IF = {
			limit = {
				has_global_flag = ITA_will_get_tunisia
				OR = {
					TUN = {
						exists = yes
						is_subject_of = FRA
					}
					TUN = {
						all_core_state = {
							is_owned_by = FRA
						}
					}
				}
			}
			TUN = {
				every_core_state = {
					transfer_state_to = ROOT
				}
			}
			FRA = {
				add_offsite_building = { type = industrial_complex level = 2 }
			}
		}

		IF = {
			limit = {
				has_global_flag = ITA_will_get_malta
				ENG = {
					controls_state = 1622
				}
			}
			ITA = {
				transfer_state = 1622
			}
			ENG = {
				add_offsite_building = { type = industrial_complex level = 1 }
			}
		}

		IF = {
			limit = {
				has_global_flag = ITA_will_get_balkans
			}
			
			every_state = {
				limit = {
					OR = {
						is_dalmatia = yes
						is_core_of = MNT
						is_core_of = SLV
						is_core_of = CRO
						is_core_of = BOS
						is_core_of = KOS
						is_core_of = MAC
						AND = {
							is_core_of = GRE
							NOT = {
								region = 33
							}
						}
					}
				}
				add_claim_by = ROOT
			}
		}

		hidden_effect = {
			ITA = {
				country_event = {
				    id = BBA_italy_interaction_events.39
				    days = 360
				}
			}
		}
	}

	# Splendido!
	option = { 
		name = BBA_italy_interaction_events.37.b 
		
		ai_chance = {
			base = 100
		}
		
		trigger = {
			AND = {
				has_global_flag = ITA_will_get_tunisia
				has_global_flag = ITA_will_get_malta
				has_global_flag = ITA_will_get_balkans
			}
		}

		IF = {
			limit = {
				has_global_flag = ITA_will_get_tunisia
			}
			TUN = {
				every_core_state = {
					transfer_state_to = ROOT
				}
			}
			FRA = {
				add_offsite_building = { type = industrial_complex level = 2 }
			}
		}

		IF = {
			limit = {
				has_global_flag = ITA_will_get_malta
			}
			ITA = {
				transfer_state = 1622
			}
			ENG = {
				add_offsite_building = { type = industrial_complex level = 1 }
			}
		}

		IF = {
			limit = {
				has_global_flag = ITA_will_get_balkans
			}
			
			every_state = {
				limit = {
					OR = {
						is_dalmatia = yes
						is_core_of = MNT
						is_core_of = SLV
						is_core_of = CRO
						is_core_of = BOS
						is_core_of = KOS
						is_core_of = MAC
						AND = {
							is_core_of = GRE
							NOT = {
								region = 33
							}
						}
					}
				}
				add_claim_by = ROOT
			}
		}

		hidden_effect = {
			ITA = {
				country_event = {
				    id = BBA_italy_interaction_events.39
				    days = 360
				}
			}
		}
	}
}

# The Papacy Reborn
country_event = {
	id = BBA_italy_interaction_events.38
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.38 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.38.t 
	desc = BBA_italy_interaction_events.38.desc
	picture = GFX_report_event_fascist_speech
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			if = {
				limit = {
					NOT = {
						has_country_flag = ITA_deposed_leader_flag
					}
				}
				set_country_flag = ITA_deposed_leader_flag
				random_character = {
					limit = {
						is_country_leader = yes
					}
					set_variable = { ITA.ITA_var_deposed_leader = THIS } #For loc purposes
				}
			}
		}
		if = {
			limit = {
				NOT = { has_country_flag = ITA_pope_took_over_italy_flag }
			}
			set_country_flag = ITA_pope_took_over_italy_flag
			mark_focus_tree_layout_dirty = yes
		}
	}

	# Deus Vult!
	option = { 
		name = BBA_italy_interaction_events.38.a 

		add_war_support = 0.1

		ITA_pope_takes_over = yes

		hidden_effect = { 
			news_event = { id = bba_news.666 hours = 2 } 
			set_country_flag = ITA_deposed_the_king
		}
	}
}


# Payments are done
country_event = {
	id = BBA_italy_interaction_events.39
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.39 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.39.t 
	desc = BBA_italy_interaction_events.39.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes
	hidden = yes

	#Ok
	option = { 
		name = BBA_italy_interaction_events.39.a 

		IF = {
			limit = {
				has_global_flag = ITA_will_get_british_somalia
			}
			ENG = {
				add_offsite_building = { type = industrial_complex level = -2 }
			}
		}

		IF = {
			limit = {
				has_global_flag = ITA_will_get_french_somaliland
			}
			FRA = {
				add_offsite_building = { type = industrial_complex level = -1 }
			}
		}

		IF = {
			limit = {
				has_global_flag = ITA_will_get_socotra
			}
			ENG = {
				add_offsite_building = { type = industrial_complex level = -1 }
			}
		}

		IF = {
			limit = {
				has_global_flag = ITA_will_get_tunisia
			}
			FRA = {
				add_offsite_building = { type = industrial_complex level = -2 }
			}
		}

		IF = {
			limit = {
				has_global_flag = ITA_will_get_malta
			}
			ENG = {
				add_offsite_building = { type = industrial_complex level = -1 }
			}
		}		
	}
}

# (FRA) Ratification of the Stresa Front
country_event = {
	id = BBA_italy_interaction_events.40
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.40 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.40.t 
	desc = BBA_italy_interaction_events.40.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			if = {
				limit = {
					ROOT = {
						is_faction_leader = yes
					}
				}
				every_other_country = {
					limit = {
						is_in_faction_with = ROOT
					}
					set_country_flag = ITA_add_to_the_stresa_front
				}
			}
		}
	}

	# The conditions are acceptable
	option = { 
		name = BBA_italy_interaction_events.40.a 

		ai_chance = {
			base = 100
		}

		every_country = { #If Italy has any wargoal on other countries, remove them so they can join the faction
			limit = {
				OR = {
					is_in_faction_with = ROOT
					tag = ROOT
				}
				FROM = {
					has_wargoal_against = PREV
				}
			}
			FROM = {
				remove_wargoal = {
					type = all
					target = PREV
				}
			}
		}

		effect_tooltip = {
			if = {
				limit = {
					ENG = {
						is_faction_leader = yes
					}
				}
				ENG = { add_to_faction = FRA }
				ENG = { add_to_faction = ITA }
			}
			else = {
				ROOT = {
					create_faction = stresa_front_ita
					ROOT = { add_to_faction = ITA }
					ROOT = { add_to_faction = ENG }
				}
				every_other_country = {
					limit = {
						NOT = {
							original_tag = ENG
						}
						has_country_flag = ITA_add_to_the_stresa_front
					}
					ROOT = {
						add_to_faction = PREV #Add already existing faction members to the new faction
					}
				}
			}
		}
		hidden_effect = {
			country_event = {
				id = BBA_italy_interaction_events.411
				days = 2
			}
		}
	}

	# No thank you
	option = { 
		name = BBA_italy_interaction_events.40.b 

		ai_chance = {
			base = 0
		}

		add_war_support = -0.3

	}
}


country_event = { #Hidden event
	id = BBA_italy_interaction_events.411
	
	hidden = yes
	is_triggered_only = yes
	fire_only_once = no

	#Italy joins the faction
	option = { 
		name = BBA_italy_interaction_events.41.a 
		ai_chance = {
			base = 100
		}
		if = {
			limit = {
				ENG = {
					is_faction_leader = yes
				}
			}
			ENG = { add_to_faction = FRA }
			ENG = { add_to_faction = ITA }
		}
		else = {
			ROOT = {
				create_faction = stresa_front_ita
				ROOT = { add_to_faction = ITA }
				ROOT = { add_to_faction = ENG }
			}
			every_other_country = {
				limit = {
					NOT = {
						original_tag = ENG
					}
					has_country_flag = ITA_add_to_the_stresa_front
				}
				ROOT = {
					add_to_faction = PREV #Add already existing faction members to the new faction
				}
			}
		}
	}
}

# [ITA.GetName] offers to bring us under their wings
country_event = {
	id = BBA_italy_interaction_events.41
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.41 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.41.t 
	desc = BBA_italy_interaction_events.41.desc
	picture = GFX_report_event_fascist_speech
	
	is_triggered_only = yes
	fire_only_once = no

	# I don't see why not
	option = { 
		name = BBA_italy_interaction_events.41.a 

		ai_chance = { 
			base = 70
			modifier = {
				factor = 0
				OR = {
					has_government = communism
					tag = SPC
				}
			}
		}

		add_ai_strategy = {
			type = alliance
			id = FROM
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = FROM
			value = 100
		}

		FROM = {
			add_ai_strategy = {
				type = alliance
				id = ROOT
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = ROOT
				value = 100
			}
		}

		FROM = {
			country_event = {
			    id = BBA_italy_interaction_events.42
			    days = 2
			    random = 6
			}
		}
	}

	# Shut up Romaboos! 
	option = { 
		name = BBA_italy_interaction_events.41.b

		ai_chance = { 
			base = 30
		}

		FROM = {
			country_event = {
			    id = BBA_italy_interaction_events.43
			    days = 2
			    random = 6
			}
		}
	}
}

# [FROM.GetName] accepts our offer
country_event = {
	id = BBA_italy_interaction_events.42
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.42 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.42.t 
	desc = BBA_italy_interaction_events.42.desc
	picture = GFX_report_event_fascist_speech
	
	is_triggered_only = yes
	fire_only_once = no

	# Niceu
	option = { 
		name = BBA_italy_interaction_events.42.a 

		puppet = FROM
	}
}

# [FROM.GetName] rejects our offer
country_event = {
	id = BBA_italy_interaction_events.43
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.43 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.43.t 
	desc = BBA_italy_interaction_events.43.desc
	picture = GFX_report_event_fascist_speech 
	
	is_triggered_only = yes
	fire_only_once = no

	# They will regret this day!
	option = { 
		name = BBA_italy_interaction_events.43.a 

		create_wargoal = {
			type = puppet_wargoal_focus
			target = FROM
		}
	}
}

# [ITA.GetName] offers to bring us under their wings
country_event = {
	id = BBA_italy_interaction_events.44
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.44 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.44.t 
	desc = BBA_italy_interaction_events.44.desc
	picture = GFX_report_event_fascist_speech
	
	is_triggered_only = yes
	fire_only_once = no

	# For the future of Latin America!
	option = { 
		name = BBA_italy_interaction_events.44.a 

		ai_chance = { 
			base = 80
		}

		add_ai_strategy = {
			type = alliance
			id = FROM
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = FROM
			value = 100
		}

		FROM = {
			add_ai_strategy = {
				type = alliance
				id = ROOT
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = ROOT
				value = 100
			}
		}

		FROM = {
			country_event = {
				id = BBA_italy_interaction_events.45
				days = 2
				random = 6
			}
		}
	}

	# Why should we speak to Europeans? 
	option = { 
		name = BBA_italy_interaction_events.44.b

		ai_chance = { 
			base = 20
		}

		FROM = {
			country_event = {
				id = BBA_italy_interaction_events.46
				days = 2
				random = 6
			}
		}
	}
}

# [FROM.GetName] accepts our offer (2)
country_event = {
	id = BBA_italy_interaction_events.45
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.45 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.45.t 
	desc = BBA_italy_interaction_events.45.desc
	picture = GFX_report_event_fascist_speech
	
	is_triggered_only = yes
	fire_only_once = no

	# Niceu
	option = { 
		name = BBA_italy_interaction_events.45.a 

		ROOT = { add_to_faction = FROM }
	}
}

# [FROM.GetName] rejects our offer (2)
country_event = {
	id = BBA_italy_interaction_events.46
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.46 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.46.t 
	desc = BBA_italy_interaction_events.46.desc
	picture = GFX_report_event_fascist_speech 
	
	is_triggered_only = yes
	fire_only_once = no
 
	# We can do little to change their minds...
	option = { 
		name = BBA_italy_interaction_events.46.a 

		add_political_power = 25
	}
}

# Jerusalem or War - Event for Jerusalem controller (from Pope)
country_event = {
	id = BBA_italy_interaction_events.666
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.666 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.666.t 
	desc = BBA_italy_interaction_events.666.desc
	picture = GFX_report_event_fascist_speech
	
	is_triggered_only = yes
 
	# Accept
	option = { 
		name = BBA_italy_interaction_events.666.a 

		ai_chance = { 
			base = 10
		}

		effect_tooltip = {
			FROM = {
				transfer_state = 454 #PALESTINE
				add_opinion_modifier = {
					target = ROOT
					modifier = ITA_complied_to_church_demands
				}
			}
		}
		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_interaction_events.667 hours = 6 random_hours = 2 } }
		}
	}
	# Reject
	option = { 
		name = BBA_italy_interaction_events.666.b

		trigger = {
			NOT = { is_subject_of = FROM }
		}

		ai_chance = { 
			base = 0
		}

		effect_tooltip = {
			FROM = {
				create_wargoal = {
					type = take_state
					target = ROOT
					generator = { 454 } 
				}
			}
		}

		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_interaction_events.668 hours = 6 random_hours = 2 } }
		}
	}
}

#ITA asking to negotiate with ENG
country_event = {  
	id = BBA_italy_interaction_events.50
	title = BBA_italy_interaction_events.50.t 
	desc = BBA_italy_interaction_events.50.desc
	picture = GFX_report_event_fascist_speech 
	
	is_triggered_only = yes
 
	option = { #We want Italy to make peace with Ethiopia at first
		name = BBA_italy_interaction_events.50.a 
		ai_chance = {
			base = 10
			modifier = {
				add = 10
				has_opinion = {
					target = ITA
					value > 70
				}
			}
			modifier = {
				add = 25
				ITA = {
					has_completed_focus = ITA_anglo_italian_pact
				}
			}
			modifier = {
				add = 15
				ITA = {
					has_country_leader = {
						character = ITA_dino_grandi
						ruling_only = yes
					}
				}
			}
			modifier = {
				add = 40
				ITA = {
					has_same_ideology = yes
				}
			}
		}

		FROM = { 
			country_event = { id = BBA_italo_ethiopian_war_events.500 hours = 4 random_hours = 2 }
		}

		hidden_effect = { #For scripted loc  purposes
			set_country_flag = ITA_italy_suing_for_peace_flag
		}		
	}

	option = { #Bugger off!
		name = BBA_italy_interaction_events.50.b 
		ai_chance = {
			base = 1
		}
	}
}

country_event = { #Italy receiving the cold hand from England
	id = BBA_italy_interaction_events.51
	title = BBA_italy_interaction_events.51.t 
	desc = BBA_italy_interaction_events.51.desc
	picture = GFX_report_event_fascist_speech 
	
	is_triggered_only = yes
 
	option = { #Stupid English!
		name = BBA_italy_interaction_events.51.a 
	}
}

country_event = { #England receives the news that Italy signed a peace treaty with Ethiopia
	id = BBA_italy_interaction_events.60
	title = BBA_italy_interaction_events.60.t 
	desc = BBA_italy_interaction_events.60.desc
	picture = GFX_report_event_fascist_speech 
	
	is_triggered_only = yes
 
	option = { #English response
		name = BBA_italy_interaction_events.27.a #Intentional
		trigger = {
			original_tag = ENG
		} 
		
		add_war_support = 0.05
		add_stability = -0.15

		ENG = {
			give_guarantee = AUS
		}

		hidden_effect = {
			every_country = {
				news_event = { hours = 6 id = BBA_italy_interaction_events_news.2 }
			}
			clr_country_flag = ITA_italy_asks_ethiopian_host_for_help
			if = {
				limit = {
					has_global_flag = second_italo_ethiopian_war_flag
				}
				if = {
					limit = {
						has_global_flag = end_of_second_italo_ethiopian_war_flag
					}
					clr_global_flag = end_of_second_italo_ethiopian_war_flag
				}
				clr_global_flag = second_italo_ethiopian_war_flag
			}
		}
	}
}

country_event = { #Italy is notified that a specific country might take longer to decide whether to be puppeted or not
	id = BBA_italy_interaction_events.70
	title = BBA_italy_interaction_events.70.t 
	desc = BBA_italy_interaction_events.70.desc
	picture = GFX_report_event_generic_parliament 
	
	is_triggered_only = yes
 
	option = { #we'll wait
		name = BBA_italy_interaction_events.70.a
	}
}

country_event = { #Exiled country receives offer to become Italian puppet
	id = BBA_italy_interaction_events.71
	title = BBA_italy_interaction_events.71.t 
	desc = BBA_italy_interaction_events.71.desc
	picture = GFX_report_event_generic_sign_treaty2 
	
	is_triggered_only = yes
 
	option = { #Accept to become a puppet to Italy
		name = BBA_italy_interaction_events.71.a
		FROM = {
			release_puppet_on_controlled = ROOT
		}
		ROOT = {
			hidden_effect = {
				set_popularities = {
					democratic = FROM.party_popularity_100@democratic
					neutrality = FROM.party_popularity_100@neutrality
					fascism = FROM.party_popularity_100@fascism
					communism = FROM.party_popularity_100@communism
				}
			}
			set_politics = {
				ruling_party = FROM
			}
		}
		custom_effect_tooltip = ITA_create_puppet_tt
		hidden_effect = {
			load_focus_tree = generic_focus
			add_to_temp_variable = { FROM.ITA_pp_from_releasing_colonies = 15 }
		}
	}

	option = { #Refuse - GAME OVER
		name = BBA_italy_interaction_events.71.b
		trigger = {
			is_ai = no
		} 
		custom_effect_tooltip = GAME_OVER_TT
		hidden_effect = {
			FROM = { #Annex the player so the game is over for them
				annex_country = {
					target = ROOT
					transfer_troops = no
				}
			}
			FROM = { #Hidden event to release the player's country as puppet
				country_event = { id = BBA_italy_interaction_events.73 hours = 1 }
			}
			add_to_temp_variable = { FROM.ITA_pp_from_releasing_colonies = 15 }
		}
	}
}

country_event = { #Ethiopia's host is notified that Ethiopia is leaving
	id = BBA_italy_interaction_events.72
	title = BBA_italy_interaction_events.72.t 
	desc = BBA_italy_interaction_events.72.desc
	picture = GFX_report_event_generic_parliament 
	
	is_triggered_only = yes
 
	option = { #ok
		name = BBA_italy_interaction_events.72.a
	}
}

country_event = { #Italy releases country as puppets
	id = BBA_italy_interaction_events.73
	picture = GFX_report_event_fascist_speech 
	
	hidden = yes
	is_triggered_only = yes
 
	immediate = {
		ROOT = {
			release_puppet_on_controlled = FROM
		}
		FROM = {
			load_focus_tree = generic_focus
		}
	}
}

# Jerusalem or War - Country accepts - Event for ITA (Pope)
country_event = {
	id = BBA_italy_interaction_events.667
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.667 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.667.t 
	desc = BBA_italy_interaction_events.667.desc
	picture = GFX_report_event_fascist_speech
	
	is_triggered_only = yes
 
	# Ok
	option = { 
		name = BBA_italy_interaction_events.667.a 

		every_state = {
			limit = {
				is_core_of = PAL
			}
			transfer_state_to = ROOT
		}
		add_opinion_modifier = {
			target = FROM
			modifier = ITA_complied_to_church_demands
		}
		1253 = {
			set_state_category = town
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = bunker
				level = 2
				province = 297
				instant_build = yes
			}
			add_building_construction = {
				type = bunker
				level = 2
				province = 21229
				instant_build = yes
			}
			if = {
				limit = {
					anti_air_building < 5
				}
				add_building_construction = {
					type = anti_air_building
					level = 1
					instant_build = yes
				}
			}
		}
	}
}

# Jerusalem or War - Country Rejects - Event for ITA (Pope)
country_event = {
	id = BBA_italy_interaction_events.668
	immediate = { log = "[GetDateText]: [Root.GetName]: event BBA_italy_interaction_events.668 FROM = [From.GetName]" }
	title = BBA_italy_interaction_events.668.t 
	desc = BBA_italy_interaction_events.668.desc
	picture = GFX_report_event_fascist_speech
	
	is_triggered_only = yes
 
	# Accept
	option = { 
		name = BBA_italy_interaction_events.668.a 

		create_wargoal = {
			type = take_state
			target = FROM
			generator = { 1902 } 
		}
	}
}
